New Features:
====================
New character classes (Ken Arromdee)
New weapons code (Ken Arromdee)
Armor weights implemented (Ken Arromdee)
New tools code (Ken Arromdee)
Polymorph self code (Ken Arromdee)
additional bug fixes (Ken Arromdee)
added new character classes and traps (M. Stephenson)
added the Throne Room (M. Stephenson)
Rockmole & Keystone Kops code (Scott R. Turner)
Squeeky Board & Magic traps (Scott R. Turner)
Fountain code (Scott R. Turner)
Magic Marker code (Gil Neiger)
Fountain code enhancements (Gil Neiger)
Enhancements to dozens of routines (Gil Neiger)
more bug fixes in hack.zap.c
#dip mods to fountain code (Eric Backus)
added spellbooks and spellcasting (M. Stephenson)
implemented code for praying (M. Stephenson)
made some enhancements to the endgame (M. Stephenson)
Some of the old code (eg. KOPS) has been enhanced to allow for more
	functionality
Kops now throw cream pies (thank/blame KAA for the suggestion)
The wizard may not stay dead!!!
There are a couple of new types of demons.
Demons may not be aggressive.
There are lots more of these little gems, with sufficient hints in
	various fortune cookies to give away enough clues.


Build from source changes
=========================
The program "makedefs" has been modified in order to allow limited use of
	"#ifdef/#else/#endif" sets in objects.h
Makedefs will only generate one #define for any number of ocurrences of
	a given object name string.  In addition, "makedefs" also generates
	alternate defines for "DEAD_xxxxx" in those cases where a monster
	has been given an alternate identity.
Makedefs has been modified in order that it may be used to
	initialize the following variable def files:
	  objects.h -o option,  see above.
	  trap.h    -t option,  trap type defines.
	  date.h    -d option,  date string.
	  data	    -D option,  optional monster names.
	  rumors    -r option,  optional rumor addition.
The Unix "Makefile" has been enhanced to make installation cleaner
	and also to allow "initialization" of the play directories (WARNING:
	this will destroy old score files!!!).  The PC Makefile hasn't been
	upgraded in this respect


Known Problems:
=================
The WALKIES code is really crude.  Fido get's mnexto()'d you when
	he gets out of the effective leash range.  I haven't yet been able
	to integrate leashed movement into dogmove().  You might just want
	to comment out the #define in config.h
ROCKMOLES have some problems with screen updating.  I didn't make
	any changes to the code I received, and have noticed some distinct
	problems with walls not being set to "door" until the rockmole
	moves off the cell
There are some problems in the item selection code, the usual effect
	of which is to leave the cursor sitting at some arbitrary point on
	the screen instead of returning it to the upper left hand corner or
	onto the "@".  This doesn't affect the screen updating, so I have
	ignored it up to now
REDO may not be completely implemented.  I am still working on it
	here but would appreciate any help anyone out there might want to give




		NetHack Fixes List	Revision 1.4

dogmove.c:	Death code fixed so dog with <1 hp doesn't "die of hunger".
		Slack leash message not invoked unless leash attached.
		Added "DOGNAME" option (thanks to Roland McGrath).

u_init.c:	Priest(esse)s start off with their weapon blessed.

spell.c:	Allows high level characters to cast spells upon themselves
zap.c:		(such as polymorph).

pray.c:		allows for de-cursing worn rings as well as weapons.
		Knights, Priests and Priestesses can now "#turn" undead
		(UNDEAD = "VWZ &").
		fixed bugs in blessings bestowed by gods.

read.c:		SPE_CAUSE_FEAR does not give a "You hear..." message unless no
		monsters are nearby.
		fix to bug in "do_genocide" which allowed player to wipe out
		all '@'s and survive.

polyself.c:	fix to rehumanize to catch players who wipe out '@'s while
		in polymorphed form as they de-polymorph.

wield.c:	bug causing segmentation fault on "w-" followed by "w[weapon]"
		fixed by chuq@sun

trap.c:		similar null pointer problem corrected.

make.exe.uu:	correction of names at top of uuencoded files which caused the
nansi.sys.uu:	original files to be overwritten by the decoded files when
		uudecode was invoked. (found by len@elxsi).

nethack.6:	general beautification and appropriate acknowledgement of
		trademarks to avoid getting sued. :-) (thanks chuq)

help:		addition of "V" and "#" commands to help text.

invent.c:	fix to REDO bug inhibiting the appearance of the item usage
		prompt.

makedefs.c:	added "{", "\" and corrected Rockmole definition in "data".
		fixed things for Dos users (file open modes, etc.)

cmd.c:		added #[command] auto-substitution.

termcap.c:	fixed termlib / curses dependencies.
		fixed null padding bug on output of SO/SE/HI/HE.

pcmain.c:	many fixes by Ralf Brown to allow the
pcunix.c:	program to be compiled using the Turbo C compiler in a Dos
Makefile.tcc:	enviornment.

engrave.c:	engravings burned or engraved into the floor (as opposed to
		those made with finger or marker) can be felt out when blind.
		(inspired by Stefan Wrammerfors).

mon.c:		fixed "monster looked at a strange trap" bug for 16 bit
		machines (long vs. int problem reported by mike@cimcor). 

fight.c:	hitmm() fixed to return 0 (no hit) if either monster passed
		in is non-existant.  This fixes a number of null reference
		problems (ex. monmove.c[~360]).
		Misc zero reference errors fixed by Paul Eggert. eggert@grand

Makefile.xenix:	New version (that works) supplied by Greg Laskin greg@smash

fountain.c:	Misc zero reference errors fixed by Paul Eggert. eggert@grand
search.c:

options.c:	New options added for GRAPHICS, DOGNAME, and new routine
		added to allow easier sorting of string parameters (":,"
		are considered to be string terminators for copying in
		name, and dogname).





		NetHack Fixes List	Revision 2.2

Fixes and Modified Features
---------------------------
Guidebook.mn	New file "Guide to the Mazes of Menace". By Eric Raymond.
Guidebook	A file for preparation using the "mn" macros supplied with
		the 2.11 news release, as well as an ascii version of the
		same. 

NetHack.cnf	Sample configuration file for the PC. (creps@silver)

Makefiles	Corrected problem in which the linking was done on build and
(unix/xenix)	on install. (Contributed by Janet Walz - walz@mimsy)

Makefile.att	Added a makefile for the AT&T Unix PC using shared libraries.
		(Contributed by ahby@umn-cs)

Makefile.pc	Streamlined compilation of main.o, tty.o, and unix.o
Makefile.tcc	(Contributed by polder@cs.vu).

data.base	deletion of duplicate lines and spelling fixes. (sweet@scubed)

invent.c	REDO problem with "What do you want to..." text fixed.
		down stairway identification fixed.
		Alloc "buf" to allow for variable length HI/HE. (tom@uw-warp)

engrave.c	Correction to "feel" code. (mike@genat)
		Corrected switch for message determination. (patrickm@hpisof0)
		BURN'ed engravings made un-erasable again. (kyrimis@princeton)

pri.c		Added colour highliting functions (sweet@scubed)

prisym.c	changed "symbol.room" to "ROOM_SYM" (one I missed; Ralf.Brown)
		Changed "dirlet()" to return an int. (maartenj@cs.vu)

msdos.c		Changed "symbol" to "showsyms" (Ralf.Brown)
		Fixed up REDO & IBMBIOS stuff. (Kevin Sweet - sweet@scubed)

do.c		Dropping gold asked for only when gold posessed. (walz@mimsy)
		Potential unsigned value problem fixed (u.ucreamed)
		Added leash dropping code. (maartenj@cs.vu)
		Blind modifications for blindfolding.  (eric@snark)
		Value wrap fixed for u.ucreamed

fight.c		Dog's name now used in hitting avoidence message. (walz@mimsy)
		Variable initialization fixed w.r.t. #ifdef / #else.
		(Reported by Erwin Unruh - unruh@infbs)
		Added giant rats and kobolds back into code. (sweet@scubed)

spell.c		Potential unsigned value problem fixed (u.ulevel).
		Typos corrected. (Tom May - tom@uw-warp)
		Blind modifications for blindfolding.  (eric@snark)

shk.c		"inshop" crash bug corrected (many sources).
		extern declaration of carrying() moved to avoid a Turbo-C
		type mismatch msg. (Ralf.Brown)
		Added new "online()" which executes faster. (tom@uw-warp)
		Blind modifications for blindfolding.  (eric@snark)
		Added item pricing shopkeeper talk.
		(Idea from a hacked up 1.0.1 source sent in by michael@stb)
		Cleaned up Kops code. (sweet@scubed)

mhitu.c		Argument mismatches fixed. (walz@mimsy)
		Scorpion/spider mixup fix. (William LeFebvre - phil@rice)
		Blind modifications for blindfolding.  (eric@snark)

potion.c	Argument mismatch fixed. (walz@mimsy)
		Blind modifications for blindfolding.  (eric@snark)
		Poison handling made more dependant on poison resistance.
		(From an idea by Steve Creps - creps@silver)

mklev.c		Fixed up installation of vamp traps. (sweet@scubed)

makemon.c	Monster creation location bug fixed. (walz@mimsy)
		Monster creation crash fixed. (many sources)
		Monster posessions bug fixed. (S. Wrammerfors stewr@obelix)
		Added giant rats and kobolds back into code. (sweet@scubed)

hack.c		"Elbereth" effectiveness increased under "HARD" option to
		be reasonable. (walz@mimsy)
		Declaration of "register struct monst *m_at()" fixed. (many)
		Typo fixed. (tom@uw-warp)
		Fixed scroll of scare monster pickup problems (and giveaway)
		(polder@cs.vu)
		Documentation modifications for blindfolding.  (eric@snark)

ioctl.c		ioctl call for SET changed to function properly under

unixtty.c	Sys V R3 mods.  (tom@uw-warp)

decl.c		in_doagain initialized. (many sources)

wield.c		Ability to remove cursed weapons w. w- removed. (many sources)

options.c	Major rewrite of options help.  Now uses pager.  (mike@genat)
		Rewrote GRAPHICS setup. (maartenj@cs.vu)
		Allowed reassignment of inventory order #ifdef DGK
		(polder@cs.vu)

pray.c		Fixed mk_obj of spellbook under all conditions to make book
		if "SPELLS" defined, and scroll otherwise. (unruh@infbs)
		Fixed typo in "gods angry" text. (tom@uw-warp)
		Fixed blessing code. (Simon Brown - simon@its63b)
		Blind modifications for blindfolding.  (eric@snark)

zap.c		Potion of invis. breakage message improved. (unruh@infbs)
		Added WAN_PROBING to "zapyourself".
		Changed "dirlet()" to return an int. (maartenj@cs.vu)
		Fixed cancellation code to work properly on wands (spe
		set to -1 instead of 0) this means no infinite wands of
		wishing. (Ron Wessels - ron@utcsri)
		Fixed bug in "buzz()" causing crash when destroying a
		trapper from inside with a wand/spell.  (mike@genat)
		Added fcn to destroy wands with zero charges. (sweet@scubed)

pcmain.c	Added a routine to zero out the fileinfo array in order to
		prevent crashes on level change. (Ralf.Brown)
		Added chdir to HACKDIR before looking for .CNF file.
		Added call "uptodate(savefile)". (polder@cs.vu)

pager.c		changed "cornline()" to use xputs for HI/HE. (tom@uw-warp)
		added choice for dowhatis() to allow letter or cursor object
		selection. (polder@cs.vu)

cmd.c		Added ^W (wish) and ^I (ident-all) commands for WIZARD-mode.
		(Paul Polderman - polder@cs.vu)
		Added "Z" as alternate to "# cast" (Eric Raymond - eric@snark)

u_init.c	Expanded a tab which didn't show in raw mode.
		Changed trobj.trotyp to "unsigned short" to avoid >255
		problems. (Maarten Jan Huisjes - maartenj@cs.vu)
		Removed wand of wishing from WIZARD's inventory (due to
		the above cmd additions). (polder@cs.vu)
		Fixed declaration of leash. (simon@its63b)
		Beefed up Wizard class.
		Added Wakizashi for Samurai.
		Added holy water for Priest(ess)es.
		Modifications to provide blindfolds.  (eric@snark)

end.c		changed inventory identification on death to list form.
		(polder@cs.vu)
		added hallucination effects to done_in_by()
		added posession of amulet flag for scoreboard (sweet@scubed)

wizard.c	corrected "nasties" decl. (maartenj@cs.vu)
		Blind modifications for blindfolding.  (eric@snark)

do_wear.c	Prot. from shape changers logic fixed. (maartenj@cs.vu)

lev.c		Prot. from shape changers logic fixed. (maartenj@cs.vu)

mon.c		Inserted cast to fix compiler warning. (maartenj@cs.vu)
		Nymphs now leave potions of object detection when killed.
		Kops now don't leave treasure behind. (sweet@scubed)

topl.c		Changed size of "toplines" to avoid overflow in "parseoptions"
		when help is asked for. (probably n/a) (maartenj@cs.vu)

topten.c	Added longer death descriptions, including name of
		shopkeeper who killed character.  (many sources)

termcap.c	Changed allocation of HI/HO for copying SI/SO to allow room
		for null.  (maartenj@cs.vu)
		Added PCHack 3.61 termcap stuff.
		Added colour highliting code. (sweet@scubed)

version.c	Expanded a tab for rawmode io. (maartenj@cs.vu)

objnam.c	Allow the WIZARD to wish for really excessive objects.
		(polder@cs.vu)

makedefs.c	Added "freopen" which works (MSC 4.0 drops first couple
		of lines).  Solves missing #define AMULET... problem.
		(Nathan Glasser - nathan@mit-eddie)

rnd.c		Changed around random number generation:
		BSD uses "random()". (Paul Eggert - eggert@grand)
		SYSV uses "lrand48()". (mike@genat from above)

eat.c		Changed "choke()" code to waste food rather than choke on
		it #ifndef HARD. (Allan Pratt - apratt@atari)
		Blind modifications for blindfolding.  (eric@snark)

objects.h	added blindfold object (tool).  (eric@snark)

you.h		changed Blind/BLIND to Blinded/Blinded
		added Blindfolded/BLINDFOLDED
		redefined Blind in terms of above parameters.  (eric@snark)

apply.c		added blindfold code.  (eric@snark)

timeout.c	Blind modifications for blindfolding.  (eric@snark)

sit.c		Blind modifications for blindfolding.  (eric@snark)

trap.c		Blind modifications for blindfolding.  (eric@snark)
		Level teleportation to hell fixed so that it will not
		do so unless character has Fire_resistance. (many sources)
		Added polymorph trap. (many sources)

monmove.c	added check on presence of "fobj" before atl() call
		to avoid potential segmentation problem with ROCKMOLE.
		(Reported by Doug Rudoff - doug@wiley)

various files	Fixed typos.  Also converted British English words to
		American English for uniformity.  (Original list of typos
		submitted by Steve Creps - creps@silver)


New Features
------------
  1)	New flags in "config.h" (some of these were included in 1.4f):

	COM_COMPL	Command line completion by John S. Bien
	GRAPHICS	Funky screen character support (Eric S. Raymond)
	HACKOPTIONS	Support DGK-style HACKOPTIONS processing (ESR)
	RPH		Various hacks by Richard P. Hughey
	KJSMODS		Various changes made by Kevin Sweet
	BVH		Additions by Bruce Holloway

	In addition, in an MSDOS enviornment, when GRAPHICS is defined:

	MSDOSCOLOR	Colour highlighting of monsters, etc.

	Of the above, I haven't tested HACKOPTIONS and MSDOSCOLOR.  If you
	find bugs in these, send me the reports.

  2)	New objects:

	blindfold - allows you to avoid the gaze of a Floating Eye and to
		    use your telepathy on command if you have it.

	mirror - scares monsters if you use it on them (and other uses).

	ring of polymorph - (usually cursed) forces random polymorphs.

	ring of polymorph control - prevents system shock and allows choice of
				    creature to polymorph into.

  3)	New Files:

	- A new set of documentation, the "Guidebook to the Mazes of Menace"
	has been supplied by Eric S. Raymond.  The guidebook is written for
	nroff using the "mn" macro set supplied with Bnews 2.11 or greater.
	Since not everyone has these macros, I have run the guidebook through
	nroff, and supplied it in flat ascii format as well.  [Moderator's
	note: because of past problems, I ran the formatted version
	through "col -b" before passing it on to remove ^H's, etc.  -br]

	- A copy of "HACK.CNF" which has been renamed "NetHack.cnf" was
	supplied by Steve Creps. The file decl.c has been updated to reflect
	this change.

	- A new "Makefile" for the AT&T Unix machines has been added.

	- I was hoping to get documentation on "NANSI.SYS" as well, but got
	no responses to the mail I sent the author, direct and via Bill
	Randle at tekred.  As per usual, I will gladly publish any relevant
	documentation I get.

  4)	Major game changes:

	- Shop generation has been significantly changed.  A new structure
	has been introduced which allows shops (except the "general" type)
	to have up to three different types of object inside.  There is also
	a new "distribution pattern" parameter which tells the generation
	code how to lay out the shop (this is preliminary to the addition of
	two new types of shop, the temple and barracks - more on this later).

	- Shopkeepers will now tell you how much they expect for each object
	you pick up.  This gives you the ability to haggle with the merchant
	in question by dropping and picking up objects until you are more or
	less satisfied with the price.  I have re-written "getprice()" in
	shk.c in an attempt to make sure that you cannot actually sell any
	particular object for more than the shopkeeper will charge for it.

	- Another change to shopkeepers has them potentially getting angry if
	you stay beside them after not paying your bill.  Each they time they
	ask you to pay up, there is a chance they will decide they don't like
	people who don't pay...

	- A new monster, the hydra, has been added (as you have probably seen
	on the net).  I haven't had much chance to test out this feature of
	the game.  Mirrors have also been added, and seem to work quite well.

	- Changes have been made to the object ocurrence chances in objects.h,
	so that the relatively rare tools, etc. have at least a 1% chance of
	showing up.

	- Throwing and zapping code has been modified so that there is a
	chance that said can be done through a doorway.  Bolts can still
	bounce however...

	- The infamous and dreaded makemon() bug has been eliminated.  In
	addition to this, "r"ats and "K"obolds have been added back into the
	game.  "K"ops no longer leave treasure (just what they were carrying,
	plus maybe a club or whistle).

	- Two new "super"swords have been added.  They are the katana named
	"Snickersnee" which is +5 on damage (due to sharpness), and the long
	sword "Excalibur" which is +rnd(10) to hit, +5 on damage, and has a
	couple of other features I won't go into right now.  The only way
	for a character to get "Excalibur" is as a gift from someone.  You
	cannot write the word "Excalibur" on things for some reason...

	- There have been two additions to disallow infinite wand charges.
	First of all, wands with less than zero charges will automatically
	turn to dust (thanks to Kevin Sweet).  Next, a wand of cancellation
	will set the number of charges in the wand to -1, which will make it
	forever useless, (thanks to Ron Wessels).

  5)	Minor game changes:

	- The fountain code has been tightened slightly so you can no longer
	dip objects into a fountain or drink from one while you are floating
	in mid-air due to levitation.

	- Teleporting to hell via a teleportation trap will no longer occur
	if the character does not have fire resistance.  I found this just
	too arbitrary a way to die (and so did several other people who com-
	plained about it).

	- A new trap, the "polymorph" trap has been added by Richard Hughey.
	It's inclusion is dependant on having "KAA" defined.

	- In wizard mode, the wizard player has infinite wishes, and the
	ability to instantly identify everything (s)he is carrying. The wizard
	player is also no longer limited by the standard multiple / bonus res-
	trictions on objects wished for.

	- Random number generation has been changed around to make it (I hope)
	more unpredictable.

	- A large number of typos have been fixed, and all of the British
	spellings converted to American.  I would like to see a shell script
	to allow conversion back (or something like that) in the future.

	- I have done a "make depend" for the makefiles to reflect a slight
	restructuring in the order of inclusion of header files.

  6)	Future additions:

	- Steve Creps is working on "barracks" and "soldier" code which is
	now ready for addition.  I have added the "soldier" side into the
	game, but haven't really tested it.  Steve will be adding the
	"barracks" section in and sending me the resulting patches.  There
	will be a minor (read patch) release as soon as he can get the code
	integrated into this release and sent up here to me.

	- There are also several other new room projects in the works which
	should be able to be included in that minor release, along with any
	bug reports that are made in the interim.



		NetHack Fixes List	Revision 2.3e

	New Files:

Fixes.2.3	This file.

Makefile.3B2	A new Makefile for the ATT 3B2.

Spoilers.mm	As above - pre nroff -mm

food.tbl	Tables for above manual
fount.tbl
monster.tbl
weapon.tbl

nansi.doc	Documentation for nansi.sys.

hh		Fixed improper def of "X" for casting spells.

fight.c		Dogname fix for "you hit your dog" line.  (Janet Walz)

pri.c		Patch for "SCORE_ON_BOTL".  (Gary Erickson)
config.h

pray.c		Null refrence bug fix for Suns. (The Unknown Hacker)

termcap.c	null pointer bug fix. (Michael Grenier)

mon.c		chameleon shape made dependent on current lev. (RPH)
spell.c
monmove.c

rnd.c		fixed SYSV/BSD problems with random(). (many sources)
config.h

shk.c		fix to allow compilation with or without HARD option.
		(reported by The Unknown Hacker)

termcap.c	ospeed fix for SYSV. (reported by Eric Rapin)

unixunix.c	fix for NFS sharing of playground. (Paul Meyer)

options.c	many misc. bugs while compiling for the PC. (Tom Almy)
pcmain.c
pctty.c
hack.h
nethack.cnf
pager.c
fight.c

mkroom.h	Addition of reorganized special-room code.
mkshop.c	(Eric S. Raymond)
mklev.c
rnd.c

trap.c		Fixed teleport to hell problems caused by rnz().
		(reported by Janet Walz)

termcap.c	Various fixes to MSDOSCOLOR code. (Tom Almy)
end.c

hack.c		Fixed typos. (Steve Creps)
msdos.c
pcmain.c

config.h	Enabled the use of termcap file c:\etc\termcap or
termcap.c	.\termcap.cnf for MS Dos (Steve Creps)

eat.c		Continued implementation of Soldier code.
makedefs.c	Added Barracks code. (Steve Creps)
makemon.c
mklev.c
mkroom.h
objects.h
mkshop.c
mon.c
monst.c
permonst.h

makedefs.c	Added Landmines code. (Steve Creps)
mklev.c
trap.c

mkroom.h	Fixed item / shop probablility code. (Stefan Wrammerfors)
shknam.c	Added additional item typ available.

pray.c		Randomized time between prayers. (Stefan Wrammerfors)

fight.c		Fixed typo. (Stefan Wrammerfors)

mhitu.c		Fixed monster special abilities usage bug.
		(Stefan Wrammerfors)

objnam.c	Randomized max number and max bonus limits on objects
		wished for.
		Identified cursed items shown as such. (Stefan Wrammerfors)

topten.c	Added logfile to allow overall game tuning for balance.
config.h	(Stefan Wrammerfors)

mklev.c		moved code identifying medusa & wizard levs to eliminate
*main.c		garbage on screen. (Izchak Miller)

u_init.c	fixed up luck wraparound bug (Izchak Miller)
hack.c
dothrow.c
fight.c
mon.c
play.c
save.c
sit.c

mon.c		fixed null referenced pointer bug. (The Unknown Hacker)

config.h	Hawaiian shirt code by Steve Linhart
decl.c
do_wear.c
extern.h
invent.c
mhitu.c
obj.h
objects.h
objnam.c
polyself.c
read.c
steal.c
u_init.c
worn.c

config.h	"THEOLOGY" code addition (The Unknown Hacker)
pray.c

mklev.c		Added typecasts to fix object generation bug on Microport
fountain.c	Sys V/AT. (Jerry Lahti)

Makefile.unix	Added ${CFLAGS} to makedefs build line. (Jerry Lahti)
Makefile.att
Makefile.3B2

pager.c		Inventory fix for "things that are here". (Steve Creps)

cmd.c		More wizard debugging tools:
			^F = level map
			^E = find doors & traps		(Steve Creps)

apply.c		Blindfolded set/unset to "INTRINSIC" (many sources)

lev.c		new restmonchn() code. (Tom May)
save.c

o_init.c	OS independance in init_objects (Tom May)
objclass.h	(removal of oc_descr_i)

shk.c		declaration of typename() (Tom May)

apply.c		declaration of lmonnam() (Tom May)

mklev.c		fixes to make medusa and wizard levels dependent on MAXLEVEL
		(Richard Hughey as pointed out to him by John Sin)

fountain.c	added "coins in fountain" code. (Chris Woodbury)

objects.h	bound gem color to type (Janet Walz)
o_init.c

spell.c		spell list now displayed in the corner (Bruce Mewborne)

apply.c		multiple dragon types. (Bruce Mewborne)
cmd.c		wand of lightning.
do.c		ring of shock resistance.
do_name.c	giant eel replaced by electric eel.
end.c		"STOOGES" - three stooges code.
engrave.c	Named dagger/short sword "Sting".
fight.c		Lamps & Magic Lamps.
makemon.c	A Badge - identifies you as a Kop.
config.h	^X option for wizard mode - gives current abilities.
mhitu.c		New monster djinni '&' for Magic lamps.
mklev.c		#rub command for lamps.
mkobj.c		New monster: Gremlin 'G' augments Gnome on lower levels.
mon.c		major modifications to buzz() code cleans it up.
monmove.c
monst.c		objnam.c	polyself.c	potion.c
pri.c		rip.c		shk.c		sit.c
u_init.c	wizard.c	zap.c		makedefs.c
monst.h		obj.h		objects.h	permonst.h
you.h		*main.c		*unix.c

rnd.c		fixed portability bug for 16 bit machines (Paul Eggert)

mhitu.c		fixed many lint flagged bugs (Izchak Miller)
apply.c
fight.c		mklev.c		mkmaze.c	mkshop.c
monmove.c	shknam.c	trap.c		wizard.c
zap.c		shk.c		do_name.c	invent.c
unixtty.c	pctty.c		unixmain.c	pcmain.c
do.c		options.c	termcap.c	makemon.c
spell.c

termcap.c	major rewrite *** NOTE: Untested by MRS *** (Kevin Sweet)

do_name.c	reversed quantity check for "n blessed +xx items"
		(Roland McGrath)

config.h	Added Kitchen Sink code (Janet Walz)
rm.h
decl.c		do.c		hack.c		invent.c
makedefs.c	mklev.c		options.c	pager.c
prisym.c	wizard.c	zap.c

end.c		Fixed "killed by" bugs in endgame code. (Steve Creps)

objects.h	Changed weight of a leash to a reasonable value. (Janet Walz)





$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.5 $ $NHDT-Date: 1524689548 2018/04/25 20:52:28 $

[This is a partial list supplied by Ken Arromdee long after the fact]

General Fixes and Modified Features
-----------------------------------
dropping a weapon, then picking it up while blind causes it to become 
	unidentified but it remains that way after your vision returns
when blind and feeling the floor, the objects then on the floor should
	have their characteristics become unknown
zapping a wand of probing at yourself works, however using a stethoscope
	on yourself does not
trolls that come back to life don't retain their names
if you look at what is on the ground and there is more than a screenful,
	quantities are not printed (i.e. "food rations")
if pickup was off and you moved onto a spot with both engraving and objects,
	you got told what the engraving was twice
if a Keystone Kop threw a pie and the pie hit a shopkeeper, the shopkeeper
	became angry
"two handed sword" is spelled with and without a hyphen in various places
trying to descend stairs while levitating gives a message where "You're"
	is misspelled as "Your"
the 'V' command gives a history that is not quite correct; it wasn't 
	Ken Arromdee that merged PC Hack and Unix Hack; rather, PC Hack 
	was derived from Unix Hack by Don Kneller.  It was (I think) 
	Mike Stephenson who merged the many Hack versions.
the uranium wand gets described as "an" uranium wand
potions which have been both called and identified have the called instead
	of the identified name printed out
status line at the bottom of the screen is formatted strangely for the
	first 10 moves; after 10 moves it becomes normal
if you polymorph yourself into a rockmole, you are unable to dig through
	rock
a stethoscope or wand of probing, used on a monster, printed out a format
	with spaces in it (such as %-3d instead of %d) causing such messages
	to be longer than necessary
the number printed out for damage by stethoscope or wand of probing is 
	completely incorrect
sometimes your dog would turn into a bat (retaining the same name and 
	tameness) when saving and restoring,going down and back up
	and in bones levels
ghosts on bones levels are replaced by little dogs
if you are polymorphed and drink a potion of healing which raises your
	maximum monster hit points, your current hit points only are raised, so
	you may have (for instance) 37 out of 36 hit points
when you pick up something from a shop, the message is something like
	"For you, kind sir, only 5 for this <garbage>" on systems where
	pointer is not the same size as integer
removing a leash from a dog produces garbage, and also can sometimes
	crash the game
when the Wizard is mentioned, you get garbage
if you tame a wild dog, and then try to hit it, the safe-attack routine
	says "You stop to avoid hitting .", or sometimes garbage
when you are invisible but can see invisible, drinking at a fountain which
	dries up causes your symbol to be erased from the screen.
pushing an enormous rock onto a teleport trap deletes it instead of 
	teleporting it
sometimes returning to human form from a polymorph would leave you with 
	only 1 current hit point left
sometimes polymorphing would leave you with an 18/** strength
if you used a stethoscope on a wall and a creature moved into the revealed
	door before you did, when creature moved off, the door was replaced
	by a wall symbol again, until you walked through it
playing a game with fountain symbols set to one character, and restoring it
	using a configuration file having them set to a different character,
	leaves the fountain symbols as the old character
problem with food poisoning and blindness where you could end up permanently 
	blind, not even reversible by healing etc.
you could not wish for a C-ration or K-ration due to lowercase conversion
zapping a wand of death at yourself, and the death touch of a demon
	prince, killed you even if you were polymorphed into an undead,
	but bouncing death rays didn't
if you threw an object in a shop, it landed on the floor still unpaid
	zapping a wand of cancellation at yourself turned all your objects to
	-1 instead of +0; -1 was only needed for wands (since cancelling wands 
	to +0 allowed a sneaky way of getting infinite wishes)
#remove command is incorrectly described as removing a cursed
	object, but it actually removes only iron balls
at least some messages given for special abilities when you are polymorphed
	printed out the monster type even if you were blind
wishing for a scroll of mail, with MAIL undefined, is permitted but
	reading the scroll gave an "impossible" error message; change it to
	read: "This seems to be junk mail directed to the finder of the Eye 
	of Larn."
if you were blind, effects of scrolls, et al, still said things such as
	"Your mace glows green for a moment," "Your left ring glows white"
the message "The xan pricks your ___ leg" still mentions the type of
	monster (xan) when you are blind
polymorphing could change your gender, but when the game ended you were 
	still described as a "Cave-man" or "Priest" instead of 
	"Cave-woman" or "Priestess"
if you got rocks by using a pick-axe on an enormous rock, the rocks 
	started out blessed
if you escaped from a shop by throwing your iron ball to the exit, the ball
	would stay unpaid
any object thrown in a shop stayed unpaid, and you had to
	pick the object up again and then drop it for it to become paid
if you were invisible but could see invisible, when you drank from a fountain
	that dried up, your symbol got erased from the screen
several times colors were mentioned (i.e. black glows when you pray too much)
	but the colors weren't always changed for hallucination
if punished and your chain and 1 other object is on the floor, you
	get asked if you want to pick up a specific type of object, 
	and the chain is given as one of the possible objects
if you polymorph into a "new man", your energy points never change
trolls, when killed, can leave bodies or objects, but they should
	always leave bodies so they can regenerate back to life, 
	whether or not they left objects
demon prince demanding bribe gets randomly relocated instead of being placed 
	next to you
if you polymorph another tool into a magic marker, the marker always starts
	out dried out
hallucination has the problem that if you do something which takes no time,
	the monsters still change
if you tried drinking at a fountain while levitating, you got asked if you 
	wanted to drink, and then you weren't allowed to do it, and 
	the fountain could still dry up
if you were fire resistant and a magic trap produced a tower of flame, you 
	also get a second message (a shiver...)
when restoring a game, if there was an error, your saved game still vanishd
	for some errors
pets were always referred to as "him" in the leash code
stethoscope in the up or down direction while swallowed referred to "floor" 
	and "ceiling" instead of to the monster that swallowed you
if you could not save a game, the screen cleared and you were told to 
	"Continue or Quit", but if you typed C, the game thought you just 
	gave it a Call command
you could get told "that spellbook was a mimic" even if mimic was on a wall
if you were turning to stone and you polymorphed yourself into a 'c', you 
	still died from the stoning
if you interrupted the program before it finished loading a saved game,
	you were asked if you want your possessions identified
"ctmp" was mistakenly used in MHITU.C when being hit by a rust monster
	rusting your helmet but it should have been "!mtmp->mcan"


Platform- and/or Interface-Specific Fixes
-----------------------------------------
PC: often the same character class, and same player name, will end up
	getting 2 scores on the high score list
PC: if your name contained a period and you were playing on a PC, you would
	 have problems saving games since your save-file name still contained
	 2 periods and would thus be illegal; change periods to underscores 
	when figuring out what the save file should be called
PC: if you polymorphed into a "new man", and changed your name, when you saved
	your game the game was still saved under a filename derived from your
	old name, and to restore that game you had to specify your old name

General New Features
--------------------
when polymorphed into a giant you are now able to pick up and
	throw rocks by giving infinite carrying capacity
give the Healer a pair of gloves (the most logical piece of armor
	for a physician to start out with)
give the Healer a lot of money to start with (doctors are supposedly
	rich, you see)
have the Healer start out with the healing, cure blindness spells 
	already known
create a "trial mode", similar to Wizard Mode where you get a wand of wishing
	with charges and you can't get on the high score list
if you are standing on a trapdoor and you type a '>' symbol,
	print "You jump down the hole." and go down to the next level





As things have mostly settled down to rediscoveries of fixed bugs, 
it is time to distribute the first batch of patches and ports.


NOTICE:  The diffs comprising this update batch were cut on NetHack 3.0
         release version.  If you modified any of your files, store them
         and replace with release version files before applying this kit.


Changes made:

Eric Smith provided a port to the Atari using gcc; the older Lattice C 
vestiges moved to different preprocessor options and remain untested.

Ralf Brown adapted NetHack to the Andrew File System.

The fruit naming code was enclosed in a new option, TUTTI_FRUTTI, which 
allows another 3K of object code to be defined out.

Various tweaks, rewritings, and reshufflings to get the code to get along
with various compilers and preprocessors, including Microport SysV/AT 2.4,
Gould UTX/32, HP-UX, and of course Turbo C.

Various suggested changes in behavior, none major.

Distribution of termcap.uu, the uuencoded termcap.arc for PCs that was
previously distributed with NetHack 2.2 and 2.3.

Explicit instructions to short-circuit common installation mistakes.


Bug fixes:

Various segmentation faults no longer exist, including the popular dropping
items in shops.

Vortices can no longer disappear through solid walls when they disgorge you
over a moat.

You now get credit for food when engulfing monsters.

A few more spelling errors that fell through the cracks.


Suggestion for overflowing compiler tables:  follow the SysV-AT trail in the
src Makefile with -DDUMB and DUMB.Setup.  It appears that many SVR2 3Bs will
need to do this.





--------------
UPDATE2
--------------
This patch kit upgrades NetHack to version 3.0f.  The kit should
be applied to the original release, patched with patchlevel 1.

Many of the diffs included here are bugfixes to bugs reported to 
us by players.  We are very grateful for these reports.
  
There were questions about our netnews usage.  We use the good
offices of comp.sources.games because, unlike rec.games.hack, it 
is archived.  It is the only way to secure the availability of 
the source code and the official patches for future users.  For 
this reason, comp.sources.games will remain the only place where 
the official NetHack patches are posted.

Occasionally we may see a need to post a semi-official stopgap patch 
such as the one for the 'killer' bug posted just after Patch 1 in
rec.games.hack and in comp.sources.games.bugs.  These stopgap patches
will always be included in the next official patch kit.  The 'killer'
bugfix is, indeed, included here.

The above two newsgroups often contain many bug reports and unofficial
fixes.  We read these groups, and thus we get the reports.  But it
will be helpful if you mailed nethack-bugs a copy of your posting.
If your site gets these newsgroups, you may want to check them for 
mentions of bugs before reporting the same bug to nethack-bugs (or
to the same newsgroups, for that matter -- unless you have additional 
information).



Now, on to the main changes.

Objects were rearranged slightly, so the cautious may want to throw 
out saved games and bones files.

Timo Hakulinen provided an OS/2 port.

Various people convinced various OS versions to be better about 
sensing the available screen size at start-up.

The game tries now to be smarter about guessing defaults for players 
who don't set environment variables of interest to NetHack.

Eric Raymond extended the PC color code slightly to allow its use by 
SVR3.2 machines with color information from terminfo, and also allowed 
many extended commands to be available via a meta key under SYSV.

Paul Gyugyi provided a better makefile for MicroSoft C.

The MSDOS terminal problems, including always needing TERMLIB, are
(hopefully) fixed.

The '/' command now allows multiple identifications, and more things 
may be usefully identified.

More code was shuffled and rewritten to satisfy compiler and preprocessor
constraints.

Starving dogs again eat people food.

Credit cards can no longer lock things.

Doors have been toned down slightly, but are in no danger of being removed.

The gods' ranking of player troubles was revised.

Wizards can no longer start with certain useless items.

Various code, including game ending, seduction, and monster attack, is
considerably cleaner.

Above all: scores of bugs were fixed.


Please continue testing the game and reporting to nethack-bugs.  Your
response has been wonderful, and it has made this effort worth while.





[ Releases notes for nethack 3.0 patchlevel 3. ]

The main changes included in patch kit 3 are as follows:

A few new objects were added to objects.c, so old save/bones files 
should be thrown out.

Prototypes were adapted to satisfy ANSI C.  Hopefully, we will not see
anymore postings which helpfully fix prototypes for ANSI, while breaking
them for the MSDOS compilers they were, originally, set up for.

Use of $(MAKE), and a better use of $PAGER, in scripts.

Improvements to OS/2 and TOS code, including their Makefiles.

Graphics setting was centralized.

Alignment was added to artifacts, and their suitability was improved.

Discover mode games no longer use up bones files.

Some excess 'register's that were giving Xenix trouble were removed.

We settled an (amusing) argument over "rights" to available bits which
was responsible (unintentionally) for ring-wielding bestowing
long-lasting intrinsic attributes.  

In addition, many bugs were fixed.  Among those were the problems
with polymorphing creatures that swallowed you, finishing with
containers, having chains eaten, external pagers, statue weights, wishing
loopholes, parsing endgame options, and monsters growing up.

In other words, this is a nuts and bolts patch, nothing dramatic but
lots of cleanup.




-------------
UPDATE4
-------------
NOTICE:  The changes which were made in the code make all save and bones 
files absolete.  Once Patch 4 is applied, all the old save and bones files
must be thrown out.


Here is a list of the main changes:

Object and monster types got a new field specifying their color, so things 
can now appear in "living color" instead having one color for all monsters,
one for all weapons, and so on.

References to monsters and objects on the floor were moved to new structures,
which support the better color handling as well as provide yet faster access.

David Gentzel provided a port for VMS.  Although extensively tested by
David and others, and found to be sound, it probably needs further
refinements.  We are appealing to those of you who know VMS (none of us
does..) to join David in his efforts to refine the VMS code.

Much of the *main.c code was moved to a new file, to avoid having to update
that common code in three different *main.c files.

VARARG handling was ifdef'd to satisfy ANSI compilers.

Almost all grey creatures now join the other gray creatures.

Monsters will no longer be created in the same room as the player, and should
no longer want to end up in the SE corner of the dungeon.

Lycanthropy is now considered a "major problem" (allowing for appeal to the
gods through prayer), some artifacts are associated with particular character
classes, various oddities involving statues, digging, iron balls, and 
throwing have been removed, and many other bugs, both major and minor, were
fixed.




Old bones and save files should at least be syntactically correct this time,
but you should still throw them out if you don't want to be confronted with
monsters permanently masquerading as different monsters (since some of the
monsters' letters have changed).


Note that the posted shop fix was a stopgap patch, not an official patch, so
it should be reversed before applying these patches.  If you do not reverse 
it, probably nothing worse than a failure of one shk.c band will happen this
time.  In general, however, you will have to do considerable hand-patching if
you leave intermediate patches in.


The major bug fix in Patch 5 is moving the color definitions to color.h, thus
breaking the annoying dependency loop when bootstrapping NetHack.

Patch 5 contains Johnny Lee's provision of a port to the Macintosh.  The 
Macintosh files live in a new subdirectory, 'mac'.  We know that many of you
were waiting for a Mac port, and for you we are happy to have it.

Basic support for several new other compilers or machines (see README), but 
these probably need some more tweaking.

A major new feature in Patch 5 is timed-out eating, i.e., being able to be
interrupted while eating by monsters attack.  Mike Stephenson provided the 
basic structure for dealing with partially eaten food.  We believe that the
only remaining flaws in this code are occasional non-optimal messages which
are generated by it (we are working on correcting this).

Incorrect iron ball behavior and bugs in the iron ball code were 
systematically corrected by Kevin Darcy who communicated with us about it
and mailed us his patches.  (Yes, Kevin, as you can see, it went in, and 
with only one minor change.)  

There were other, smaller, patches which were mailed to us and which were
implemented.  To repeat:  we are very happy to receive bug-fixing patches
and code-enhancement patches.  But please do as Kevin did, namely, tell us
about it in advance.

Difficulties with dropping objects in shops, burning to death in hell, 
wielding amulets, pets eating corpses were fixed.  So were scores of other
small but annoying bugs.

MICROPORT_BUG was added to cater to compilers that don't like large 
structures.




This patch contains two major improvements:

First, thanks to Ari Huttunen, different door states show up as different
(configurable) characters on the screen.

Second, doors can now be entered/exited diagonally both for player and
monster.

Third, a gaggle of people credited in the appropriate files developed an
overlay manager for MS-DOS and MSC such that all the options of NetHack can
be supported.  See Install.dos and ovlmgr.* for further details.

In more minor news:

You no longer have to pick up food to eat it, and you no longer necessarily
resume eating your interrupted meal.

You can no longer get properties from wielding a non-weapon.

There is a new option, CLIPPING, which allows playing on small screens or
windows.

The multiple demon types portion of HARD has been split off into the new
INFERNO option.

The Macintosh port has been further refined.

The / command now takes configurable characters into account when identifying
items.

Leprechauns and lichs and nymphs and nagas had their letters switched so that
the more formidable monsters get capital letters.  Several new low-level
monsters were added.

Drawbridge interactions are much smarter, thanks to Kevin Darcy.

And a large number of minor bug fixes and efficiency enhancements.




Sorry this one took so long.  We think just about every computer and network
we depend on has broken sometime in last few weeks.

Work on the PC overlay mechanism continues, with Kevin Smolkowski joining
Pierre Martineau, Stephen Spackman, and Norm Meluch.  Breaking each .c file
into separately-swapped pieces should help performance considerably.  More
changes to the overlay manager are brewing, and will be distributed in the
unfortunately required Patch 8.

The Amiga port was brought up to date and extended by Richard Addison,
Jochen Erwied, Mark Gooderum, Ken Lorber, Greg Olson, Mike Passaretti, and
Gregg Wonderly.

The Macintosh port was futher extended by Kevin Sitze, Andy Swanson, Jon
Watte, and Tom West, working with Johnny Lee.

Support for recent versions of HP-UX was added by Steve Creps.

We believe all major various platforms and compilers are working properly now.


In other news, '/' now distinguishes among monsters of a given class, named
objects (including artifacts) are handled better, an extended version command
gives compilation options, monster colors should show up better, more
occupations are being stopped appropriately, unconscious and non-animal
monsters are handled better, and the eating behavior and ending messages have
been overhauled again.

Various display nuisances have been fixed and the "worm segment", "nymph
freeinv", and combined nymph/succubus/polymorphing bugs are gone, along with
a large number of less notorious problems.  A few more fun loopholes no longer
exist.

In all, we think this is the stablest and most balanced version yet.




[ Release notes for nethack 3.0 patchlevel 8. ]

This patch is devoted to bugfixes and accommodations for more versions of
the newer ports.

The VMS port should now compile with both VAXC and GNUC and install more
easily under a variety of OS versions, thanks to Joshua Delahunty and Pat
Rankin.

A number of strange interactions in the Macintosh-specific code have been
cleaned up.

The MSDOS overlay manager was debugged, and the overlay assignments and macro
names straightened out, so the result should be both faster and more stable
than previous versions.  See the new file Install.ovl and various files in
the others directory for more information.

The Amiga port now specifies addressing modes for many external variables,
which should make its executable smaller and faster as well.


The biggest externally visible change separates DECgraphics and IBMgraphics
from the general graphics-setting code, and makes them selectable on the
command line.

Once again, existing saved games and bones files should be discarded (or the
update postponed until they are gone).

A number of reasonably simple bugs are no more, although some screen update
oddities are postponed to 3.1.  Among the dead are problems with shops on
bones levels, renaming artifacts, kicking non-objects, winning gem treatment,
level bounds checking and monster filling, mimic appearances, taking items
out of containers, monster interiors and inventories, and guard behavior.
Various other things were changed to be consistent with similar situations.





Patchlevel 9 is in fact an amendment patch to Patchlevel 8.  It
contains fixes to some deadly bugs discovered thus far in the Pl8
code.  

Among the bugs fixed are a 0 dereference bug in the Amiga code, a
bug in the tins code, a bug in the inventory weight code, a level
files bug in the Mac code, an ST display bug, a bug in the maze's
bones level, a bug with chest traps, a bug in the restoring code, a
vault guard bug, a PC collapsing dungeon bug, and other more minor
bugs. 




UPDATE10

Patch 10 to NetHack 3.0 adds no new features, and few optimizations.
It fixes many mostly rare bugs and extends support to a couple more
system variants.

The major change with this patch is that the MSDOS overlay manager is
now bright enough to split up one logical executable among several disk
files, thus simplifying distribution via floppies since each file can
be <360K.  Entering debugging mode for the Macintosh is simplified.
There are provisions for later versions of several compilers, although
not yet Turbo C++, as we have not gotten an executable with adequate
performance (see Install.ovl for gory details).

NetHack should now get along better with Irises, IBM RS/6000s, NeXTs,
and possibly even SCO UNIX.

Among the dead bugs are those involving artifact damage, VMS file
manipulation, crushed iron balls, elven equipment, orcs with 2^32-1
daggers, trolls with ridiculously high hitpoints, exploding bags of
holding on the ground, inappropriate messages, saved luck, unbounded
digging on special levels, and several distinct trap problems.




Makefile.utl vs. GNU make (*_lex.o needs explicit *_lex.c dependency)
defining MAKE in more makefiles (symptom is "sh: makedefs: not found")
finding test in makefiles (needs shell meta-char, >/dev/null or || exit 1)
splitter hunk sizes with SAS 6.x (wouldn't fit on floppy)

OpenWindows 2.x documentation (?)
',' and ';' in help files, including Guidebook
Guidebook date (nroff and pre-processed versions)
VMS options syntax (config file description omitted "OPTIONS=" requirement)

phase of moon for Mac and MSDOS ports -- revert to old, portable phase of
	moon code
polymorphing into bees (divide by zero core dump, reported as 
	floating point error on Sparcs)
monster throwing boulder into pool could free object twice
candle burn-out accessing free'd object while traversing list (Mac core dump)
inappropriate candle merging (lit with unlit)
several levelflags (fountains, etc.) not being handled on special levels
subrooms[] not initialized
coredump on messed DEFAULT_WIN_SYS
deleting lock.0 files on early quit
number_pad/mouse coexistence
jumping onto doors or boulders
tombstone gold neglected gold in containers, although score was correct
initial gold record neglected gold in containers
reeling monsters leaving ghosts (missing newsym)
display getobj prompt for non-REDO
packorder option parsing
inconsisent option parsing with IBM vs. IBMg, etc.
throwing Mjollnir at adjacent hard things causes panic/core dump
throwing at ghosts in walls left objects stuck in walls
throwing unpaid objects in shops (donated to player by shk)
Shopkeeper administration out of order (buying group of used up items)
pricing chains, uball, or other nocharge objects, when they couldn't be sold
knocking uball down a hole by dropping another object caused crash
kicking monsters while levitating (core dump if monster "reels" or killed)
kicking empty space while levitating could give free move (recoil)
panic when nurse is fixing your damage and disappears
core dump 'D'ropping everything with gold but no inventory (null pointer access)
core dump using getpos() "move to feature" response when map shows something
	covering furniture (displayed glyph leads to invalid subscript use)
deity gender reference in opening legacy message
makeplural() said "poisoned yas" instead of "poisoned ya"
zapping on entry to water left trails
allow level teleports to be cancelled
excess choking when eating corpses
funny death message (or coredump) when you choke on a tin of spinach
	after partially eating something else
Magicbane expulsion confused cutworm()
charging for several overlooked items (mainly magical instruments)
taming a sticking monster (e.g mimic) wouldn't set you free
panic when tinning while standing on stairs with a full pack and object drops
zapping down into ice with wand of digging (core dump)
rust monsters wouldn't ever hurt armor, even non-rustproof armor.  conversely,
	unrustable things rusted.
mysterious rust damage on damp levels (improper object chain traversal
	when any item landed in pool after being thrown or dropped)
very eroded nonrustable/corrodable/flammable objects displayed as "very +0..."
map window wasn't being initialized correctly, causing some 'a'filled screens
using magic marker with full pack leaves you with an item in the '#' slot
spellbook merging caused multiple books to fade away when you re-read
	them enough times
Master of Thieves in Tourist quest not created with Bell of Opening, making
	game virtually un-winnable
could wish for quest items
If an eel managed to drown you, it would say "Drowned by a drowning"
stop making bones from non-branch portal levels
reading blank scrolls exercised wisdom
inverted use of crystal ball "vision in unclear" feedback message
special room entry messages (shop welcome) given before level change map update
limbless blobs like gelatinous cubes could not pick up
The level compiler missed first level flag if more than one was specified.
The level compiler accumulated level flags when compiling multiple files.
make the 32-bit monster flags fields unsigned long rather than just long
mksobj() created gold a factor of 10 too light
indefinite articles in quest text
Alt-n didn't execute #name on some ports, made Alt-? do #?
correct tense and grammar of various messages
obsolete oracle about using mirror to locate Wizard & Medusa removed
Nurses would zap you with wands, et al, instead of healing you
Shopkeepers residence was sometimes wrong on bones level, esp. in the minetown
Some zaps, esp. by monsters, at the map edge could cause core dumps
panic relmon bug possible when #turn'ing multiple monsters at once
it wasn't possible to get underwater when polymorphed to a swimmer
total digestion wasn't working
lycanthropy could change sex
interrupting dosinkring() allowed free ring identification
killing some hostile humans (like Croesus and priests) lost telepathy, etc.

tty specific: long input lines and improved interrupt handling
X11: NetHack.ad: "*map*grey" should be "*map*gray"
X11: NetHack.ad: remove excess quotes
HPs and X (SYSV conflict caused by X11 headers)
Handle WM_DELETE_WINDOW protocol in X11 window-port.
X11 popups are now positioned so that the cursor is bottom center.
Both X11 fonts now have a pool symbol that coveres the whole rectangle.
X11_getlin will now allow empty strings to be returned.
X11: implement score in the status window.
X11: make displaying experience optional.
X11: position getline and yn popups center,bottom instead of center,center.
X11: autofocus mode made more reliable at program startup
X11: number of objects removed from containers could wrap negative
X11: allow translation tables
X11: initial window would "sweep" shut and reopen
micros: save and restore progress reports weren't appearing during save
	and restore (they would appear immediately afterwards)
	also error messages from dots aimed off right edge of screen
Atari: colors were not properly set in medium resolution
Atari: terminal size was set incorrectly after a ^Z
OS/2: HPFS support was incomplete



revived barbarians didn't gain levels from potions
pets wouldn't keep their armor or weapons (blessed figurine of Archon)
avoid "rot" v. "burn" damage for organics
identify +/- known rings/armor as "uncursed"
loop through identification as long as additional "charges" are available
successive disease attacks made you less sick, also make nurses cure sickness
NO_MAILREADER non-mail daemon message fix
make fortune cookies, pancakes yellow and lightning white
cavemen were red while cavewomen and all other characters were "domestic"
monsters might not change color when growing up
redisplay cancelled objects in case their color changed (potions, spellbooks)
ask if you want to play heard passtune
add: make ^T intrinsic teleports use magical energy
don't encase the Amulet (or invocation tools) inside cockatrice induced statues
fix eating taking 1 turn less than number necessary, cheating you of nutrition
fix inventory to avoid % in user-supplied names [pline(xprname())]
fix crash when #force destroys unpaid chest in shop
fix crash when movement reaches edge of screen on rogue level
fix crash when two items in a row vanish from magic bag
set bknown when Priests see item, fixing missing checks elsewhere
set alignment of priest's quest artifact to match priest's starting alignment
if the Mitre of Holiness gets stolen by the Wizard, reset int & wis stats
always unlock quest stairs whenever leader acknowledges quest completion
make mysterious force which locks quest stairs block objects as well as player
duplicate shopkeeper names were possible on town level
trying to rename shopkeepers left dangling pointers
credit balance can prevent Kop summoning when player leaves shop suddenly
suppress several shopkeeper messages (and buy|sell) is shk is asleep|paralyzed
using charged objects ((engrave) wands, horns of plenty, etc.) in shops was free
don't double bill for food eaten off shop floor (multi-turn to eat only)
fix to prevent unpaid objects differing only in price from merging (only in
	inventory; they're not "unpaid" any more when dropped, so might merge)
missing #ifdef SOUNDS in vault.c
inconsistent MFLOPPY/MICRO use of dotcnt for saving
add: wands of striking break potions
add: directional healing spells
add: pickup_types option, pickup -> autopickup
disclosure option takes optional string value; killed counts and genocide list
give better message when trying to set options which are compiled out
add: hungry pets make begging noises
centaurs and mariliths could wear inappropriate armor
remove Medusa's tail and give her wings
separate creatures that don't breathe from creatures that can breathe water
you can't choke if you don't breathe
Fort Knox eels were placed outside moat
jellies for Juiblex, not Jabberwocks
don't heal while praying, so that gods are more likely to heal you
fix fireballs burning fire resistant players
floating eyes could paralyze monsters indefinitely
fix monster sleep/wakeup induced my musical instruments
players hit by wands of sleep get chance to wake up when attacked by monster
iron balls keep their "very heavy" weight
fix vorpal blade/long worm misses
allow monsters to kill players with vorpal blade and tsurugi
fix objects falling through trapdoors; "shipping destination"'s overloaded use
	of obj coordinates could cause bogus screen update attempt (y >= ROWNO)
prevent bad argument to rnl() from prayer_done() when praying in gehennom
display message when boulder is pushed into pit
avoid monsters deciding displaced or invisible characters were off the screen
kicking embedded objects loose would break fobj chain (-> freeobj() panic)
when using the cursor to look at remote objects, if the target object is
	embedded in something, mention that fact
dropping gold inside a monster -> freeobj() panic
gold picked up by pets wasn't in mgold and thus didn't show up on probing
fix "stop *opening* the lock" even when you were locking it
succubus stealing ring of adornment caused crash if she already had one
monsters created by monster reading create monster didn't appear for scroll ID
monsters explicitly casting spells of sleep or cold had messages reversed
elf character could get impossible("snow boots not found?") stepping onto ice
accept gray/grey except for spellbooks
keep monsters from teleporting on no-teleport levels
don't allow digging of trapdoors on the three wizard levels
don't allow digging down (including drum of earthquake) to destroy portals
fix digging down from within walls and solid rock; monsters could enter
	the resulting trapdoor/pit, but players couldn't
fix digging down while flying; don't fall through
destroy any engraving if a hole is dug down thru it, or ice it's in gets melted
change many hardcoded "floor"s and a few "ground"s to use actual surface type
fix blessed unicorn horn's restore ability feature (strength gain when weak)
underwater: prevent turbulence from placing character inside solid wall
underwater: suppress "you inhale water" message when removing amulet of
	magical breathing if you're polymorphed into a swimmer or nonbreather
when using the 'A' command to take off armor from underneath other armor,
	account for time needed to take off and put back on outer garment(s)
don't create doors over pits and trap doors when using a wand of locking
fix mapping when you drop objects while following the guard out of a vault

X11: some status didn't show up after restore
UNIX: fix potential security hole accessing file through NETHACKOPTIONS setuid
VMS: disable installed privileges when assigning i/o channel to terminal,
	opening termcap, or accessing user-specified config file
Amiga: invalid showscore and numberpad options inserted by frontend



[ 'Fixes' file for nethack 3.1.3. ]

avoid divide by zero crash for eggs produced from horn of plenty
prevent monsters from eating the invocation tools or Rider corpses
make artifacts much less likely to be destroyed
fix freezing lava in front a raised drawbridge
fix digging pits in front of raised drawbridge; improve digging next to pools
since random teleports have no --More-- prompt, have them purge REDO data
	to avoid repeating previous command before noticing changed context
make magic portals function for monsters
make numerous priest blessings increasingly rare, with an upper limit
fix missing quotation marks in quest speech
prevent monsters like killer bees from opening tins
add: keep track of # player deaths, save game start time in struct u
don't used "uncursed" with gold in containers in ending inventory display

PC: Fix black/gray/white display problem

X11: set input text portion of the dialog box so it is the width of the box
X11: fix message window seperator redraw problem (thanks to Ivan D. Brawley)
VMS: avoid false "trickery" detection for bonesX#.##;1 levels
VMS: prevent display of really long broadcast messages from clobbering stack
VMS: prevent endless input loop upon remote terminal disconnect



protect the Amulet and invocation tools from being destroyed when a
	disintegrated monster's inventory gets deleted
prevent the Amulet and invocation tools from being buried, similar to box
	behavior (Book of the Dead would rot away as paper when buried)
don't let polymorphed players eat any of the invocation tools
pets are no longer highlighted when hallucinating
keep glass gems from shattering in chests
return errors from dgn_comp and lev_comp when called for
fix hallucinated fruit juice message
fix several monsters conveying inappropriate resistances
fix misspellings of "Assassins' Guild" and "Minion of Huhetotl"
set personal name flag for Pelias and Thoth Amon; clear it for Chromatic Dragon
don't say "Picking the lock..." when using a skeleton key
give feedback when applying key to current location but no boxes are present
can't manipulate floor locks (chests) while levitating
don't crash onto sink if permanently levitating due to eating a ring
avoid resuming interrupted lock operation on chest that's been polymorphed
wide-angle disintegration Beams O' Wrath disintegrate non-resistant
	shields and armor
don't access zapped wand after it's been destroyed by divine lightning bolt
separate graphics symbols for each trap, differently-colored traps
allow wishes for greased objects, correct wishes for "poisoned
	rustproof" objects
damage was calculated incorrectly when hitting with statues and boulders
allow digging to finish when digging statues embedded in undiggable walls
list identified invocation tools as "the item" instead of "a item"
ignore rknown for unerodable objects when determining if it's fully identified
flush output after eating mimic so '$' appears right away
update botl for spell power after ^T or #invoke of "energy boost" artifact
correct hunger check when casting spells
correct various messages
fix deliberately jumping into Stronghold trap doors
make random level changes while escaping with Amulet more equitable
when mysterious force randomly picks a location on the current level, send
	player into Wizard's tower if and only if already inside that tower
any level change from one tower level to another preserves occupancy state
mysterious force won't kick in when using portal to go up into Wizard's tower
avoid "bad cursor position" situation when mystery force or cursed gain
	level potion causes level change within the Wizard's tower
don't allow the Wizard to be resurrected on the Astral level
only list "likely" objects when prompting for what to #invoke
reset encumbrance and movement rate during successful prayer, in case it
	cures lycanthropy
prevent cursed weapon that slips when thrown by monster from embedding in stone
ki-rin is not humanoid
all elves can see invisible
gain intrinisics from eating amulets
lose divine protection by killing co-aligned priests or converting alignment
have quest leader check for absolute alignment as well as for piousness
fix tombstone message when dying from kicking door while levitating
bite, &c. attacks on displaced images said "swings wildly and misses"
calculate score before creating bones, otherwise gold in bags gets overlooked
Unique monsters no longer placed in bones files
for blessed genocide, don't report failure for other classes' quest monsters
could get both compressed and uncompressed explore mode save files
ZEROCOMP's bwrite ignored possibility of write failure
mimics imitating fruit caused "Bad fruit #0" on help commands
fix off by one bug in level teleport trap destination for monsters
if g.cube eats a non-empty container, engulf contents rather than devour them
allow wizard to use blessed genocide of '*' to wipe out all monsters on level
when digging a hole in ice, don't describe it as digging in the "floor"
	and unearth any objects buried there even when it refills with water
when digging in a pit trap which ends up filling with water instead of
	becoming trap door, remove the trap; likewise for overflowing fountains
can't dig pits under drawbridge portcullis; break bridge if hole would be made
can't dig while caught in a web
don't "swing your pick-axe through thin air" if target location is a web
mark webs as seen when "monster is caught in a web" message is given
whirly monsters pass through webs; some huge monsters tear them
Sting cuts through webs
have shk use plural if called for when referring to player's pick-axe(s)
fix price stated by shk when picking up container holding merged items
fix price stated by shk for #chat when standing on a container
don't adjust food price due to hunger when player is selling, only when buying
don't double bill shop corpses turned into tins
don't make mundane objects known when they're outside the shk's expertise
change to have shks possibly identify items sold for credit just like for cash
when player sells something to broke shk for credit, don't offer more for it
	in credit than will be charged for it if player buys the item back
when selling items in shop, don't try to adjust message/prompt based on COLNO
when dying in shop entrance, make sure inventory in bones data is placed all
	the way inside the shop, hence owned by the shk
make shk notice when shop door destroyed by wand or spell or digging downward
reset unpaid objects if shk poly'd into jumpy monster teleports out of shop
fix handling for shop objects kicked or thrown from one shop into another
	and for shop objects hit by cancellation beam
add potions of oil; lamps can be refilled with them
dipping rusty weapons in potions of oil removes rust
allowing drinking from surrounding water if you are underwater
fix non-merging potions of water due to water damage's incompatible dilution
fix mon-merging scrolls of blank paper due to SCR_SCARE_MONSTER's spe usage
fix D(ropping) subset of wielded darts,&c (worn mask got out of synch)
fix #adjust merging wielded darts,&c into non-wielded ones
allow #adjust when fixinv option disabled
fix getobj's '?' help displaying one item when fixinv option disabled
don't give characters with maxed out luck complete immunity to water damage
don't allow AC -17 or better to provide invulnerability to zap attacks
kicking cockatrices while barefooted will stone you
change to inhibit displacement from operating through solid walls
fix mblinded assignment for monsters hit by potion fumes
give runesword same damage adjustments as broadsword
extra verbosity for attacks caused by Stormbringer
allow ghosts to step on garlic
don't let vampires step on altars
don't let monsters jump into polymorph traps covered by boulders, unless
	they can carry such, pass through, or squeeze under
giants polymorphed into something else must drop any boulders being carried
giants in pits become untrapped if a boulder is pushed in
prevent traps from being generated on ladders
don't "detect trigger hidden in soil" for previously detected land mine
exploding and crashing doors wake up nearby monsters
factor rings of increase damage into kicking damage
handle omitted case for ball movement that would leave chain in odd position
returning to stairs on top row of map is valid (fixes rogue quest bug)
avoid giving "sad feeling" message for pet if lifesaving prevents its death
don't rot away Rider's corpse if something is standing on it at revival time
kill any engulfer (including poly'd player) trying to digest a Rider
give Riders non-zero nutritional value so tinning kit doesn't ignore them
save & restore u.usick_cause properly
an eating pet can continue & finish eating while you're off its level
fix object names: "a Dark One corpse", "statue of a Wizard of Yendor"
killer_format: poisoned "by Pestilence", not "by a Pestilence"; ditto Juiblex
killer prefix might be wrong after having been life-saved
fix to avoid "invisible invisible {Priest|Minion of Whoever}" on tombstone
fix bug with cold-resistant monsters attacking jellies (etc.)
fix possible panics when restoring while swallowed or held
when taming, make holder/swallower let go even if it just becomes peaceful
reset area of visibility when hurtling backwards from recoil while levitating
don't let hostile monsters who follow up/down stairs share final ascension
add bodypart(HAIR) to correct some inappropriate messages
display monsters inventory (if any) when mon zapped with wand of probing
display inventory of encased items in statues zapped with wand of probing
display inventory of buried items below, by zapping wand of probing downwards
set dknown bit for all objects hit by probing beam
add ceiling function to alter the ceiling messages appropriately
fix 3.1.2's fix for reseting certain class-specific artifact properties
add selection menus to pickup and some apply functions
pre-menu container interface:  don't let "%a" select all objects if no food
	is present; make user's "<missing class(es)> a" become "A" instead
wake up monsters hit by potions thrown by other monsters
suppress vault hint messages if player is in the vault
make lev_comp check full object and monster names ([ring of] "protection" in
	objects[] was matching "protection from shape changers" in .des file)
guarantee that stairs down from Juiblex swamp level always get created
	[sometimes got impossible("couldn't place lregion type 0")]
prevent a three room level which has the stairs to the mines from also having
	a special room [so that those stairs can't end up placed in a shop]
allow quest nemeses and other invocation tool guardians to wield artifacts
Mitre of Holiness is not a weapon
don't give "heat and smoke are gone" message when entering Vlad's tower if
	arriving from somewhere other than Gehennom (portal via W's quest arti)
when a wielded cockatrice corpse rots away, set `unweapon' so that
	further combat will elicit "bashing with gloved hands" message
fix behaviour of wielded eggs (breaking, stoning, etc)
tiny chance for "queen bee" eggs, rather than always killer bee eggs
change Tourist quest home base to Ankh-Morpork
prevent activated statue traps from creating hidden monsters
handle activated statue being the only object poly'd player is hiding under
prevent reference to unseen underwater object when hiding monster attacks
don't pluralize name when smelling opened tin of unique monster's meat
make tins of unique monster's meat be empty in bones file
don't leave a corpse in bones file if killed by disintegration breath
don't leave a corpse when monsters disintegrate other monsters
any food could be tinned (yielding giant ant meat) when corpse in inventory
destroy all boulders in invocation area when creating stairs down to sanctum
boulders landing on previously seen trapdoors will plug them instead of
	falling through or settling on top
boulders on ice which gets melted will fill pool as if dropped
don't let dead or sleeping priests give temple greetings
chatting wakes up sleeping priests
don't exercise wisdom when making prediscovered objects known during init
don't generate any generic giants (mummy/zombie placeholder) on castle level
pets and g.cubes will polymorph if they eat chameleon corpses
slippery ice (temporary fumbling) only lasts until the next move
avoid leash limbo if quest leader ejects you while leashed pet's not adjacent
	(ditto other unconventional level changes, like W's quest artifact)
release attached leash if poly'd player eats it
crash fix:  handle other forms of monster-induced level change besides quest
	ejection (swallower expels onto portal, level teleporter, trap door)
fix magic mapping of previously mapped maze walls dug away out of view
assorted drawbridge fixes (kill credit, auto-pickup, drown survival handling)
passtune becomes fully known once successfully played
wiping out engravings leaves partial letters
wipe random letters of trap engravings ("ad aerarium", "Vlad was here")
eating wolfsbane while in werecritter form rehumanizes in addition to purifying
don't penalize player (shop charges in general; bad luck for mirror) when
	a monster breaks something with a wand of striking
when loading bones, keep track of unique monsters to avoid their duplication
don't allow a demon prince to summon two copies of a unique demon lord
enlightenment luck display ("extra", "reduced") did not agree with actual luck
avoid duplicate spellbooks in character's initial inventory (affects priest)
fix pets moving reluctantly onto cursed objects
can't #loot while overtaxed
time passes when items disappear on use of a cursed bag of holding
#offer cannot convert or destroy an unaligned altar
MUSEr's reflecting shield or amulet shouldn't become known when not seen
fix check for wearing shield when monsters wield two-handed weapons
don't restrict MUSE scimitar usage to strong monsters
make dwarves less eager to switch back and forth between weapon and pick-axe
clip swallow display at left & right map borders
prevent recoil [hurtle() while levitating] when caught in a trap
downward zap which freezes water or lava shouldn't bounce back up
Vorpal Blade: don't let damage penalty (very low strength, negatively charged
	ring of increase damage) prevent beheaded monster from dying
make sure player polymorphed into jabberwock is vulnerable to beheading
make sure that when "The fiery blade burns the shade!" that it actually does
	damage (double-damage for non-silver must do at least 1hp damage)
prevent divide by zero crash when hitting tame shade with non-silver weapon
don't lose alignment when throwing gems to/at peaceful unicorns
don't apply grease to worn armor if it's covered by other armor
fix unnaming monsters via `C <space(s)>'
fix calling object types via `#name n <anything w/ trailing space(s)>'
fix off by one problem when shuffling some descriptions (scroll label "KIRJE"
	and "thick" spellbook never used; breathing amulet always "octagonal")
exploding land mines can scatter or destroy objects at the trap location
add rolling boulder traps
try harder to make monster hit point and level gain avoid anomalous losses
reduce odds of undead corpses on castle level and priest quest home level,
	to make it harder to lure wraiths to more favorable spot
can't polymorph large piles of rocks into gems
hit point gain from nurse healing throttled substantially
make cursed bells be much less effective as instruments of abuse
fully implement object charges for Bell of Opening
allow '%' as destination on rogue level when specifying position by map feature
fire traps can burn up scrolls and spellbooks on the floor
fix inverted cancellation check for AD_SLOW and AD_DREN damage
bullwhips can be applied to disarm monsters and hero
bullwhips can be applied by hero to haul themself out of a pit
ensure that thrown potions hit their mark if you are swallowed
attempting to engrave on an altar causes altar_wrath
differentiate between a hole and a trapdoor, digging always makes a hole
check the right hit point values when polymorphed and encumbered
improve guard behaviour in vaults when player is blind
prevent dwarves from digging while wielding cursed weapons
displacing a pet mimic unhides it
'(' shows the proper tools as in use
improve shk's handling of pick-axe damage and taming
aging of items in ice boxes left in bones files
fix genocide of '@' while polymorphed
add gender to some unique monsters
disallow digging down while phasing through non-diggable walls
general fixes to various message sequencing problems
prevent shopkeeper names from showing up while you are hallucinating
prevent paralyzed pets from picking up items
jellies for Juiblex, not Jabberwocks (done properly this time)
rust monsters can't eat rustproofed objects
general fixes to inventory merging of items
monster inventory undergoes merging too; potentially affects probing and theft
monsters ignore items they want to pick up that are on 'Elbereth'
bows wielded by monsters now do proper (low) damage
even nymphs may not pick up rider corpses
treat cockatrice corpses in multiple item piles the same as one item piles
"PACKORDER" feedback incorrect on parsing failure
you can no longer choke on liquid
stethoscope on secret doors displays properly when blind
monster-hurled potions no longer produce quaff messages (or djinn)
giant eels now hide with mundetected, not invisibility
eels on the plane of water don't hide and aren't negatively impacted by being
	out of water
don't give the big point bonus for eels if player is wearing breathing amulet
fix display bug (newsym after Wait! message)
temple priests now wear their cloaks
Orcus is no longer peaceful (had been made so by bad bribery check)
'uskin' save and restore done properly
don't improperly adjust int & wis for stolen non-worn P quest artifact
don't allow Vorpal Blade to behead a monster when it swallowed you
golems are not living and don't "die" in messages
fix "Rocky solidifies.  Now it's Rocky!"
polymorphing into a flesh golem, which gets petrified by turning into a stone
	golem, now works when stoned
correct "killed by a died"
allow the Wizard to come back and harass at his next reincarnation time even
	if he's been left alive on some other level (fixes "paralysis" cheat)
make monsters subject to "mysterious force" in Gehnnom while climbing stairs
	with the Amulet, so that once the Wizard has stolen it, his retreat
	when wounded doesn't become an easy way to carry it up
changing attributes immediately checks encumber messages
confused monsters get confused SCR_TELEPORTATION effects
fixed "choked on eating too rich a meal"
kicked objects won't stop at stairs if they don't fall
general fixes to stealing from monster carrying cockatrice corpse
a nymph who polymorphs herself while you're frozen during a multi-turn armor
	theft can't complete the theft if transformed into non-stealer monster
consistent corpse probability no matter what killed monster (also removes a
	loophole allowing permanent rider death)
MUSE monsters no longer wield weapon same as (not better than) current one
incubi/succubi have hands, not claws
make #jump be ineffective on air and water levels
allow multiple sickness causes; vomiting only cures those involving food
#prayer reward: give books for not-yet-known spells preference to known ones
marker use no longer uses wishing interface, fixing several obscure bugs
archeologists' and rogues' initial sack starts out empty
candelabra "has now" 7 candles fixed.
kicked objects would set dknown when the kick caused an injury, even though
	safely kicked objects wouldn't
make cloaks subject to burning
make exposed shirts subject to burning and rotting; greased ones defend
	against wrap attacks
all types of fire damage affect worn armor [adds explosions, fire traps, and
	zapping yourself to previously handled zap/breath attacks by monsters]
for explosions, destroy carried objects before killing player [affects bones]
replace triggered land mine with pit before doing damage [bones]
black dragon breath no longer referred to as "death" instead of disintegration
don't make ring of gain strength known when gauntlets of power mask its effect
can't have "slippery minor currents" or similar silly nohands body parts
proper support for polymorphed players using wrap attacks
cannibalism reduces luck as well as causing aggravation
picking up an item which will merge works even when all 52 slots in use
moving through diagonal openings checks how much you're carrying, not how much
	free space you have left
monsters have same restrictions as players moving through diagonal openings
picking up subset of heavy group works for picking one and gets feedback right
taking subset of heavy merged group out of containers works the same as
	picking up subset of heavy merged group from floor
when putting gold into containers, don't count its weight twice, thereby
	messing up the status line's encumbrance feedback
fix the option parser's handling of attempting to negate string values
teleporting a monster on a trap with a magic whistle sets the trap off
iron ball dragging no longer confuses autopickup
cumulative temporary intrinsic increments can't spill over into permanent bits
eating food shouldn't give messages for intermediate states
don't make wand of death become known after casting finger of death at yourself
ignore case when checking artifacts against wish- or #name-specified name
ignore confusion when reading scrolls of mail
exploding runes for spellbook read failure doesn't imply that book explodes
divine rescue from strangling destroys worn amulet of strangulation
boulders pushed on level teleporters will level teleport; also, make one random
	level teleport function to keep all level teleports consistent

MSDOS: add fake mail daemon
MSDOS: add VGA tiles to tty port
VMS: switch to lint-free, non-GPL'd termcap support code
X11: map behind popup edges was occasionally not refreshed
X11: allow permanent inventory window
X11: when using tiles, highlight pets with "heart" overlay (should be changed
	to honor the `hilite_pet' run-time option)
X11: click-in-message-windows crash fixed
tty: fix panic when freeing endwin
tty: fix <ctrl/P> behavior when recalled text needs to wrap beyond top line
tty: allow selection from single line "help menu" (getobj's '?' response)
tty: don't format data.base with hardcoded tabs that are ugly on non-tty ports
tty: get rid of extra NHW_MENU space (improperly added when the menu was longer
	than the screen)
tty: fix repeated "who are you?" prompting at game startup



General Fixes and Modified Features
-----------------------------------
give invocation message when teleporting onto invocation position
flying players with water breathing may retrieve things from water
remove message inconsistently assuming players can be mindless
monsters wear best armor (not first armor) and may switch armors
god doesn't give "strayed" message when your god is angry but a different god
	is the one giving the message
divine wrath can hit engulfer if you are swallowed
plug minor topten and oracle memory leaks
monster throwing must allow for 0 damage (cream pies, non-silver vs. shades)
break drawbridge if wand of striking is zapped down at open bridge or either
	up or down at its portcullis
wand of striking zapped at ceiling might cause a rock to drop (like digging)
wand of striking hitting a secret door with expose and break it
zapping {teleportation,cancellation,make invisible,polymorph} down affects
	any existing engraving similarly to writing with such wands
monsters may use fire horns and frost horns
Guidebook.mn now formats backslashes correctly when using GNU groff tools
Add missing trident case to weapon type categorization.
Fix weapon proficiency handling for missiles.
accept "armour" spelling again for marker use (when writing was disconnected
	from wishing, this got lost)
restrict writing scrolls and books by description
give better feedback for some writing results
whirly/wall-passing monsters should not be immune to falling rocks
relearn spellbook even when spell already known (object amnesia fix)
objects that have been called something but not ID'd are subject to amnesia
ask what to call unknown spellbook which crumbles to dust when mis-read
bullwhip only tries to get you out of a pit when you're in a pit
humanoids, gnomes, and ogres now eat; fungi and jellies don't
centaurs, giants, and various others can respond to #chat
potion of paralysis doesn't inherit prior nomovemsg
#naming a nameable artifact when the object already had a name of the same
	length didn't create an artifact
applying unID'd potion of oil is possible even not carrying any other items
	eligible to be applied
make potion of oil become known after lighting it via apply
fix remaining inconsistency which allowed diluted water
don't let breaking a wand of digging on castle level produce holes, just pits
make Nazgul's sleep gas actually put victims temporarily to sleep
applying a carried, unlocked, trapped chest will set off the trap
explosion due to #untrap failure on trapped door destroys it
shouldn't hear curse/bless status of unseen scroll being read by monster
give some variation in the amount of time it takes a corpse to rot away
breakable objects hitting the ceiling or the hero's head will now break
undead turning now gives credit to player for destroyed monsters
undead turning now brings dead eggs back to hatchable status
code added to support hatching of all eggs in a merged group of eggs
fix display updating at egg's former location when floor egg hatches
fix learning of egg type for hatched eggs
statue traps created with monster inventory inside them
probing shows contents of everything with contents, not just statues
spells of healing and extra healing don't make target monster angry
use cornuthaum cancellation factor
can't kick underwater objects from land or vice versa
objects falling through holes/trapdoors to random destinations obey arrival
	restrictions imposed by special levels
being bare-handed counts as wrong projector when throwing projectiles
reduce the range that Mjollnir can be thrown
keep Medusa from continuing to move after she's been killed by reflection
	of her own gaze (fixes relmon panic)
medusa's reflected gaze won't affect it if it has amulet/shield of reflection
eating amulet of strangulation can choke when not satiated; also not gluttony
intelligent pets hold onto one pick-axe and one unicorn horn
keep exploding boulders from land mines from hitting you with "a rocks"
objects carried by migrating monsters have no location
more robust parsing of user-supplied option names; trailing characters matter
don't generate spellbooks inside statues of tiny monsters
treat Medusa level statues as petrified monsters (can't be stone-resistant,
	and have inventory)
Medusa doesn't gaze more than once per round
data.base: eliminate duplication of Orcrist/goblin king entry
handle luck conferring artifacts correctly (both inventory and enlightenment)
prevent arming land mines and bear traps in various inappropriate locations
prevent easy shop exit by having shopkeeper disarm and pick up trap objects
oilskin cloaks allow defender to slip away from grabbing attacker
make reading the cursed Book of the Dead riskier
enchanting stat-affecting armor now identifies it
fix crash caused by specifying "pickup_types" without a value in config file
	or NETHACKOPTIONS (avoid attempt to use menu prior to interface init)
kicking at empty lit corridor with lit_corridor enabled doesn't redraw as unlit
when starting out with an oil lamp, make pre-discovered potions of oil show up
	in the discoveries list so that their varying description is available
being crowned Hand of Elbereth enables minimal longsword proficiency even when
	Excalibur isn't bestowed
bare-handed and martial arts weapon skill rankings use names instead of numbers


Platform- and/or Interface-Specific Fixes
-----------------------------------------
tty: reduce alloc/free activity done for message history
tty: windowtype:unsupported_value pauses between listing allowed value(s)
	and proceding under default interface
X11: free allocated memory during pre-exit cleanup
X11: display help when DLB is enabled
X11: fix popup inventory window shown for 'i' response to "what type of
	object?" prompt with menustyle={T,C}
DLB: avoid excessive fseek calls (major performance hit for MSDOS)
MFLOPPY: wasn't safe to enter endgame!  traps, timers, and other level-
	specific data ended up being inherited from level 1
MSDOS: now can re-enter game after chdir'ing in shell from "!"
MSDOS: fix it so -H allows starting a healer game, rather than usage statement
MSDOS: display cursor during input prompts, not just when in the map
MSDOS: fix several cursor-related glitches when moving the display
MSDOS: prevent the use of F3,F4, and F5 before the map window is ready
MSDOS: make flags.BIOS and flags.rawio the default when VGA tiles are used
TERMINFO: colors were wrong for some systems, such as Linux
Amiga: count substitute tiles properly
MAC: avoid MW 68K struct copy optimization bug (in all developer releases up
	to and including DR9) by adjusting our structures so it doesn't
	occur
MAC: fix crash when trying to drag scrollbar
MAC: add UPP setup for UserItem FrameItem()
MAC: boost partitions to 2M minimum


General New Features
--------------------
#qualifications command eliminated; subsumed into #enhance
OEXTRA temporary compile-time option
menu support for group accelerators to choose objects by class
lev_comp supports specification of percentage chance for monsters and objects
wielding Sunsword provides protection from light-induced blindness
interactive setting of options via menu (Per Liboriussen, liborius@daimi.aau.dk)


Platform- and/or Interface-Specific New Features
------------------------------------------------
MSDOS: Add support for preloading all tiles in protected mode environments
MSDOS: Add support and initial tty Makefile for yet another compiler (Symantec)
BeOS: preliminary support for new BeBox platform; initially tty only




General Fixes and Modified Features
-----------------------------------
make `recover' work with the additional element of version info added in 3.2.1
floating eyes cannot escape down stairs and ladders
do not use body_part() inappropriately when snatching monster's weapon
fix feedback for a confused long worm attacking itself
avoid converting locked secret door into closed+locked normal door;
	doors should be flagged as either locked or closed but not both
kicking a locked secret door mustn't yield an open normal door
fixes for dipping weapons into potions of oil
fix crash triggered when knocking off worn blindfold by applying cursed towel
update screen display for vault guard picking up gold from fake corridor
Chromatic Dragon was missing appropriate resistances for orange (sleep) and
	yellow (acid + stoning) dragons
when triggering a chest trap, clear the trap flag immediately [bones fodder]
when a boulder gets pushed into a pit where a monster is trapped, immediately
	redisplay the monster after giving messages
rings of hunger dropped in sinks should have an effect even if player is blind
player #offering a cockatrice corpse must pass a touch check
hitting a rust monster with a pick-axe, iron ball, or chain will trigger rust
	damage to the weapon; ditto for rust traps when wielding such items
cosmetic martial arts and bare-handed changes to skill arrays in u_init.c
gain or lose weapon skill slots appropriately when polymorph into new person
fix crash occuring when self-hit by uncaught boomerang
when delivering a pline message during level change, don't display areas of
	the new level using line-of-sight data from the old one
heavy iron balls may be thrown multiple spaces (presumably they roll),
	restoring old ball behavior
get rid of "non-null minvent despite MM_NOINVENT" warning
prevent a negative damage adjustment from boosting a target monster's HP
give "bashing" message when first attacking something with unconventional
	wielded items besides just throwing weapons and non-weapon tools
when restoring, reset weapon so that "bashing" message can be given again
hole traps in bones data shouldn't be marked as unseen
when carrying 52 items, don't check shop goods for mergability with invent
	because it will give false matches, yielding non-gold in slot '#'
kicking a cockatrice corpse is now as dangerous as kicking a live cockatrice
fix set_apparxy() crash when the Wizard returns via migrating monster list
monster wearing armor is protected from disintegration breath like player
monster wearing amulet of life saving survives disintegration breath
greased helmets will block AD_DRIN attacks
get rid of ancient check for welded weapons, which arbitrarily named or didn't
	name the weapon for no particular reason.
levitation: sitting makes you tumble, kicking requires bracing
empty bag of tricks won't cause bag of holding to explode
prevent "force bolt" from hitting false match on *orc* data.base entry
prevent "{wand,scroll,spellbook} of light" from matching "* light" entry
non-confused genocide of player should not kill by "genocidal confusion"
re-word message for monster grasping already-wielded unicorn horn
fix various killer reasons
when pushing boulders, make sure current is always top object at its location
always clear unpaid items off shop bill when shk is teleported away, even
	if shk was already angry
don't let broken wand of digging create traps at locations which already
	have traps (prevent it from turning a hole into a pit)
don't give messages about unseen objects falling down holes
fix to prevent kicked objects which stop on holes/downstairs from becoming
	unattached from any object list
don't let flying creatures set off a rolling boulder trap
fix to prevent seeing into a room by kicking an undiscovered locked secret 
	door from outside
account for case of monster throwing gem at PC unicorn
schedule repair for shop door smashed by big monster
update status line for energy used when "you fail to cast the spell correctly"
polymorphed character will mimic gold after eating mimic corpse
fix relmon panic when bashing weak undead with wielded potion of holy water
holy and unholy water can trigger transformation in werecritters
call update_inventory() when discovering or undiscovering (call " ") an object
fix goto_level panic: if quest leader seals portal, delete portal trap from
	quest home level as well as from main dungeon's branch level [possible
	return to quest via 'W' quest artifact]
prefix quest leader and/or nemesis name with "the" when appropriate at
	run-time rather than using hard-coded text in quest.txt
fix endgame crash caused by string overflow when formatting priest|minion names
dokick.c compiles when WEAPON_SKILLS is disabled
burning objects go out when kicked
monsters with arms but not legs (salamander, marilith) can't kick
knights can't jump while poly'd into anything without legs
try harder to get names for corpses of unique monsters right
very high dexterity doesn't guarantee a hit for thrown potions and eggs
blinding ammo thrown from inside an engulfer can't blind it
monsters going through endgame portals arrive in same area as the player
	instead of ending up at the portal to the next level
treat most of the moat on fakewiz levels as outside the special central
	area, so that falling or wading into the water and auto-teleporting
	out of it can't strand the character inside the room
monsters created by animating a named figurine will inherit that name
prevent possible player-controlled creation of unique monsters via tossing
	statues of such onto statue trap locations
activating a statue trap with wand or pick-axe won't discard statue contents
cursed non-weapons can't slip when thrown, as it was in 3.1.x
don't reveal patron deity of high priests with the 'C' command's prompt
two flags structures now, flags and iflags, the latter not saved with the game
object name prefix buffer wasn't big enough for biggest possible case
negatively enchanted weapons thrown by monsters could do negative damage
prevent xorns from phazing through walls on astral level
live Wizard won't teleport to your level if he's carrying the Amulet
can't use 'C' to give the Wizard a name
fix charging for shop goods broken via striking/force bolt
prevent disintegration breath from destroying Famine and Pestilence
	and from triggering impossible("monster with zero hp?") for Death
prevent attached ball and/or chain from becoming part of iron golem formed
	during polypiling (ball & chain movement later accessed freed memory,
      which either crashed or got "remove_object: obj not on floor" panic)


Platform- and/or Interface-Specific Fixes
-----------------------------------------
Mac: update `mrecover'
Mac: handle `-@' character name suffix for explicitly requesting random role
msdos: suppress tiles on rogue level when restoring games that were saved there
tty: support group accelerators for PICK_ONE menus
tty: after <ctrl/P> at a yn() prompt, don't blindly accept the character
	used to get back to the prompt as the yn() result [could trigger
	impossible("invalid sell response")]
Unix+tty: guard against <curses.h> problems with delay_output,TRUE/FALSE macros
X11: fix group accelerators and support them for PICK_ONE menus
X11: implement tty-style counts for menu selections
X11: proper pop-up placement with old-style window managers (eg X11R6 twm)


General New Features
--------------------


Platform- and/or Interface-Specific New Features
------------------------------------------------




General Fixes and Modified Features
-----------------------------------
Y2K fix: use 4 digit year values for the dates in the score file
updated COPYRIGHT_BANNER_A to reflect year of release
prevent "late" pline calls from triggering a crash when the RIP window was
	displayed at end of game (observed when bones file rename failure
	under Win95 was reported to wizard mode users)
being punished on the Plane of Water doesn't trigger a panic when air bubbles
	try to move the ball&chain or you around
avoid rn2(0) divide by 0 for empty inventory when trying to crawl out of water
don't let randomly placed monsters on special levels prevent explicitly
	placed monsters who target that location from being created (a web
	trap's spider resulted in no quest nemesis)
don't let randomly placed stairs on special levels be covered by explicitly
	placed features such as fountains
pager: guard against '%' in output from being treated as a printf formatting
	directive (using '/' or ';' to look at food yields "% blah blah")
prayer result of ``escape from solid rock'' isn't inhibited by teleport
	restrictions (attempting to fix all troubles got stuck in a loop)
report "file empty?" rather than "version mismatch" when that's the reason
	why a data file fails its validation check
drum of earthquake can't destroy the high altars


Platform- and/or Interface-Specific Fixes
-----------------------------------------
micro (assorted): readmail()--don't show fake mail text when blind; also,
	update the "report bugs to" message to specify <nethack-bugs@nethack.org>
msdos: fix missing $(INCL) in dependency in djgpp Makefile
mac: Will only dispatch events if the window system is initialized



General Fixes and Modified Features
-----------------------------------
objects falling down a level don't cause everything at destination to scatter
randomize visible trap glyphs during hallucination
don't match statue entry when looking up statue trap [after trap detection]
do match statue entry when looking up "statue of a <foo>" when foo happens
	to precede statue in the database; likewise for figurines
initialize random number generator before processing user configuration file
	(random role selection always selected tourist)
support "character:X" and "role:X" in NETHACKOPTIONS as well as in config file
allow colon as an alternative to equals sign for `OPTIONS:whatever' and
	equals sign as an alternative to colon for `pickup_types=?!="$'
make rndexp (blessed gain level) be safe for 16 bit integer configurations
don't add player's weapon proficiency bonus for weapon attacks by monsters
create quest artifact crystal balls with 5 charges instead of 0
store ghost names in the same manner as other monster names (fix pet bug)
boost kobold shaman level to 2 (was 1, too low to ever cast a spell)
boost ogre king level to 9 (was 7, same as ogre lord)
throwing quest artifact to quest leader won't cause anger; also, artifact
	will be caught and thrown back instead of being explicitly ignored
boost level of fake players in endgame to match their rank titles
don't lose odd hit points (integer division truncation) when splitting HP
	for cloned monsters
update status line when cloning yourself halves your hit points
suppress clone's initial inventory for poly'd player just as for monsters
update the documention describing the O command
polyself: immediately update vision when reverting to human from eyeless form
use right pronoun when a mind flayer's attack is blocked by a monster's helmet
tins of lizard meat are never rotten, just like the corresponding corpses
tattered capes should not match ape entry in database
booze should not match ooze entry in database
lowered drawbridge should not match werecritter entry
lengthen option file line length to 4*BUFSZ
make zaps of death at polymorphed players work properly
change way invisibility works, add remembered invis monsters and 'F' command
don't list pick-axe and unicorn horn as likely candidates for charging
give more accurate message when nymph steals multi-turn armor from female char
fix splitting merged group of wielded weapons for menu mode version of #loot
if a buried container rots away, bury rather than destroy any contents
the 'W'ear command now only shows armor you can actually wear at this instant,
	instead of all armor you're not currently wearing
wishing for a genocided monster egg gets a dead egg, not a generic egg
"Unfortunately it is still genocided" printed only if monster is in range
	(particularly important for lifesaved monster genocided off-level).
message for monster growing into genocided monster only printed if in range
include number of attached candles when formatting candelabrum's name
support attaching already lit candles to candelabrum
range of candlelight varies with number of candles
dropping ring of hunger onto sink won't falsely claim that undestroyed objects
	like the Amulet have vanished
winged gargoyle can't wear body armor
self probing and stethoscope display speed with same detail as enlightenment
throwing attacks can trigger reprisals similar to hand-to-hand and zap attacks
'A' now works in dropping like when picking up
make setting bear traps and land mines be a multi-turn occupation
make lava be properly lit on special levels
add orig.female flag to handle E quest monster situation
clean up inconsistent quest text
in initial legacy message, use "goddess" when appropriate
allow FIRSTNEMESIS message to actually be printed
taking a peaceful monster's weapon with applied bullwhip will anger victim
applying an unpaid magic lamp will charge a low lighting fee instead of the
	djinni release fee
teleporting a Rider will usually bring it near you instead of sending it away
Riders can open locked doors without a key, just like the Wizard
Riders, angels, and elves won't avoid stepping on Elbereth/scare monster when
	deciding where to walk
Riders and angels will ignore the sanctuary effect of temples
mind flayers cannot suck out brains by hitting long worm tails
don't ignore object age when #offering a partially eaten corpse
inability to pick up is not as general as nolimbs (blobs may pick up with
	pseudopods and purple worms by swallowing)
wishing for a magic lamp produces an oil lamp, not a no-charges, possibly lit,
	magic lamp
blobs may not ooze under doors if their inventory can't be squeezed through
peaceful/tame monsters will not use bullwhips on the player
ghosts were not inheriting player gender in bones files
cannot wish for tins of untinnable (due to insubstantiality) monsters
flying monsters cannot fall down stairs
prevent divine retribution from destroying a wand which is being broken
fix resuming to read a spellbook which has become blank since the prior read
	attempt got interrupted
make recharging cancelled wands behave like recharging other cancelled objects
prevent "late" pline calls from triggering a crash when the RIP window was
	displayed at end of game (observed when bones file rename failure
	under Win95 was reported to wizard mode users)
cannot shatter soft weapons (whips, rubber hoses)
being punished on the Plane of Water doesn't trigger a panic when air bubbles
	try to move the ball&chain or you around
seen-invisible monsters are consistently visible but transparent, rather
	than looking like normal monsters
kicked object message for hitting another object no longer claims it "stops"
kicked object hits objects (plural) if quan>1 but there is nothing else there
kicking an object which is embedded in a closed door behaves like one in rock
can't kick object out of a known pit, but could when pit hadn't been seen yet
pets, shopkeepers, unique monsters, trolls, and Riders retain
	their characteristics when killed and brought back to life
being polymorphed into a black light makes you hallucination resistant
don't attempt to perform panic save if the game is already over
don't leave old game's timers, light sources, and shop data in place if
	aborted restore attempt reverts to starting new game [eventual panic]
Magicbane carried by mplayers has a lower enchantment than other artifacts
if pets take longer to untame than to starve, make them go wild anyway
split up erosion to allow both rust and acid (or fire and rot)
rust/fire/corrosion/rot now work in all cases (monster/monster, monster/you)
upon arrival to quest, mark return portal as seen
can't be blinded by light while asleep
can't put boulders or big statues into containers
engulfers which engulf a pile engulf 'several objects'
polyself: use right set of hit points for hunger and strength loss
polyself: likewise when checking for troubles during prayer
polyself: stop mimicking gold immediately if shape change occurs
polyself: change monster type when sex change occurs for succubus or incubus
Y2K fix: use 4 digit year values for the dates in the score file
when changing levels, update the screen to show the new level sooner
when changing levels, a monster might displace you from the stairs upon arrival
petrify polymorphed player who has protected hands but is using a non-hand
	attack on a cockatrice
fix bug where barehanded AT_WEAP by polymorphed player on cockatrice worked
prevent multiple purchases of clairvoyance at temple from overflowing the
	intrinsic's timed subfield and becoming permanent
when cursed, greased or oilskin cloak might fail to protect against grabbing
when any corpse wielded by a monster rots away, unwield it to avoid "bad
	monster weapon restore"
hallucination affects priest and minion names
don't try to make the word "aklys" singular
bullwhip can't yank welded weapon from target
eroded T-shirts now display the eroded shirt text consistently
fix "killed by kicking something weird" when kicking a fountain
disallow fruit names whose prefixes are valid for food (uncursed, numbers, etc.)
properly handle wishing for fruits which start with other prefixes
avoid rn2(0) divide by 0 for empty inventory when trying to crawl out of water
don't let randomly placed monsters on special levels prevent explicitly
	placed monsters who target that location from being created (a web
	trap's spider resulted in no quest nemesis)
don't let randomly placed stairs on special levels be covered by explicitly
	placed features such as fountains
substitute random monsters when special level monsters have been genocided
fix intrinsic blockage by worn items so that wielding a mummy wrapping or
	cornuthaum won't have the same special effect as wearing one
magic markers created via polymorphing tools are flagged as being recharged
unseen rust monster eating messages, and make tame rust monsters consistent
	with wild ones with regard to rustproofed items
pager: guard against '%' in output from being treated as a printf formatting
	directive (using '/' or ';' to look at food yields "% blah blah")
getpos: support shifted movement letters in number_pad as per help text
getpos: properly truncate diagonal movements at map edge
using #name to call an object type something could be used to distinguish
	fake amulet of yendor (appeared in discoveries list) from real (didn't)
upon quest completion, leader now IDs quest artifact and also tells player
	that Bell of Opening is necessary if character doesn't already have it
remove unwanted quote marks from quest message R 70
make polymorphed objects be likely to retain magic state: non-magic items
	usually yield other non-magic items, magic items yield magic ones
make artifact mirrors unlikely to break when used to hit monsters
make sure that nemeses don't leave corpses if the message says there's no body
fix wizard-mode problem with generating Master of Thieves (was singularizing it)
allow weapon-using monsters who ignore gems to throw darts
make flint stones be the preferred ammo for sling wielding monsters
gaining/losing telepathy via polymorph (i.e. mind flayer) redisplays monsters
prayer result of ``escape from solid rock'' isn't inhibited by teleport
	restrictions (attempting to fix all troubles got stuck in a loop)
fix surviving level teleport to a negative destination from somewhere other
	than the main dungeon (was corrupting the level maps)
surviving level teleport to a negative destination ("you float down to earth")
	escapes the dungeon instead of arriving on level 1
dying due to level teleport directly to heaven won't leave bones
kicking shades with blessed boots, punching with blessed gloves or when wearing
	silver rings, does the appropriate damage to them
add artifacts to ending score and display
prevent used objects like scrolls and potions which immediately cause the
	character's death from remaining in final inventory (disclosure+bones)
blessed genocide of '@' will list the player's role during genocide disclosure
moved skill definitions to their own file (skills.h) and embedded them in
	the object table.
increased the maximum number of branches supported by dgn_comp.
increased the number of characters permitted in a role name.
the number of bits available for properties are expanded.
water demons should not chat about being freed.
since hallucinating players see monsters constantly change anyway, don't print
	message when werecritter changes
artifacts which do fire/cold/electric damage to their targets can destroy
	carried objects which are susceptible to that type of damage
some artifacts are now unaligned in order to be more accessible to all types
	of characters
wizard mode ^F command reveals floor traps along with the map
pager: '/' was not finding data.base entries for shopkeepers, mimics, or
	race/role spit when picking from the screen
small monsters like hobbits and gnome zombies couldn't wear cloaks/wraps
make sure non-erodable objects aren't eroded or erodeproof (could happen by
	wishing or object polymorph)
consistently let iron non-weapons rust, etc.
handle more spelling variations ("boots of speed",&c) when granting wishes
fix 3.2.0 change which flags the castle and priest quest levels as graveyards
when stepping on a spot where "there are several objects here" (so many
	objects that they aren't automatically shown to the user), report any
	dungeon feature such as stairs just like when there are fewer objects
report "file empty?" rather than "version mismatch" when that's the reason
	why a data file fails its validation check
to-hit bonuses don't accumulate for monsters with multiple weapon
	attacks
skill definitions moved to skills.h
skills are stored in the objects[] table.
intrinsics and extrinsics are now >32 bit
number of roles no longer limited to 26 letters
renamed typename() to obj_typename()
add "You hear a nearby zap" when monster is close
fixed a bug that would print of "a Book of the Dead" instead of "The"
fixed a bug so there is no delay when a rolling boulder trap is
	triggered completely out of sight
fixed emergency_disrobe() so it will drop gold
fixed a missing case that occurs (rarely) when praying during a
	full moon and your god is very pleased
ask for confirmation before praying;  no more accidental Alt-P
more guilt messages when you do something which lowers alignment
mplayers get more suitable equipment for their role
allow spaces before <option-name>= in the options file
dragon scales/scale mail of all colors now work when worn by monsters (in
	3.2.x, only gray conferred any special benefit)
when shopkeeper takes cash from dead player's corpse, clear `been robbed'
	status if there's enough gold to cover the amount so that next
	player who loads level as bones data won't start out owing money
merged scrolls of scare monster crumble to dust together, matching the
	existing feedback (was destroying one and leaving the rest)
properly disallow wishing for venom and allow wishing for iron balls by class
drum of earthquake can't destroy the high altars
potion of oil can't be ignited while underwater
zapping a wand of digging upwards while underwater won't dislodge a rock
	from the ceiling
add "born" field so monster extinction limits the number created, not killed
allow "okonomiyaki", etc. to pluralize properly (Ranma 1/2 is popular)
fix off-by-one bug that disabled the check to see if you tried to name your
	fruit after a previously existing corpse or egg
avoid a "glorkum" message if an object conveying a warning is stolen before 
	the warning message is delivered
flags.made_amulet flag was never being set
make sure proper message is given when tinning cockatrice while a flesh golem
fix punctuation on cancelled cobra's dry rattle message
leash cannot choke monsters that do not breathe
rothes are now brown, harder to confuse with much more powerful grey quadrupeds
defer level change for every schedule_goto() call, not just while monsters
	are moving (player's move could cause an engulfer to expel character
	onto a level changing trap, then attempt to access stale monster and
	possibly trigger relmon panic or crash)
fix obscure worm bug which did not consider the tail tip to be visible.  Bug
    produced "You miss it" on 3.2 and a blatantly obvious 'I' in prerelease 3.3.
water prayer: treat already blessed potions as `other' rather than as `water'
water prayer: potions being blessed glow light blue rather than amber;
	hallucination affects the color seen when changed potions glow
fix Death/Sandman #9 joke (should be 8) and make sure the message can be seen
zapping Death with wand of death multiple times could cause hit points to wrap
when pet attacks monster that attacks back, be sure it's in range (could be a
	worm attacked on the tail)


Platform- and/or Interface-Specific Fixes
-----------------------------------------
micro: -uwizard-{class} counts as -uwizard when allowing debug mode
micro (assorted): readmail()--don't show fake mail text when blind; also,
	update the "report bugs to" message to specify devteam@nethack.org
msdos: fix overlay separations in weapon.c
msdos: fix problem breaking compile without REINCARNATION
msdos: fix dependency in djgpp Makefile (wintty.c -> hack.h)
tty: try to use terminfo sgr0 (aka termcap me) attribute to turn off all
	text attributes, instead of just using "rmso" (aka "se") attribute.
tty: change name of nethack's termcap.h to be tcap.h
tty: ^P at a long prompt printed an extra newline (and then wrapped oddly)
tty: get repeat to work properly on extended commands
tty/ASCIIGRAPH: rogue level uses PC Rogue colors and symbols
nt: in TTY port, non-English keyboard layouts that depended on AltGr-+ sequence
	were getting "Unknown command 'M-\'" for '\','@','$','{','[',']','}'.
tty and X11: avoid crashing trying to display long (>128 char) menu items
X11: avoid setuid install problems by changing uid to real uid while
	opening the X11 connection.
unix: compress/uncompress detects failure of the compressor, such as for
	filesystem full or missing compressor, and no longer deletes the
	valid file.  In the uncompress case, such as uncompressing the save
	file, a message is generated as well.
dlb: handle situation where lseek(,,SEEK_END) doesn't yield the size of the
	contents of a file (specifically, VMS "variable length" record format)
vms: install.com couldn't handle the `copy readonly files' step when DLB
	wasn't enabled
mac: added unix tty-ish menu flexability
mac: stoped using OLDROUTINENAMES
mac: added dlb support
mac: Increased the maximum number of menu items, so the inventory
	won't get cut off at the bottom.
mac: Changed the behavior of Cmd-Q so it uses the new #quit command.
mac: Will only dispatch events if the window system is initialized.
	This fixes a bug that would crash the system if the user had an
	invalid option in the NetHack Defaults file.
mac: Added an appropriate message when eating an apple.
mac: Change the askname dialog for the new role patch.
mac: Add a gray background to all dialogs.
mac: Replace some improper calls to InitCursor().
mac: Remove a whole bunch of unused code.
mac: Added Balloon Help messages.
mac: Pop-up menus display the 3-letter file code instead of a single
	letter.
mac: Pop-up menus and text item have a 3-dimensional look.


General New Features
--------------------
incorporate the "wizard patch"
`#quit' command added
`*' command added; displays inventory of all equipment currently in use
add Stone To Flesh spell
wands eventually explode if rechaged too many times
show IDed Amulet of Yendor + invocation tools in own section of discoveries
	list; likewise for IDed artifacts
add infravision
add Eyes of the Overworld
add lenses
split players race from role in life
cursed figurines cam spontaneously transform when carried
`in_use' struct obj field is unconditional rather than just #if !NO_SIGNAL
add the secondary weapon slot, e(x)change command, #twoweapon
	command, and "pushweapon" option.
add the quiver slot, (Q)uiver command, (f)ire command, and
	"autoquiver" option (defaults to false).
add the "pickup_burden" option which controls when the user
	is asked for confirmation when picking up an item.
pole-weapons can be applied at a distance, and similarly used by monsters.
'/' command's pick-a-location input (getpos) supports shortcuts to bypass the
	"more info?" prompt; ':' for '.'+'y', ',' for '.'+'n', ';' for ','+ESC
monsters can throw cockatrice eggs at players
prayer trouble "stuck in wall" takes boulders into consideration
crysknives can be "fixed"
vampires now #chat back
new monsters: chickatrice,pyrolisk,fox,coyote,winter wolf cub,dingo, 
	gas spore,flaming sphere,shocking sphere,lynx,panther,raven, 
	glass piercer,mastodon,woodchuck,centipede,master mind flayer, 
	pony,horse,warhorse,silver dragon,lichen,storm giant,arch-lich,
	dwarf mummy,green slime,disenchanter,monkey,dwarf zombie,ghoul, 
	paper golem, gold golem,glass golem,prisoner,jellyfish,piranha,
	shark
new objects: amulet of unchanging,silver dagger,silver spear, 
	silver dragon scales/mail,robe,alchemy smock,kicking boots, 
	kelp frond,eucalyptus leaf,scroll of earth,spell of drain life,
	potion of acid,potion of full healing,potion of polymorph,
	potion of sleeping,ring of free action,ring of gain constitution,
	ring of increase accuracy,ring of slow digestion,grappling hook,
	ring of sustain ability,wand of enlightenment,saddle,various gems
add Monk role
the old Elf role is replaced by the Ranger
add Human, Elf, Dwarf, Gnome, and Orc races
add multishot ammunition
add graves, iron bars, trees, and arboreal levels
dwarvish mattocks can be used to dig
add leprechaun, cockatrice, and anthole special rooms
add the Sokoban dungeon
implement talking artifacts
members of the clergy (aligned/high/player priests and monks) are 
	generated with a robe instead of chain mail.
new tin of meat types
tinning kits and cameras have charges
blessed magic mapping detects secret doors
starting spells are known at start of game
pre-discoveries are listed with an *
voluntary challenges with #conduct
add a funny message when eating tridents and flint stones
allow debug-mode level teleport to the sanctum
some #monster commands now consume energy
trees can be kicked as a possible source of fruit
Wile E. Coyote references when using '/' on a coyote

Platform- and/or Interface-Specific New Features
------------------------------------------------
WinNT: implement mail support
WinNT: console mouse support added to TTY port




General Fixes and Modified Features
-----------------------------------
discarding a tin without eating should not count towards food conduct
expand 'nethack.cnf' in dat/help to include new names on some platforms
using 'C' to name a steed produces a "pony tail"
stopping reading a spellbook when "too much to comprehend" left in_use set
conduct: eating meat{ball,stick,ring,huge chunk} counts as eating meat
don't select gems--aside from rocks and known glass or flint--via autoquiver
skilled slingers can shoot multiple rocks with one shot, like other archers
orcs shooting orcish arrows from orcish bows get multishot bonus, like elves
have 'Q' offer gems/stones as likely quiver candidates when wielding a sling
'Q' command--don't offer tools as likely quiver candidates
spell hunger effect for wizards of high intelligence was not computed correctly
fix "killed by the [master] mind flayer" bug
redisplay correct trap glyphs when hallucination ends
monsters under Conflict cannot attack other monsters that are already dead
monsters that steal gold from monsters should teleport
fix mummy wrappings worn by monsters to block invisibility
applying a weapon or wieldable tool would sometimes give spurious messages
	about two-weapon combat
applying a weapon or wieldable tool might not always end two-weapon combat
receiving a divine gift artifact while wielding two weapons would unrestrict
	two-weapon skill instead of the skill for the artifact's type
throwing and kicking while wielding two weapons exercised two-weapon skill
when wielding two weapons, ')' command should show both
giants cannot "easily pick up" boulders on the Sokoban level
W command would let you wear an arbitrary item in your body armor slot if that
	was empty & uncovered and you carried extra armor for any filled slot
W command would list entire inventory if you answered '?' to the "what do
	you want to wear?" prompt when all unworn armor couldn't be worn
#looting and applying containers with menustyle != traditional would do bad
	things if you split a merged stack in quiver or secondary weapon slot
save/restore while mounted or stuck could cause a game crash or other errors
baby gray dragons should not be visible to infravision
dying from a failed saddle attempt should name the monster without using
	hallucination
spurious "Bummer, you've hit the ground" when hallucinating and dismounting
constitution of <3 and >18 (possible in 3.3 because the ring of gain
	constitution was added) was not handled properly
potion and wand of invisibility (on yourself) should not print message if you
	are already invisible, even if you can see invisible
reviving tame monsters ended up tame but not peaceful and would attack you
wishing for "rotproof" item is recognized as synonym for erodeproof
your pair of boots "are" not affected when kicking rust monster should be "is"
use article "a", not "an", with "eucalyptus leaf"
fix crash if reviving troll has been genocided
shouldn't see candles flicker when blind
gas clouds use cloud symbol
unchanging suppresses amulet of change, intrinsic lost by life-saving
missing lucern hammer, silver dagger, silver spear in monster weapons
buckled boots are brown
Scorpius and centipedes are not web-makers
race placeholders are M2_NOPOLY
Monk species/leader/guardians are M1_HERBIVORE
leader/nemesis flags fixed with |= instead of =
freezing spheres won't leave corpses
artifacts should add to ending score even if they are inside a bag
being killed by a gas spore should not be treated as burning (most noticeable
	problem was that the death message did not include "killed by")
remove a double period from "Caught himself in his own fireball.."
automatic dog names restricted to dogs
chatting with a monster that teleports after the chat (succubus, bribable
	demon) would put an 'I' symbol at the monster's destination
stethoscope/probing should reveal identity of invisible monster, not use "it"
wand of probing zapped at 'I' square with no monster should clear the 'I'
cursed potion of invisibility drunk by monster should reveal 'I'
kicked monster that evades kick by moving to unseen square should not leave
	'I' in original position of monster
closing a door on an invisible monster reveals the 'I'
gas spores are recognized as having passive damage for purposes of pet attack
since iron armor can now corrode, don't call all corroded armor "bronze armor"
properly handle attacking a black pudding with a corrodeable weapon
do not print "You still cannot see" when blind and removing lenses
remove possibility of crashes when unseen monster engulfs items
object shattered by wand should use plural verb when object is plural
don't anger monsters when hitting them with invisibility or helpful unholy water
for initial inventory, don't give out spellbooks in restricted spell skills
for tourists' initial inventory, put darts in quiver rather than wield them
artifact discoveries sometimes showed undiscovered object types (for example,
	Snickersnee as "katana" when katana was still known as "samurai sword")
"iron bars" singularization exception should not also catch "candy bars"
if a monster kills a monster by throwing acid, don't credit the kill to you
leave two-weapon combat mode if either weapon is stolen or otherwise unwielded
use worse of (two weapon skill, current weapon skill) when figuring skill
	bonuses and penaltys while fighting with two weapons
never give back-stabbing or weapon-shattering bonus when using two weapons
engulfing monster will not engulf your pony while you are riding
arch-lich usually starts with an athame or quarterstaff
do not say that "an" Asmodeus reads a scroll
'?' command--short options help sometimes included garbage output
'?' command--longer options help omitted several recent options
eating an amulet of restful sleep now works properly
getting hit by a potion of sleeping now works properly
sleeping is reported by enlightenment
detect unseen / secret door detection refreshes unseen monster (`I') glyphs
monsters won't pick up objects in water (especially kelp)
unseen check for monsters in explosions
fixed "petrified by an "
silver arrows cost a little more than other arrows
javelin back in its own class
dipping weapons in potion of oil now works properly
freed prisoners become peaceful
monk titles shortened so they aren't cut off
elven Priests get their starting musical instrument
you can now correctly ride centaurs
fixed steed getting teleported (e.g. by Quantum mechanic)
fix stethoscope/probing speed reporting, and slowing attack on player
blessed detect monsters increments (not sets) the timeout, and produces a
	message if no monsters are on the level
put "Elbereth" under the sokoban prize so that monsters don't eat it
a weak race can still have a high strength if polymorphed into a strong monster
make dingos non barking canines
suppress zap up/down message for stone to flesh on non-stone levels
fix missing spaces on sokoban level that made level impossible without cheating
use case-insensitive comparison for wishing (needed for Master Key of Thievery)
avoid commas in the player name because they confuse the record file
note Sliming when using probing/stethoscope on yourself
fix inconsistency: reflecting medusa's gaze while invisible didn't work,
	reflecting floating eye's gaze did
Medusa should not drink potion of invisibility (the code only checked for wands)
restore confirmation prompt for kicking pets and peaceful monsters
ask for confirmation about kicking steed when kicking while mounted
converting secondary weapon into an artifact (naming, dipping) stops #twoweapon
a fully ID'd object converted into an artifact is no longer fully ID'd
polymorphing an object by dipping in potion while inside a shop will only
	anger the shopkeeper if the object is shop merchandize
make {wand,spellbook,potion} of polymorph immune to being polymorphed
turning undead should count as calling on a deity for purposes of conduct
fix "monster trail" problem caused by reading a scroll of magic mapping while
	engulfed
don't give Slow_digestion-related message when non-digesting engulfer expels you
vary vampire's chat responses according to time of day, tameness, and player
	form
added fish_parts to mbodypart/body_part
fixed do-while loop test criteria in create_mplayers()
fix crash if reviving troll has been completely drained by Stormbringer, et al
a stinking cloud should not kill a monster more than once
player stops riding when nymph steals saddle
don't ask for name for eaten ring of slow digestion if already identified
don't let engulfed lifesaved monster beat you up while supposedly being
	totally digested
lev_comp: honor class in OBJECT entries (user's '+',"identify" made scroll)
fix uninitialized buffer/unprintable characters error when eggs hatch
accept "aluminium" as variant spelling for "aluminum"
don't die from lava while praying
correctly display gems for the final score even when blinded
throwing a boomerang from {wielded,secondary,quiver} weapon slot will have
	it be restored to that slot if caught upon return
don't allow iron balls to pass through iron bars
fix "What weird role is this? (E)" for names taken from 3.2.x score records
make spell of jumping work properly when restricted in escape spells
save traits of petrified monsters; animated statues are like revived corpses
unmoving monsters seen by infrared are removed from/displayed on the screen
	when they leave/enter direct line-of-sight
Sting and Orcrist get their anti-orc bonus against orc player characters
buffer overrun caused by many long names in a single message
polymorph can't indirectly transform scrolls of mail into blank scrolls via
	paper golem creation
don't let savebones() name a ghost without checking for sufficient space
don't report "killed by ghost of Foo called Foo" on tombstone or in record
when breaking create monster wands, don't place monsters inside solid rock
don't allow tainted cockatrice corpses to prevent stoning if you eat one
oil isn't seen as dimly glowing if you're blind
properly consider hallucination and blindness when printing sliming messages
don't allow the player to jump through iron bars or walls (the latter only
	when wearing the Eyes of the Overworld)
don't allow the player to hurtle through iron bars
work around race condition between breaking a wand of teleportation,
	teleport control and autopickup
rust traps should affect scrolls
lev_comp returns error if level cannot be fully written out
blank scrolls/spellbooks don't count as reading material
fix seduction attacks to treat characters polymorphed into golems as neuter
chaotic sacrificing on a chaotic altar may crash if demon creation fails
failed demon summoning might cause monsndx panic
avoid possible crash when casting fireball spell while engulfed or near the
	edge of the map
prevent observation of dust clouds in rogue level doorways when blind
cans of grease will no longer rust
skip already dead monsters when scanning the full monster list; avoids
	monsndx panic and other potential trouble
skip already dead shopkeepers when checking for tended shops
level teleport high in the air while lifesaved should result in an escape
the "stoned" flag wasn't reset when a monster was lifesaved from turning to
	stone, so the next monster you killed would always turn to stone
harp is not a magical object
player characters got left at 10 when "normal" speed was increased to 12
time it takes a monster to change armor doesn't depend on whether you see it
character can't be totally digested on first turn of being swallowed
level 25 engulfer would trigger divide by 0 crash via evaluating rnd(0)
wielded egg that hatched wasn't cleaning up worn objects and might cause crash
mirror shouldn't show location of unseen monsters
cloth headwear was being reported as leather when fire damaged
modify moveloop so that time (moves) is not relative to the player's speed
fix moveloop to account for player not accumulating enough movement points
	to move in a turn -- this fixes the reported "time is wrong when
	burdened" problem
monsters should not teleport on levels that disallow teleportation
consider existing poison resistance when printing message while eating
don't allow various spells/effects to turn monsters into genocided species
don't crash on abusing guardian angel (accessing edog)
call useupall() rather than useup() for organic items burned by lava
revive any Rider corpse which gets teleported
wishing for gold should affect conduct
gold detection should detect gold golems
grease should affect the secondary weapon in two-weapon mode
falling drawbridge, eating cockatrice eggs, delayed self-genocide all caused
	monsters to be fully named instead of using "it".	
change the You_hear message if hero is asleep
various inventory changes did not immediately update when perm_invent was set
avoid crash when multiple, cascading explosions occur
pets are no longer permanently weakened by a brush with starvation
doeat() doesn't leave rotten food half-set-up for resumption
don't allow trying to resume eating a revived rider corpse
shopkeepers, priests and peaceful monsters should get angry when you cast
	stinking cloud on them
when crowning a neutral wizard who knows finger of death but isn't carrying
	its spellbook, don't drop his weapon (crash likely)
similar greased and non-greased objects would merge together into one stack
monster reading scroll of earth may be allowed an extra attack
change message for failed attempt to mount steed while punished
fix multi-shot throwing for darts and shuriken
update monster multi-shot throwing to match player throwing
prevent inappropriate use of "lungs" in creatures that have none
change several instances of 'pline("The ' to 'pline_The("'
monk characters kick as characters rather than as kicking monsters
fix kicking shades by character polymorphed into kicking monster
fix articles in some Sokoban trap messages and eliminate some
	superfluous messages
restoring with damaged subroom shops on non-current level could dereference
	stale shk pointer
prevent removal of levitation in sokoban pits from causing you to
	"float gently to the ground" 
peaceful/tame mindflayer now mindblasts hostile monsters and vice versa (the
	check was backwards)
fix suppression of stone-to-flesh on unique monster statues
kill player when drain life induces negative HPs
rumors used as engravings should not refer to fortune cookies
magic-resistant players/monsters unhurt by monsters zapping wands of striking
fix time problem where disrobing took too long
saddle that comes with a knight's initial horse should be known to player
iron golems are sensitive to more ways of getting wet with water
prevent odd contents of initial tourist tins and eggs (the contents were
	mostly from the quest level, producing many cave spider eggs)
breaking a wielded wand doesn't leave it wielded
if nymph hits monster on first attack and teleports away, suppress second attack
kicking a mimic should reveal its presence
using 'F' command on a pet with safepet should not produce "thin air" message
polymorphing into slime or fire creature removes Slimed; becoming a new man
	resets the Slimed timer
throwing cockatrice corpse barehanded should stone the player
avoid "petrified by petrification" on tombstone
avoid "turning into green slime" on tombstone (KILLED_BY didn't work if Slimed)
since unchanging prevents sliming, make it reset any sliming already present
avoid "You turn into a female succubus" redundancy
player hit by potion of acid should take damage like monster
"You are protected" in enlightenment display should include u.uspellprot
chameleons that change into a non-moving, non-attacking form shouldn't get stuck
fix bug where monsters didn't wield bow (etc.) before shooting arrows (etc.)
medium size is too large for giant bats (it allows leaving plate mails when
	killed)
player polymorphed to a ghoul resists sickness just like a ghoul monster
player in werecritter beast form shouldn't polymorph into "human"
player wearing scales of genocided dragon was getting duplicate "you feel
	dragon-ish" messages when polymorphing
fix luck timeout for full moon and friday 13th
monsters must wield polearms before using them, just like players
when saving bones data, shopkeepers will claim dropped objects inside shops
pets will now wear objects they pick up
pets will now wield pick-axes when necessary
limbless pets are no longer able to carry objects
monsters cannot consider a mattock for digging if they are wearing a shield
avoid a case where monsters keep switching between pick-axe and weapon
override hallucination when reporting pets that ascended or escaped with player
avoid duplicate pickup() calls when landing after falling through a hole
added squeaky board traps to Lord Surtur's lair entrances
cursed lenses no longer considered a major problem by deity
prevent "seeing an image of someone stalking you" when Blind
disallow potion of polymorph / ring of polymorph control starting combo
disallow starting with blank paper
tools shouldn't charge beyond 127 charges
getting money from a fountain should set the looted flag
pole-weapons won't bash and will advance skill when on steed
blessed genocide of polymorphed unchanging player should kill
picking up nothing should take no time
quiver command should take no time
potions should not be autoquivered as worthless glass
players should not get double-billed when using or altering items
silver dragons should have same resistance as other dragons
golems should be un (reverse-)genocidable
player should get blamed for destroying Minetown fountains by Excalibur dipping
player should not get blamed for others destroying Minetown fountains
digesting ghosts and shades as a purple worm should be nonvegan but vegetarian
eating brains as a mind flayer should be nonvegetarian
eating eggs should be nonvegan but vegetarian
eating tripe, meat sticks, chunks of meat should be nonvegetarian
headstones now implemented through engraving
luck penalty for the remaining forms of "creative NetHacking" in sokoban
don't penalize a turn if player cancels #ride direction
Ranger quest is no longer a rip-off of the old Elf quest
several Hello() messages were inappropriate for various monsters
storm giants should talk
monk leader and guardians should use clerical spells
monks shouldn't start with scrolls of enchant weapon
movement rate when saddled was miscalculated
items under lava shouldn't been seen or picked up
clicking in status line during `/' shouldn't cause getpos error
huge chunk of meat should count as dogfood
"Pardon me" when moving directly into peaceful monster
shouldn't glow amulet and save life of digested monsters
"<monster> gets angry!" only when you can see the square
"Never hit with a wielded weapon" conduct should only count
	weapons and weptools
lynxes should not have cold attacks
Naming a specific object asks "What do you want to name *this* ___"
"Having fun sitting on the floor" shouldn't over fountain
"ball lightning" changed to "ball of lightning"
"poisoned by a poisoned crude arrow" should be "killed by a poisoned
	orcish arrow"
shouldn't see invisible monsters oozing under a door
fix apostrophe for invisible seen-invisible crumbling-to-dust liches
amulet of change when polymorphed into single-gender monster could produce
	inconsistent role name for Priest(ess) and Cave(wo)man
prevent Fire Brand from "burning" a water elemental
snatching cockatrice corpse gloveless by applying bullwhip will now stone
inventory description of wielded two-handed weapon uses "weapon in hands"
inventory description of secondary weapon explicitly lists it as non-wielded
	to reduce confusion about two weapon combat
Bell of Opening removes attached iron ball when performing opening magic
chatting to a monster who responds with "I'm trapped" reveals the trap
Make tmp_at() work when called in the midst of a previous tmp_at() sequence
Make the messages for attempting to wear lenses over a blindfold more clear
Prevent buffer overflow when reading engravings that are BUFSZ in length
paralyzation message on steed should not say your feet are frozen to the floor
avoid buffer overflows and associated security problems from getenv(),
	program name, and user name


Platform- and/or Interface-Specific Fixes
-----------------------------------------
Mac: legacy message was being truncated
Mac: black background left mess on backspace
Mac: backgrounds set too early on game startup
Mac: tty window positions not remembered after move
Mac: tty window turned B&W when moved to bottom of screen
Mac: tty quit command fixed
Mac: remnants of previous hunger status now cleared
MFLOPPY: add checkspace option to avoid problems with >2GB free space
MSDOS: fix clearlocks() to look for the right file names, 
	and not LEVELS.* (MFLOPPY only)
MSDOS: remove djgpp stuff from the Microsoft C Makefile
MSDOS: change NetHack.cnf to defaults.nh in NHAccess.nh comments
MSDOS: add missing files to gcc 'make spotless'
NT: WIN32 specific code in tty_nh_poskey() was missing the
	necessary code to clear window flags so after hitting ESC 
	messages that should have displayed did not
Linux: set MAILPATH properly
Linux: don't use control characters on Rogue level with IBM graphics
DEC UNIX: set MAILPATH properly, type lex functions properly, avoid conflict
	with curses over naming
Qt: remove intermediate files on 'make spotless'
Qt: modify makefile to allow use with BSD make and FreeBSD
Qt: have player selection dialog come up when name specified
Qt: use default menu accelerators and allow remapping
X11: fix memory leaks is reading from dialogs
X11, tty: avoid crashing when displaying empty menus, as from 'i' with
	perm_invent and no inventory
tty: when given the choice of ANSI color (AF) vs standard color (Sf), choose
	ANSI since there is some disagreement as to the correct color order
	for Sf, but no such disagreement for AF.
tty: add workaround for termcap misfeature in some Linux distributions which
	affects DECgraphics display
Amiga: minimal functionality restored
Amiga: recover created empty (and unused) save.info files
Amiga: ^P works properly
Amiga: windowcreating modified for better adaptivity
Amiga: changed from intuition menus to gadtools menus
Amiga: changed default colors in tilemode to those of gfxfile
Amiga: window backfill works
Amiga: playerselection adopted from tty-port
Amiga: linesplitting in msg/inv/menu windows fixed
Amiga: obey user configured pens in nethack.cnf
Atari: tty port rescued from oblivion, Gem windowing added


General New Features
--------------------
gold/glass golems, glass piercers now resist acid
added sharks, piranha, jellyfish, prisoners, and iron bars to special levels
piranha can appear in swamp rooms
hero falls off steed when fumbling or falling down stairs
artifacts speak when applied
engraving "x" is not literacy
demons and vampires engrave in blood
shopkeepers don't like riding customers
can #chat down to steed
own race in Gnomish Mines replaced with random monsters
differentiate between light/gaze-induced blindness and other causes of blindness
yellow dragon scale mail provides acid resistance
polymorphed player digests engulf victims more slowly if Slow_digestion
Conflict now affects steed's desire to keep its rider
undead turning of bones level player corpse causes ghost to reunite with
	the corpse
control-x in regular mode displays name, role, race, gender, and your deities.
wizard mode can wish for pools of lava
pythons now have infravision to emulate real pythons heat sense organ
M-2 added as a shortcut for #twoweapon
general file location mechanism
you can choose to #loot the saddle from something now
message changes for silver dragon scale mail glowing silver and pit vipers
	falling into pits
support explicit `race=random', `alignment=random', and `gender=random'
	in startup options
manes now grow up into lemures
potions of healing and sickness affect Pestilence in the opposite way to
	their effect on other monsters
introduction of a new method of warning where you sense the danger level of
	monsters on the level by displaying it at the monster's location
introduction of a new method of warning for specific monsters the way Sting
	does for Orcs; you sense their presence anywhere on the current level
artifacts can belong to specific races and won't be given as gift when "hated"
Archeologists get a penalty for breaking "historic" statues
hatching eggs in male player's inventory have chance of "Daddy?"
steeds affected by more types of wands zapped down
opening/knock versus steed drops saddle
unwearing your steed's saddle (e.g. stolen, opening) causes dismount
yet another funny message when whipping a horse corpse
yet another funny message when mounting when hallucinating
Bell, Book, and Candelabrum added to final score like artifacts
new keywords coaligned and noncoaligned for altars (and monsters/priests) 
	in special level descriptions
quest start levels get coaligned altars if their roles have multiple 
	alignments, and goal levels get noncoaligned altars
ice vortices and freezing spheres are infravisible


Platform- and/or Interface-Specific New Features
------------------------------------------------
X11, tty, Amiga: offer for player selection only choices consistent with those
	already made by config file/command line (e.g., only offer roles that
	are compatible with specified race)
tty: eight_bit_tty option
Amiga: implement menu_* accelerators and counting
mac: the "record" file is created if it does not exist



General Fixes and Modified Features
-----------------------------------
prevent an extraneous selection prompt when a role with only a single 
	possible gender, race, or align is specified
be consistent with the use of twice and thrice in end of game reports
use "kill" vs "destroy" more consistently
looting bag of tricks on the floor doesn't then prompt for direction
suppress "the" in "you kill the poor Fido"
iron bars added to the Dark One's prison
shouldn't be able to #loot without hands
level compiler can specify cockatrice nests, leprechaun halls, antholes
fix level compiler to allow specifying golems via '\'' in MONSTER directives
fix bug where excalibur blasted lawful non-Knights
unification of the strings "he"/"him"/"his"
conflict caused vanishing vault guards to be killed with player getting
	credit/blame (also dmonsfree warning for double removal from map)
monsters' conflict resistance check was unintentionally being affected by
	character's experience level
stone-to-flesh was accessing freed memory, passing bad map coordinates
	to newsym that might be harmless but could trigger a crash
prevent spurious "placing steed on map?" impossibles during save/restore
prevent real "placing steed on map?" impossibility [sic] when creating bones
dropping secondary or quivered weapon to lighten load in order to crawl
	out of water left the item flagged as still worn
if #adjust combined two or more of main weapon, alternate weapon, and quiver
	the resulting stack would be flagged as worn in multiple slots and
	eventually trigger "Setworn: mask = ##." impossibility
remove curse operated on secondary weapon even though it wasn't wielded
update conduct immediately when eating corpses (character killed by eating
	poisonous corpse as first meal was described as "strict vegan")
fix problem with amulets of change when polymorphed into succubus/incubus
YAFM for pit fiends/pit vipers and pits should require seeing the monster
woodchucks, cockatrices, and vampire bats should eat
specifying a non-numeric value for amount when donating to temple priest or
	bribing demon prince produced random result
mastodons can tear through webs
praying on wrong deity's altar cursed holy water but ignored uncursed water
polymorphed player's gaze now works properly as a pyrolisk
fix "You drop the Wizard of Yendor's corpse into Wizard of Yendor's interior."
make sure status line gets updated when turning-into-slime state changes
when eating green slime, don't reset slime countdown if already infected
stop current activity when you noticed you're turning into slime
message given when displacing an unnamed pet into a polymorph trapped referred
	to it by its new monster type rather than by what you displaced
player killed by ghoul turns into one in the bones file
slings are not made of wood
for post-amnesia deja vu messages, use "seems" rather than "looks" when blind
avoid encumberance messages during startup attribute adjusting
even a wumpus cannot escape the pits in Sokoban
when a steed dies in a shop, don't charge for the saddle
shopkeeper did not charge for use of an unpaid camera
shopkeeper did not charge for items burned by breaking a wand of fire
shopkeeper should charge when you transmute a potion
shk notices if you use a grappling hook to remove an item from the shop
adjust robbed shopkeeper's feedback when he or she plunders hero's corpse
avoid giving away which monsters are saddled while hallucinating
when polymorphed into a herbivorous monster, you should prefer vegan "corpses"
when polymorphed into a hider, stop hiding after picking up the last object
	at a location
throwing a wielded, returning weapon should not disable twoweapon mode
monster should not wield cockatrice corpse without gloves on
sharks have thick skin
better message when killed by drinking a potion of sickness from a sink
telepathically detected monsters will be described by name if they try
	to attack praying character
taking cockatrice from or putting it into a container should stone you
	if you are unprotected
don't fall into pits (or other traps) twice when dismounting
fix two weapon combat bonus/penalty to avoid "weapon_hit_bonus: bad skill 2"
unicorns were at a disadvantage on a noteleport level
missing a cockatrice when polymorphed into a weapon-using monster but
	fighting hand-to-hand would stone the player
eliminate ghoul creation abuse when engraving on a headstone
loss of levitation due to a sink will result in touching a wielded cockatrice
	corpse, just like falling down stairs while burdened
falling into a sink when constitution is greater than 20 won't raise hit points
stinking cloud should not affect migrating monsters, causes dmonsfree error
only display message about monster using a weapon against another monster
	if you can see the monster
don't count artifact amulets (wizard's quest artifact) twice in final score
prevent pets from picking up Rider corpses
when polymorphed into a centaur, don't keep kicking monsters after they die
when throwing at a monster that you see with infravision, don't say "it"
avoid "the arrow misses the mimic" which left the mimic concealed
#sit while water walking over a submerged object should sit on the water's
	surface rather than on that unreachable object
suppress extra "the" when printing the names of certain mplayers
do not try to engulf green slimes (same as for cockatrices)
trying to eat the brains of a green slime is now properly handled for players
monsters touching cockatrices check boots for feet and nothing for tentacles
if being petrified, don't disable messages from further petrify attacks
trap detection would generally not find trapped doors
avoid spurious done eating message after choking and vomiting
attribute distribution for several player types did not add up
monsters shouldn't try to eat green slime as a cure for stoning
lighting of arboreal levels should not be stopped by trees
need to recalculate visible locations immediately when monster blinds player
monsters shouldn't see through walls because player wears Eyes of the Overworld
when pricing glass the same as valuable gems, be sure to use gems of same color
nymph stealing armor from a fainted player should wake the player
ensure status line updates when you stop running when time is shown
repairing a trap in a shop doorway must replace the broken door or wall as well
sleeping steed cannot climb stairs/ladders
can't change levels when mounted on a steed which is carrying the Amulet
more artifacts granted by a deity are rustproof
monster name feedback when using the m movement prefix allowed player to
	distinguish between peaceful and hostile monsters while hallucinating
scrolls should not fade when hitting rust monsters, only from rust traps
blank scrolls should not fade even from rust traps
can't eat or #offer food off the floor under circumstances other than
	encumbrance where you couldn't have picked it up off the floor first
ensure correct message after passive freeze attack by gelatinous cube
avoid buffer overwrite when several weapons slip from your hands at once
prevent portal placement on Ranger quest from stranding player in left margin
avoid crash when a trouble gets fixed before you finish praying
sensed hidden monsters should fight back when attacked
mindless monsters won't be grateful after unsuccessful #untrap attempts
turning affects your religious conduct, even if your god does not help you
rolling boulder trap's boulder will knock another one that it collides 
	with into motion in its place
make it harder to abuse detect monster and confusion spells
prevent D[a from producing odd message sequence in (c)ombination mode
avoid messages like "the silver bell" after being drained by mind flayer
after polymorph, actually drop both weapons when a message says this happened
curb unicorn horn creation abuse by limiting the chance of a unicorn
	leaving one if it has been revived
accept -p and -r options with nethack -s, as documented
avoid printing "spellbook of" Book of the Dead in list of discoveries
eating non-food items made of leather or other animal parts now violates
	vegan/vegetarian conduct 
use correct skill when throwing something while in twoweapon mode
secondary weapon can rust when hitting a rustmonster in twoweapon mode 
extra healing spell cures monster's blindness
add missing quest message for throwing the quest artifact to the Monk leader
pits, arrow and dart traps, webs, polymorph traps and sleeping gas 
	traps can affect the steed
allow game restoration while polymorphed and your race is genocided
ensure that crysknives revert to worm teeth, even in containers
do not print gas spore's name if you cannot see a gas spore explosion
cursed two-handed weapons now keep you from changing body armor
trapped pets cannot follow you to another level
no corpse when unchanging hero dies while polymorphed into a G_NOCORPSE monster
A-removing armour under cursed stuff no longer fails silently
grease protects gloves from contact poison on books
items picked up from an abandoned shop sometimes wouldn't merge with other
	compatible items in inventory ("no charge" bit wasn't being cleared)
prevent cut-off death message by increasing DTHSZ
check to not control teleports when unconscious should now work properly
if armor the hero is donning is stolen or seduced off, attributes
	can be left permanently mis-adjusted
ensure a message is printed in all non-obvious cases where a monster flees
a fleeing monster that is holding you always results in a "get released" message
ensure a monster flees for at least one "turn"
explosion type can now be one of dark, noxious, muddy, wet, magical,
	fiery, or frosty
flying (jumping or throwing recoil) over some traps (magic portals, fire traps)
	will now trigger the trap
displacement does not work through walls
you can't trip and fall or trip over rocks while riding
reduce the chances of a monkey successfully stealing armor you are wearing
monkeys can't steal cursed items that you're unable to remove or attached
	iron ball or items too heavy for them to carry
trapped doors are not always detected after returning to a previous level
trap detection sometimes showed non-trap locations to be traps
eucalyptus was never chosen in random tree fruits due to an off-by-one bug
allow knights to pursue and attack thieving monkeys without alignment penalty
gaining levitation while over on sink causes an immediate fall
quest leader should avoid leaving the quest start level voluntarily
blind Medusa cannot gaze
prevent dipping attached iron ball or embedded dragon scales into a potion
	of polymorph from confusing the game about what items are in use
should not be able to cut down trees on Ranger quest start level
arrow traps are not currently intended to shoot poisoned arrows
fall off the horse if you mimic a pile of gold while riding
martial attacks will not remove monsters from traps and will cause
	monsters to set off traps they land on while reeling/staggering
prevent topten from using alloc after alloc failure
Nazgul and erinyes are nopoly to ensure their numbers are never exceeded
"player-@" randomly selects a race and "player -@" randomly selects 
	everything that is not specified
prevent spurious "quest portal already gone" when you use an artifact to
	return to the quest after being previously expelled
prevent limbless shopkeepers from "leaping" and "grabbing" your backpack
	by changing the messages that you get
prevent panic when riding while punished and falling down the stairs
armor class shouldn't wrap from very negative to very positive
searching should only credit you with finding an undetected monster if
	you couldn't sense it or spot it already
monsters should not generally lose invisibility when polymorphing
monster must have eyes or breathe to be affected by potion vapors
stop dungeon file open failure from causing vision-related crash
wishing for {statue,figurine,corpse} of long worm tail yields long worm instead
chatting to an arbitrary shopkeeper (not a petrified one) who was created
	via statue animation produced strange results
Yeenoghu's confusion attack is not a touch of death
an eating steed should not be able to go up or down stairs, etc.
you don't feel "great" when recovering with a unicorn horn but Slimed; also,
	make the same check for potions that make you feel "great"
avoid panic during player-as-demon demon summoning when no demon is available
change "Ouch! You bump into a door" message when riding
prevent voluntary dismount of steed from passing you through walls in
	tight spots
prevent throwing boulders, boxes, and chests and medium-to-large
	corpses and statues through iron bars
only living eggs which touch cockatrices get turned to stone
since monsters already refuse to zap empty wands, they shouldn't pick them up
after praying, try to give a spellbook for which the player is not restricted
after #dipping your weapon in hand or quiver into a potion of polymorph,
	leave it where it was
message from rust trap states "robe" instead of "cloak" when applicable
gas spore explosions were affecting your human hitpoints even if you were 
	polyd and consequently you did not rehumanize
prevent "You attack empty water" when attacking a spot on land while 
	underwater
prevent spurious "But you aren't drowning. You touch bottom." message when
	removing an amulet of magical breathing as an amphibious creature
fix message given when a monster tries to disarm your multiple welded daggers
	 with a bullwhip
camera flash no longer stops at invisible monster
monsters inside a stinking cloud should be blinded, just like the hero is
vault guard shouldn't initiate conversation with you when you're hidden
adult wolves are not small but lynxes are small
turn off vision during a save operation to prevent impossible() from
	triggering a crash
rolling boulder trap's boulder susceptible to land mines and teleport traps
polymorphing below level 1 should kill player (needed to fix max-HP abuse)
prevent "obj not free" panic when shopkeeper cannot get to a thrown pick-axe
give feedback if Sokoban prevents polymorphed player from passing through walls
eliminate Wounded_legs enlightenment message when riding since it refers to
	the steed's legs, not the hero's
adjust the fumbling pick-axe message to reflect that the steed's
	legs got damaged, not the hero's
quaffing a noncursed potion of speed no longer heals the steed's wounded legs
prevent mounting of steed when you have Wounded_legs to prevent abuse;
	dismount does an unconditional healing of Wounded_legs during the
	Wounded_legs context switch
wounded legs on a steed doesn't count as a prayer trouble
wounded legs on a steed doesn't abuse dexterity
make wounded legs gained by falling off a steed consistent (dexterity loss)
land mines while mounted should hurt the steed
self-genocide while sitting on a throne should not refer to scroll of genocide
eating dogfood or fixing a squeaky board conveys experience but didn't
	check for gaining a new level
demon bribes are 4x larger than they should be for co-aligned players
specific monster warning no longer reveals the true monster name when you
	use the '/' command while hallucinating
start_corpse_timeout() now takes corpse age into consideration rather than 
	always assuming a fresh corpse, thus fixing potential icebox abuse
player on an immediate diagonal from a monster reading a scroll of earth
	should be affected, just like monsters in similar locations
objects that fall from monster's minvent as a result of monster polymorph
	are not polymorphed, consistent with items that remain in minvent
quaffing a potion of gain ability while wearing ring of sustain ability
	displayed no message and identified the potion
monsters still with WAITFORU strategy should not follow up/downstairs
messages should reflect the fact that the Eyes of the Overworld mask the
	effects of blindness
Amulet of life saving should save you from sickness that will kick in this turn
player should stop waiting when a monster uses a polearm from a distance
avoid stone-to-flesh blood pooling message when zapping ice and not stone
when polymorphed into a silent creature, do not "pronounce" scroll formula
ensure hilite turns off immediately when pet stops being tame
hitting with a polearm counts as hitting with a weapon for conduct
traps detected while blind and levitating were not displayed
when a mind flayer uses its mind attack, it should wake the victim
shapechangers restored from disk would no longer change shape
allow "tame" prefix when using the wizmode C-g command to create new monster(s)
display a more appropriate name for a high priestess when using ;/ commands
change "The water elemental is on fire" to "The water elemental is boiling"
blind, cancelled or nonseen invisible Medusa cannot gaze at other monsters
fix impossible when spinning web on falling rock, rolling boulder and fire traps
rust monsters can only eat items made of rustable material
wands of fire are no longer flammable no matter what material they are
displacing you pet into a trap which kills it affects killer conduct
pets can now be displaced in untended shops
only show lit walls if, like doors, the position next to them is lit too
charge for an unpaid weapon used for engraving
shopkeeper should charge for unpaid balls and used candles in containers
when swallowed you could drop or throw a cockatrice corpse into a 
	monster's stomach without stoning it despite the guaranteed hit
steed would often not respond to an attack, even if you didn't move that turn
after stepping in a polymorph trap, a monster may pick up the wrong items
breaking an unpaid wand of teleportation wouldn't result in the proper charge
next_shkp() was used inconsistently, potentially triggering an endless loop
chaotic wizards usually get a spellbook when crowned, just like neutral ones
monk quest: fix the two inaccessible chambers on the locate level
rogue quest: fix the four inaccessible chambers on the home level;
	link the two inaccessible chambers on the locate level and provide
	a means of escaping from them; on the goal level, link most
	chambers together, resulting in just four disconnected regions,
	and force stairs to be in a different region from the nemesis
angels can fly
under #twoweapon fix it so that only Stormbringer carries out the
	blood-thirsty attacks, not both
booby-trapped doors shouldn't make you stagger if you're riding
encumbrance exertion checks should happen each time player moves
mksobj_at: add way to suppress the chance of a new object being an artifact
steed should be the one caught in a bear trap, even if player is polymorphed
use a more appropriate message than "being held" when using < or > while 
	swallowed or engulfed on stairs
stinking cloud isn't useless and shouldn't be excluded from initial inventory
shopkeeper will not try to buy food you are eating when inventory is full
don't duplicate any gold inside containers when saving bones data
can't tell between acid and holy/unholy water that burns like acid
tame stuck monsters should release you after regaining their senses
engraving Elbereth exercises wisdom, engraving anything else does not
artifact bows get any special attack bonus added to missile to-hit roll
monsters with gaze attacks should not try to blind the hero with potions
players polymorphed into umber hulks should not try to eat boulders in Sokoban
when a monster uses up a partially eaten food item, cleanup was not performed
temple priests shouldn't be created with two robes
give some quest leaders and nemeses equipment appropriate for their class
mis-engraving "X" or "x" shouldn't violate illiterate conduct
Heart of Ahriman now explicitly does double damage
prevent NO_ATTK artifacts from accidentally doing double damage
player polymorphed into monster that loses hp out of water should lose hp too
make sure that all leashed monsters get released when bones data is saved
eating a ring of levitation doesn't confer permanent intrinsic levitation
silver hating monster using a bullwhip shouldn't snatch silver weapons into
	its inventory
fracturing one of several boulders at a location should not unblock vision
don't hide stairs, thrones, &c under spider webs when creating levels
rediscovering forgotten object types behaved differently depending upon
	whether they had user assigned names at the time of amnesia
taming while engulfed is limited to the engulfer
restore blindness resistance to Archons
if a shk is polymorphed into monster form which has Wizard-style tactics,
	don't let him teleport to the stairs if he's inside his shop
when the player digs a hole through a shop's floor, don't let shopkeeper
	wander out of that shop while multi-turn digging is in progress
don't protect alternate weapon and quivered objects against being taken
	by shk who grabs your pack when you dig a hole through his shop floor
add missing break to POT_WATER case in potionbreath()
keep monster from forgetting its weapon is cursed every other round
multiple shot throwing stops immediately whenever you hurtle backwards
don't panic if being billed for a burning or other timed object
food that makes a monster peaceful should not re-anger it at the same time
abusing a leashed pet could result in a leashed peaceful monster
couldn't unleash steed while mounted
trying and failing to wield an item could leave current weapon flagged as both
	"weapon in hand" and "alternate weapon" when `pushweapon' option is set
handle OBJ_CONTAINED case for corpse revival so that trolls can revive 
	from inside containers
eating one of several merged partly eaten food items should take nutrition
	from only one of them
coyote names should not disable printing of "tame" or "peaceful"
Eyes of the Overworld protect from stun effect of Archon's radiance attack
give feedback when putting on or taking off the Eyes of the Overworld causes
	blindness state to be toggled
avoid spurious "you can see again" when temporary blindness being overridden
	by the Eyes of the Overworld times out
removing blindfold or lenses via 'A(' gives same results as via 'R'
make blindness with just 1 turn remaining be a candicate for repair by
	unicorn horn and healing potions/spells
healing potions/spells shouldn't fix being creamed
make pie throwing and venom spitting by the player be consistent with the
	effects of those attacks by monsters
offering & tinning corpses on altars should work even while riding
It was possible to faint after eating a fortune cookie and still read
	the fortune's text despite being unconscious
when filling a pit containing a vortex, a surviving vortex gets untrapped
teleporting no longer moves the iron ball to under you if that's not necessary;
	prevents odd ball movement when crawling out of water
monsters now prefer to wear speed boots over other boots
prevent crash when loading a special level specifying a mimic using m_object
prevent crashes caused by dropping or shipping quivered or secondary weapons
don't trigger spurious encumbrance messages on last turn of a multi-turn meal
prevent food being restored to untouched status if interrupted while eating
troll revival shouldn't increment the troll creation counter
breaking mirrors and your eggs should be bad luck when kicking chests as well
	as throwing
vampires should be G_NOCORPSE so you can't wish for them
glass objects should break when thrown, just like when kicked in chests
rocks/gems shouldn't be hard to throw by hand because they are ammo
avoid all cases where splitting an object would result in two objects being
	quivered, wielded or otherwise having its owornflag set
allow 'a' prompt when dropping many objects in shop for credit (Wingnut)
monsters who get polymorphed while wearing dragon armor turn into dragons
shape changers can't be killed by system shock when hit by polymorph
Chromatic Dragon has silver scales too (she reflects)
being killed when wishing for an artifact should retain that item in bones data
the drain life spell should not wipe out engravings (especially not using a
	function that requires you to be able to reach the floor)
monsters who can cast undirected spells don't need to be in combat with you
	to do so
messages consistent for all monster spells
monsters casting spells at your displaced image now set mspec_used
monsters without ranged spells don't print curse messages for ranged spells
going down to floor using > should set Heart of Ahriman invocation timeout
riding a steed into water kills the steed if it cannot swim, with penalties
gaze attacks now stop occupation
proper death message when killed by "plain" high priest
don't conceal the identity of Moloch's high priest
blessed full healing can't recover levels lost when polymorphing into new man
blessed full healing can recover at most half of other lost levels
golden glow when praying will recover lost level if blessed full healing could
gaining a level while polymorphed increases current monst hit points as well
	as latent human (or whatever) hit points
pets should not try to go after food that they can't reach
monsters shouldn't use wands of digging in Sokoban
objects dropped in or travelling across lava pools can take damage
monsters that enter lava can take damage
eating an unpaid tin should calculate cost before not after eating
spells shouldn't do negative damage
when reading spellbooks, don't "continue studying" wrong book if original one
	gets destroyed after previous reading attempt has been interrupted
correctly handle polymorphed quest leader
swallowing zombies/mummies whole makes you sick, like when eating them normally
impose additional teleport restrictions on the no-teleport Plane of Air
landmines set off by pushed boulders have same effects as stepping on them
secret corridor detected out of vision range is still displayed (prevents bug
	where wand of secret door detection found nothing but still identified)
getobj can now see user-specified count when using inventory to make selection
scalpel is stainless steel (i.e. METAL) not regular steel (IRON)
eggs, potions & other breakables may break when they fall down stairs
hurtling via grappling hook does not apply effects of destination location
consider vortexes to be nonliving
dragons have scales, not fur
if player teleports a monster while swallowed on a noteleport level, the
	player should not teleport along with the monster
prefixes that can appear in any order when wishing should include +/- and empty
don't allow untrapping of adjacent traps in locations you can't move to
summoning should summon any alignment if summoner's base alignment is A_NONE
when dipping unicorn horn in potion, the potion might change bless status, so
	set bknown to FALSE
grammar fixes such as "Eyes of the Overworld resists" and others
score bonus was missing from scrolls of identify and fire 
make wands of speed or slow monster known if their effect
	on monsters is observed; likewise for speed boots
gold detection "materially poor" message inappropriate if you have hidden_gold()
cannot reflect back an invisible umber hulk or medusa's attack
monsters with M3_WANTSBOOK often couldn't move in the Wizard-level
Vlad should want the Candelabrum
if you float_down on a trap in which you're already trapped, don't retrap
applying whip toward hidden mimic displays mimic name before "Wait!" message
stealing a container didn't multiply cost of stolen contained objects by quan
halve air elemental damage to compensate for side effect of speed system
strengthen Death; weaken Famine, Pestilence, and Demogorgon
pet purple worms get nutrition from engulfing attack
throwing an artifact upwards will trigger artifact hit effects when it falls
being hit by Fire Brand stops the turning-into-slime process
monsters hitting other monsters can split puddings with weapons
be consistent with checking for iron weapons when splitting puddings
prevent corpses of undead creatures just killed by undead turning from being
	instantly revived by the same undead turning attack
allow fake player monsters to handle artifacts that don't match alignment/role
chaotic monsters can use Stormbringer; lawful monsters can use Excalibur
No "corridor disappears" message if Vault guard dies off-level
slip while mounting and levitating at will should not cause damage
if you see a monster jump into a trap in a secret corridor, it's not secret
fixed a few places where unblock_point wasn't called but should have been
cloned monsters should have the same name and tameness as the original
you should stop eating (etc.) if a monster attacks you and misses
half physical damage should apply to gas spores
iron bars should affect wall corner wallification
potion of polymorph shouldn't be identified if object being dipped into
	it ends up as the same type of object after polymorphing
don't slap against the floor while riding and eating bad food
got rid of "nori" (since it doesn't really translate "kelp frond" accurately)
engraving in fog-covered location on in the Wizard quest said you
	engraved in air, not dust
dipping non-weapons into burning potions of oil had no effect
dipping arrows into burning potions resulted in rust damage


Platform- and/or Interface-Specific Fixes
-----------------------------------------
amiga: random crashes when opening menu window in fontmode eliminated
amiga: proper action taken (cancel) when closing the menu window
	with closegadget or escape
amiga: allow #/altmeta combination on foreign keymaps
amiga: prevent plname[] overflow from askname()
amiga: prevent writing outside basewindow (bottom)
amiga: tilemode tombstone corrected on cybergfx screen
amiga: don't clutter levels/ with foo.0 when quitting at playerselection
micro: prevent a guaranteed impossible() if we ever have more than (COLNO - 1) 
	levels in the game
micro: fix out of bounds memory modification for file opens via PATH
msdos: placeholder tiles accepted by the thin tile builder
tiles: use pixel-accurate grid bug tile for grid bugs
tty: correctly dismiss 1-line menus
tty: clear screen before version incompatibility message so it doesn't just
    print the message overwriting previous screen text
tty: pet was not always hilited
tty: don't crash if the news file is present but empty
unix/tty: give user a chance to see any error produced by (de)compression
win32/tty: menus can take advantage of consoles larger than 80x25
win32/tty: add support for inverse attribute
Gnome: workaround for GTK+ attempts to disallow setgid executables
Qt: honor user preferences in startup dialog
X11: map not displayed in color when using X11 windowtype w/o tiles
X11: viewport scrolling could scroll the the wrong place with resized window
X11: allow extra space added to map widget to be removed if widget shrinks
X11: general solution to the problem that the meaning of font height varies
	among different implementations of X11
X11: make "slow" mode the default since it seems to be very prevalent


General New Features
--------------------
added travel command via '_' or mouse click
config file processing detects multiple use of the same OPTION and 
	prints a warning when it does
make the player selection prompt more explicit in the information
	that it is going to request
remove curse now operates on cursed leashes that are in active use
give feedback when shooting/throwing more than one missile at a time
monsters can now deliberately eat dead lizards to cure confusion
general warning now allows you to attack unseen monsters, as long as you can
	see the warning glyph on the screen
wand of fire & fireballs now burn webs
wand of locking / wizard lock zapped down will close and remove trap doors
exploding monsters wake nearby monsters
various mindless, sphere monsters no longer need to breath
sleeping gas no longer affects nonbreathing monsters
vault guard doesn't notice you if you're mimicking gold
good chance of untrapping monsters and pets caught in webs if you are 
	polymorphed into a spider, and extremely small chance even if not
stamina affects ability to throw heavy things
objects merge in containers
wishing for "nothing" yields no object and preserves wishless conduct
genociding "none" destroys no monsters and preserves genocideless conduct
coyote id naming shows only the true latin name if coyote is cancelled
xorns can "speak" and can smell valuable metal
if you find a trap but there is too much clutter to see it, have the
	game display it temporarily until a keypress
rename the Wizard of Balance to Neferet the Green
double the number of messages that apprentices/guards utter, with 5 for
	before the quest, and 5 after
wizard mode ^G command can create monster by class, not just by name
wizard mode ^G command takes a count
kicking a sleeping/paralyzed steed now causes special effects
allow overriding of the default boulder symbol via BOULDER option
blessed scroll of detect food provides you with a one time ability to 
	recognize food that may be harmful to you
wizard mode WIZKIT config file option added to ease adding items to 
	starting inventory for a debug session
helping a sleeping/frozen monster from a trap might wake/unfreeze monster
if the hero comes upon an obviously trapped monster the trap is considered seen
thrown weapons that hit are now subject to passive damage
locomotion-specific use of words, rather than just using "stagger"
if you come upon a physically trapped, visible monster, you see the trap
	too, without searching for it
allow looking and pickup inside monster's stomach or interior when swallowed
add body_part(STOMACH)
pets like tame nymphs, et al, now only steal non-cursed items
monks usually get a spellbook rather than a weapon when crowned
blessed gold detection now detects anything made of gold, not just 
	coins, including candelabrum and gold rings
new T-shirt messages from Scott Bigham
option to get rid of resistance 'sparkle' (shieldeffect) (Scott Bigham)
option for autodig (Malcolm Ryan)
glowing Sunsword (inspired by Slashem)
msg_window option for ^P in TTY mode (Jay Tilton)
ninjas should get multishot bonus with yumi and ya (Dylan O'Donnell)
put prisoners in the Dark One's dungeon (Dylan O'Donnell)
touchstones; Archeologists start with one
add plain cloak so soldiers don't have elven cloaks
add Tom Friedetzky's BUC-patch with some alterations to the original
add wizard #poly and #levelchange (originally levelgain; Dylan O'Donnell),
add Jason Short's additional lenses use patch
add new Gnomish Mines levels from Kelly Bailey's patch
add Ken Arnold's patch to show unpaid item prices in inventory
jousting by players wielding a lance while riding
Knights start with lance rather than spear
can start game without a pet via pettype:none (Dylan O'Donnell)
allow disclose options to be more finally tuned, including being able
	to specify the default response for being prompted
debug mode SPLEVTYPE environment variable to choose specific levels from
	when there are random selections
artifacts have individual prices
new window-port preference options added, and some existing options
	moved into the window-port preferences section
made each of the end disclosure options customizable to "prompt;default no",
	"prompt;default yes", "show it without prompt", and 
	"don't show it and don't prompt"
add female role level names "Medica ossium", "Magistra", "Chevaliere", "Dame"
more feedback about skill advancement from #enhance command
USER_SOUNDS compilation option to enable use of SOUND and SOUNDDIR variables
	in the config file for user-specified sound clips for
	user-specified, regex-based message patterns
resistance does not protect inventory from artifacts (cold vs Frost Brand,&c)
phrase the prompts for P and R commands using "put on" and "remove" as the
	actions rather than repeating W and T commands' "wear" and "take off"
dipping candles, et al, into burning potions lights them


Platform- and/or Interface-Specific New Features
------------------------------------------------
amiga: screenmode requester
amiga: 16 color font mode
mac: command-key shortcuts in the player selection dialog
vms: default compiler configuration in sys/vms/Makefile.* switched to DEC C
win32: new graphical port contribution by Alex Kompel




$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.334 $ $NHDT-Date: 1524689548 2018/04/25 20:52:28 $

General Fixes and Modified Features
-----------------------------------
prevent panic() obj_not_free when pushing a boulder over a landmine
there was no feedback when successfully hitting shock resistant monsters
	with Mjollnir via hand-to-hand attack
unbought single-bite food eaten in shops was not billed properly
charge for shop contents inside "no charge" containers
add wishing for "nothing" and genociding "none" to the conduct section
	of the Guidebook
allow both wishing and genocide to accept either "none" or "nothing" when
	the player wants to decline
left word in format string in get_wet() causing "The spellbook fadefades"
two bad wizkit items in a row shouldn't make the user hit space many times
kicking thrones no longer loosens rocks
wall symbol not replaced when digging while blind and levitating
increment FQN_NUMBUF from 2 to 3 to prevent premature reuse of a buffer
	that caused a level creation error to be reported as a lock file error
print regular death message when leashed, mounted steed dies of starvation
fix more funny messages, new and old
restore the behavior of bumping into closed doors when moving while impaired
fix iron ball cases that could put the chain in solid rock
discovering a mimic on a closed door location should not unblock the location
don't drop corpse when a monster kills another monster on an inaccessible
	location (i.e. behave like xkilled behaves)
half-physical-damage from gas spore explosion should only affect you
Sunsword didn't stop glowing when hero killed a monster wielding it
mimics caught in explosions with messages printed about them are discovered
let lev_comp and dgn_comp accept optional carriage return character prior to
	the terminating newline in special level and dungeon description files
Wizard of Yendor will start harassing you after the invocation if you've
	managed to get that far without ever killing him
characters polymorphed into centaurs can't wear boots
if an unknown rolling boulder trap kills a monster, you shouldn't be a murderer
touchstone entry in data.base
specific message for engraving headstone with wand of digging
wielded/quivered chained ball should be unwielded when thrown
polymorphing into a form that cannot twoweapon should immediately disable
	twoweapon mode; likewise when reverting from a monster form which
	can use two weapons to a normal form which can't
taking partial count of merged objects from a container while your pack
	was full split the object and did not re-merge
animal_parts are not always appropriate for ravens
prevent panic if tombstone window cannot be created
clarify travel command behavior in the Guidebook
touch_artifact checks needed when snagging w/bullwhip and stealing
cannot trip over submerged objects if you're water walking
wand of striking was not identified if it activated a statue trap
cannot sacrifice while you're swallowed
player polymorphed into an eel cannot drown breathless/amphibious monsters
avoid dmonsfree impossible message due to migrating a dead monster via
	mhurtle causing the monster to end up in a hole or other trap
avoid temporary disappearing Burdened message due to updating status line
	midway thru in_container
don't credit player's wisdom when makelevel creates random Elbereth engravings
reduce insect/monster creation from monster spells and limit chain summons
avoid "couldn't place lregion type 5" warning when arriving at Plane of Fire
avoid crash due to delayed poly or were change no longer being valid
ensure that Priest's ability to recognize B/U/C is considered in B/U/C menus
can't push boulders through iron bars; traps can't roll such through either;
	likewise for objects thrown by monsters
thrown objects susceptible to breaking might do so when they hit iron bars
assorted monsters can pass through iron bars; ditto for polymorphed character
attempting to dig iron bars will wake nearby monsters instead of yielding
	"you swing your pick-axe through thin air"
autodig won't accept iron bars as candidate location
allow knight to retaliate for all thefts except those "you gladly hand over..."
randomize starting position on goal level for M, P, and S quests
prevent the Wizard of Yendor from displacing the high priest of Moloch out of
	the Sanctum's temple
ATR_BOLD on spell menu header
travel command should restrict its shortest paths to areas of the map the
	hero knows about or might reasonably guess
non-altar prayer should limit god action, not maximize it
potions of acid explode, not dilute, so make water_damage behave this way
lookat monster notes if you see monster is trapped
don't crash when angry shopkeeper re-enters the shop and you pick up something
monsters with WAITFORU strategy should act if successfully attacked by
	non-damaging attacks (e.g. seduction, rust damage)
don't summon kops if credit covers cost of unpaid goods taken out of shop
update swallowed display immediately if an engulfing monster polymorphs
	into another engulfing monster
undo xname FAKE_AMULET_OF_YENDOR AD_DRIN check, the_unique_obj checks this case
axes should chop trees; picks shouldn't
chance to aim grappling hook when skilled or better
level limit of monsters like naga hatchlings should be high enough to grow up
scroll of enchant weapon will become discovered when read in some cases
don't crash when using lookat on a boulder an BOULDER sym is unique
attaching a single candle to fill candelabrum's last slot gave message with
	poor grammar: "The candelabrum now has seven candle attached."
vault guards won't ask who you are if you're unconscious or paralyzed
monsters should not repeatedly try to teleport on noteleport levels
crocodiles legs are not designed for kicking open doors, chests, et al.
walls of one of the luckstone locations in minend-3 were diggable
minetn-6 could place downstairs in a cut-off location
corpses in bones files don't retain their role characteristic
boulder was not displayed if blind and discovered with a monster known via
	ESP behind it
don't claim that statue comes to life if the monster it turns into is invisible
fix goodpos() so worm segments don't get placed on top of each other (causing
	a possible display problem if the worm is cut in two)
fix fountain noises on some special levels (castle, valk home, various mines)
disallow mounting a trapped steed to avoid inappropriate trap effects
#chat with meditating monster will rouse it
suppress redundant message when stoning effect transforms a golem
clear worn bits of any object grabbed by shopkeeper to avoid extract_nobj panic
looting any container on a location should suppress looting nearby monsters
give more specific message when forbidden role attempts to use twoweapon mode
avoid double billing if #loot causes a shop's bag of holding to explode
when polymorphed, player killing a paper or straw golem via fire damage
	would kill the golem twice, resulting in an impossible error
usually stop mimicing if you polymorph while using #monster mimic capability
under !GOLDOBJ, gold shouldn't disappear if you try to throw it at yourself
under !GOLDOBJ, remove temp gold from inventory during restore
Staff of Aesculapius did not always cure sliming
correct singularization of fungi, liches, vortices
prevent "remove_object: obj not on floor" panic for iron ball placement if
	riding while punished leads to a fall off steed when changing levels
specifying -D (or -X) to enter explore mode while restarting from a save
	file was lost in the restore process
fix crash when using lookat on an known invisible monster with monster syms set
prevent getting stuck in infinite loop when using wizard mode #levelchange
	command to reduce level while having level-drain resistance
naming an already wielded elven dagger "Sting" activates warning against orcs
naming either of the wielded weapons unintentionally ends two-weapon combat
Various nemesis monsters must resist stoning so their death messages make sense
don't call DEBUG impossible in rn2 when a level 0 monster tries to cast a spell
GOLDOBJ: don't call money2mon with 0 zero when killed by shopkeeper
headstone writing was using the adjective "weird" when engraving with a wand 
	of digging.
don't report "you were riding" if you die as a result of dismounting
allow #untrapping of chests that are co-located with floor traps and hero
unmap "I" symbols when searching while blind and levitating
monsters that are frozen or sleeping cannot be grateful for untrapping
grammar of blessed-detection eating warning messages when eating 1 of N objects
message for charging for items lost in a cursed magic bag wasn't always shown
dropping gold on an altar printed no message and didn't change gnostic conduct
don't allow cursed daggers thrown by monsters to go thru closed doors
hero polymorphed into an exploding monster should explode when attacking
	thin air, just like the monster itself
don't mark holes/trapdoors as seen if you levitate over them while blind
player polymorphed as rust monster would lose gold in inventory by
	attempting to eat it, even though the eat failed
no messages were printed when dowaterdemon or dowaternymph failed to create
	a monster doe to the G_GONE check
knights should be able to avenge attacks from covetous monsters
eating various rotten food items would not break vegan/vegetarian conduct
unaligned special levels should inherit alignment from the dungeon
Samurai quest was missing several doors
Cancelled while polymorphed and Unchanging should provide feedback
stone to flesh on a statue with contents would lose the contents if a
	monster was on the same location as the statue
steed movement would use your speed if walking step by step
kicking a known, unseen monster would sometimes leave behind an extra I symbol
applying a lance against a long worm could cause an impossible
a knight applying a lance did not do a caitiff check
blessed gain level when already at level 30 won't reduce experience points
keep counting spell skill exercise even after expert status is reached
when a fountain dries up or a throne vanishes, make sure it really happens
allow player to name polymorph potion if nothing seems to happen
avoid crash when drinking a potion causes the hero to float up over a fire
	trap, for example, which might try to destroy the in-use potion
in some situations, if hero stood still, a hostile dwarf would switch back
	and forth between weapon and pick-axe and never move
uncontrolled teleports did not handle leashed pets
minetown fountain warnings shouldn't prevent finding gems/coins in fountain
order of container and objects was different for mazelike and roomfilled levels
minetown guards only enforce town rules inside the town proper
electric damage heals hero polymorphed into flesh golem rather than iron golem
fix bug preventing wishing for bear traps (not beartrap objects) in debug mode
be notified about cessation of hallucinations even if blind and the time
when using '/' to examine multiple map items in succession, don't mislabel
	some with "or a splash of venom" after having looked at a '.' item
martial arts kick that knocks a monster into a trap would result in warning
	"dmonsfree: 1 removed doesn't match 2 pending" if the trap was fatal
if you can't see or sense a monster when it dies, don't set dknown on corpse
effect of wearing or removing the Eyes of the Overworld took effect on the
	next move, but should take effect immediately.
dragon scale mail is magic armor
invoking or applying an artifact must pass a touch_artifact check
document 'D'rop BUCX behavior in the Guidebook
remove levitation boots over a portal, the portal teleport is delayed until
	 your next command is typed.
armor vs cursed two-handed weapon anomalies: with 'T', couldn't remove armor,
	but with 'A', could remove it, and with 'W', could put it on
don't print ape data.base description for other words that end in "ape"
prevent crash after animating a statue via stone_to_flesh by avoiding use
	of the obj in newsym() after it was deleted
print "magic spreads" message when eating ring of increase damage, etc.
grammar tid: "The looking glass miss the <monster>."
fix wishing for "looking glass" and "<color> glass"
Archeologists suffer same alignment penalty for statue destruction by
	stone_to_flesh as they do by other means of statue destruction
being unable to see a vault guard doesn't prevent him from arriving
in town, secret doors should be called "wall", not "fountain"
in town, watch should not allow trees to be cut down
cancel chat direction cancels the chat
prevent "the mimic looks better" on an unrecognized mimic hit with
	healing spell
after forcefighting a concealed lurker, the lurker wouldn't fight back
when polymorphed into a hider, cease hiding during level changes
let mind flayer grow up into master mind flayer; also giant/sewer rat and
	cave/large spider
engulfing green slime as a purple worm was causing stoning not sliming
zero entries in DUNGEON, MONSTERS, et al, of config file are now treated
	as preserving the default rather than being ignored
enlightenment: don't misreport polymorphed lycanthrope as "in beast form"
remove TIMED_DELAY from the features checked for version compatibility
rolling boulder hitting monster stuck in pit should stop even when mon survives
don't see chest trap gas colors while Blind
adjust fruit name in potion juice messages if it has the form "foo of bar"
wielded camera passes harmlessly through shade
reading spellbooks while confused should allow tearing the book
Breaking wand of digging dug through rock which should be undiggable.
Breaking wand of digging near shop walls wouldn't anger the shopkeeper
Shop walls wouldn't be restored if there were pits in the way.
If there were a hole outside a shop, you could kick stuff out of the door
	into the hole without the shopkeeper noticing.
curing hallucination while wielding Grayswandir should print a message
removing unowned pick-axe from container in shop gave inappropriate message
don't let monster end up with more current HP than max HP after life drain
make sure that missing file trickery in wizard mode which is discovered during
	level change doesn't try to keep going after discarding current level
contribution by Adam Wozniak adds several const & changes some char* to char[]
fix impossible when hitting/jousting a monster causes it to be killed twice
fix a GOLDOBJ crash/hang in take_gold() that could be triggered by reading a
	cursed spellbook, or by sitting on a throne
kicking a tree could produce 0 to 4 killer bees but it should have been 1 to 5
mounting a steed allowed hero to make moves that would otherwise be disallowed
	including mounting diagonally in a shop doorway
monsters lose intrinsic speed when pertrified
if you have converted, the quest leader banishes you instead of asking you
	to come back later, and tells you that you won't succeed without Bell
don't state that "you narrowly avoid losing all chance" message if you try
	to put on a helm of opposite alignment in the quest after converting
fix enlightenment feedback for bonus or penalty on damage and chance to hit
effects of purple worms consuming special monsters is now more consistent
	across eating, digesting and dropped corpses while engulfed
avoid "you finish disrobing" when disarming via the 'A' command
make sure corpses and statues which remember monster attributes don't keep
	ones that were conferred by no longer worn items (mainly speed boots)
elevate the trouble priority of any cursed item which is preventing removal
	of a ring of levitation
starving pets will eat more aggressively
when a pet starves to death, say so instead of just "Fido dies."
starved pet raised from dead shouldn't immediately starve again
skilled spell of detected treasure wasn't acting like blessed potion of
	object detection (from Roderick Schertler)
fix end of game attribute disclosure for levitation negated by sink
kicking a box embedded in a wall will knock it free rather than bust it open
stop running or travelling if the vibrating square message is triggered
show correct gender in ^X display when polymorphed into non-humanoid form
for wizard and explore modes, skip second screen of ^X output when first
	screen is cancelled by ESC
for wizard mode, override confusion when using ^F to reveal map
polyself into minotaur causes hard headgear to fall off
with multiple leashes in use, 2nd had 50/50 chance of having unbounded length
GOLDOBJ: coins aren't subject to curses/blesses and don't need identification
can no longer activate a figurine while engulfed
can't use figurines to get too many erinyes or Nazgul
include currently wielded weapon among the list of likely choices for 'w'
likewise for currently quivered ammo among choices for 'Q'
only include unknown gems as likely choices when applying known touchstone
prevent mbodypart() from returning animal parts for lights
removing a ring might relearn what it is after amnesia
sleeping shopkeeper shouldn't talk to digging player
give more specific feedback when dipping unicorn horns into potions
can see self via infravision or ESP or monster detection when invisible
class genocide that killed polymorphed self while `Unchanging' reported
	incomplete cause of death and possibly left rest of class in bones
class genocide of @ by human or elf character polymorphed into non-@ gave
	"you feel dead inside" message twice
unskilled rider who can't reach items on floor also can't dip into moat or
	pool from flying steed
when summoning nasty monsters, use new monster's type to decide if they can
	be placed on boulders, et al, not the summoning monster's type
don't display the "intones:" prefix when !soundok since the message suffix
	won't be displayed in this case
document "sound" option in Guidebook
destroy traps that are buried by boulders dropped in water
renamed debug commands: light sources -> lightsources,
	monpoly_control -> monpolycontrol, poly -> polyself
detect attempt to swap places with big pet through narrow opening
stinking clouds in bones files do not get their ttl set reasonably
stinking clouds in bones files may incorrectly set player_inside
breaking wand of digging on a drawbridge shouldn't dig/hole a pit in the bridge
avoid mimicking gold when the character has the Unchanging attribute
handle polearm wielded prior to mounting the same as one wielded while mounted,
	and one still used after dismounting like one wielded while not mounted
non-lawful angels don't chat using lawful messages and shouldn't summon
	lawful help
cancelled yellow lights should not explode against other monsters, as well as
	not exploding against you
becoming confused, eg from nausia, while reading a spellbook should result
	in the usual confusion effects
teleports should not be controlled if you're stunned, confusion should have
	some effect on your ability to control level teleports
vault wall repair should remove traps subsequently created at affected spots
don't reveal deity name when a high priest(ess) gives temple entry greeting
for ordinary remove curse, don't uncurse quivered object unless it is suitable
	to be used as a quivered weapon (ammo or missile)
salamanders have no legs and cannot ride
all objects carried by a monster who's hit by a polymorph zap are protected
	from that zap, not just worn armor which falls off due to shape change
sparkle option for display effects was ignored on explosions
level teleport while on a sleeping steed caused panic and possible crash
breaking wand of digging causing a shopkeeper to fall left unpaid items unpaid
use get_adjacent_loc() rather than getdir() directly for some things where
	you want to ensure valid adjacent coordinates are returned
minor experience calculation tweaks
level telporting out of the dungeon while carrying unpaid shop goods would
	trigger "not on any bill" warnings during final inventory disclosure
only hard helmets protect against falling piercers
don't crash teleporting out of a monster while engulfed, punished but not
	carrying the ball
web breaking should consider steed strength and other characteristics
various missing or inappropriate "killed by" death messages
second attack for two-weapon combat will miss if first knocks target away
jousting effect no longer occurs every time riding character hits with lance
skeletons should be able to wear the armor they're created with
bouncing zaps should not bounce around the edge of closed doors
mimics that are detected but not seen should not display as their mimiced
	form when the detection ends
not all cavemen are human, so avoid using human in quest messages
tengu is singular and plural, some rumors were incorrect
don't let leader or nemesis be renamed
non-moving monster are not affected by liquid
'A' command wouldn't remove cursed item from quiver or alternate weapon slot
'A' command behaved differently depending on menustyle when non-weapons were
	present in the quiver or alternate weapon inventory slots
most cases of the hero dropping things need to check for dropping on an altar
zapping undiggable trees with wand or spell of dig gave feedback about rock
being able to see invisible shouldn't cause you to not notice when potion
	or spell of invisibility wears off
can't successfully bribe a demon who happens to be carrying the Amulet
while over water, killing a monster that had engulfed you does not result
	in the usual water effects
removing a ring of levitation while engulfed should not invoke spoteffects
feedback from invoking Orb of Detection was sometimes misleading or wrong
ranger quest artifact (Longbow of Diana) confers reflection when wielded by
	monsters like it does for the player
avoid discrepancies in size and associated armor-wearing ability between 
	wizard gnome player and same player polymorphed into gnomish wizard 
	by forcing newman() if poly-target matches your_race()
add missing data.base entries for caveman, healer, monk, priest, and samurai
allow "grey spellbook" as alternative spelling of "gray spellbook"
handle attacks by cancelled monsters more consistently
armor worn by monsters might negate some magic attacks like it does for hero
give feedback and discovery when visible monster puts on cloak of invisibility
really add artifacts inside carried containers to final score (3.3.1 fix
	displayed them them but didn't include any points for them)
drop alternate weapon to terminate twoweapon combat if the alternate 
	weapon gets cursed
restore monster creation sanity checks to wizard mode ^G command
prevent recoil from hurtling you through narrow areas that you wouldn't
	be able to move through intentionally
grammar in cause of death when killed by slipping while mounting named steed
ensure `m'enu is still an available traditional menu choice for 
	menu-upon-request even when there is only one class of object present
engraving on headstone will appropriately dull your weapon
certain types of golems should not "catch fire" so adjust the messages
no longer need to manually examine inventory after regaining sight in order
	to give a type name to an object picked up while blind
when adding an object to inventory, it is possible for it to becomed both
	wielded and quivered if it merges with weapon and autoquiver is enabled
include rocks as likely candidates for quivering if alternate weapon is a sling
Asmodeus fails an is_armed() check, so code in m_initweap() to give him wands 
	of fire and cold never got called; move the code to m_initinv()
#rub would wield the target tool even when already being worn as eyewear
monks lose their to-hit bonus for bare-handed attacking if wearing a shield
fix case on leading character in "Crunched in the head..." in ball.c
using travel mode to move next to a known trap and then trying to step onto
	that trap required an extra step; the first one ended up as a no-op
punished with ball and chain on the same floor square as a trapped chest
	when it exploded resulted in panic "remove_object: obj not on floor"
see_monsters() wasn't called when you lost the innate warning intrinsic due
	to level loss
xorns sink if the drawbridge they're standing on is raised
applying figurines to an adjacent spot over water does drowning checks
fix sequencing of Magicbane's hit messages
avoid buffer overflow from long or too many -s params
wake up first if trying to crawl out of water while asleep
while waiting, don't try to change into were form when already in were form
steed should remember traps encountered while mounted
killing shopkeeper by throwing unpaid things would result in
	"item not on bill" impossible error
choking pet to death with cursed leash incurs various pet-killing penalties
wielding Werebane prevents catching lycanthropy via monster attack (but not
	via eating, nor does it cure an existing case)
character inflicted with lycanthropy is vulnerable to Werebane when in
	human/elf/&c form as well as when in beast form
shopkeeper could get angry without remembering the customer name
any object held by ghost during recorporealization would cease to exist
	including the Amulet of Yendor
harassing monsters will be less likely to teleport to your location while
	they're running away from you
randomize warning symbols during hallucination


Platform- and/or Interface-Specific Fixes
-----------------------------------------
wince: added Windows CE port from Alex Kompel
win32: win32 build no longer defines MICRO
win32: allow error save files to be generated
win32: strip illegal file name characters from plname and replace with '_'
win32: don't let recover build a save file out of level files belonging 
	to an active NetHack.exe or NetHackw.exe process
win32,winCE: SELF_RECOVER to let NetHack itself recover aborted games
win32gui: make error() work; it was essentially non-operative in 3.4.0
win32gui: fix alignment of columns in menu windows
win32gui: Window menu File|Save worked during #quit disclosure processing
win32gui: make mswin_yn_function() case insensitive like the tty version
win32gui: In msg window, gray out lines that are old and concatenate msgs
win32gui: --More-- prompt if there are more messages than can fit this turn
win32gui: flicker reduction because clear_nhwindow no longer redraws window
win32gui: A caret bug was fixed
win32gui: fix bug that caused two lines too many to be drawn on each paint
win32gui: last line no longer highlighted
win32gui: reduce the number of popups and support for !popup
win32tty: honour the use_inverse option and default to ATR_BOLD if disabled
win32tty: respond only to mouse clicks not mouse movement
win32tty: allow ^C to abort the game at the "Who are you?" prompt
win32tty: fix truncated score list
win32tty: prevent ALT+CTRL from sending NUL to core with the meta bit set
win32tty: international keyboard handling improved by letting ToAscii()
	generate input char based on VK and state of shift and caps lock
Gnome: add support for non-square tiles
Gnome: destroy main game windows correctly
Gnome: Dylan Alex Simon's port of KDE-style worn window
Gnome: Dylan Alex Simon's port of KDE-style hero cursor color
Gnome/Linux: more portable getres*id workaround
X11: restore support for non-square tiles when USE_XPM is defined
X11: getlin dialog got steadily narrower each time it was used
msdos: compiling without NO_TERMS resulted in a link-time error
msdos: reworked Makefile.GCC to get rid of need to duplicate source files
msdos,win32: stop doing chdir when NOCWD_ASSUMPTIONS is defined
tty: remove #define DEBUG that forced debug behavior in production builds
tty: correctly handle an empty TERM environment variable
tty: don't lose messages when ESC has canceled their display
tty: clear topl after pickup_burden prompt
tty: support terms where turning off inverse video turns off color too
tty: object selection at --More-- prompt after '?' didn't work anymore
tty: ext command autocomplete now lets you enter auto-completed characters
non-tty: silently ignore tty msg_window option to allow sharing of config file
unix: install recover command into GAMEDIR by default
vms: prevent error() from indirectly triggering hangup save during forced exit


General New Features
--------------------
lootabc option
runmode option
showrace option
travel option
cmdassist option to provide additional error feedback for some commands
mouse_support wincap option
scroll_amount wincap option to adjust how many cells to scroll at scroll_margin
debug mode: #panic routine to test panic() and panic save file generation
a new PANICLOG optional file to log the reason for panic and impossible messages
added validate_prefix_locations() for early directory prefix validation
fire traps are particularly bad for paper and straw golems
cream pies can be 'a'pplied to cause direct temporary blindness
eating newt corpse or tin of same can boost magical energy (Malcolm Ryan)
applying a eucalyptus leaf produces a whistle effect (Malcolm Ryan)
hobbits can wear elven ring mails
eating mimics now has an hallucination effect
prefix pickup command with 'm' to force menu of all objects present
provide feedback which states the correct command when players try to use 
	'R' or 'P' for armour, or use 'W' or 'T' for accessories
optional #portdebug wizard mode command to invoke port-specific debug routines



$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.135 $ $NHDT-Date: 1524689548 2018/04/25 20:52:28 $

General Fixes and Modified Features
-----------------------------------
avoid panic when secondary weapon is cursed while generating bones level
don't crash when applying a figurine, candle, or bell that gets used up
grammar bits
two invisible monsters hitting one another should not be visible
if only one monster in a monster-vs-monster fight is visible, show an I symbol
	for the other one whether it is an attacker or defender
display "It" and not "The invisible <pet>" when an invisible pet eats food.
include a hint about expected input when prompting for musical notes
don't report "program initialization failed" if a panic occurs after the
	game is over
include statue contents in end of game inventory disclosure
treat handlessness as a major problem when deciding prayer outcome
perform artifact touch checks when putting on accessories
missing noun in message when horns pierce through your helmet
don't use hcolor() for trapped chest gases when you aren't hallucinating
the age of a potion of oil from a bones file wasn't being handled correctly
putting gold in a container on the shop floor wasn't credited the way
	gold already in the container when dropped was credited
avoid integer division rounding error when calculating carrying capacity
don't lock/unlock a door while in a pit, to be consistent with door opening
infravision should not make invisible player "visible" (it doesn't for monsters)
Perseus statue should always be male
charge correctly when breaking multiple objects with the same zap, avoids
	a dopay: not to shopkeeper impossible
clean up funny lighting on the healer locate level
allow all tame monsters that eat to consider food thrown to them
the screen display wasn't always up to date after map topology changes
jumping over a sokobon pit would result in the player next to, not in, the pit
don't let arrow, rock or dart traps provide an infinite number of objects
make enhanced ammo harder to break to make lesser number last longer
dropping from height or throwing a normal container may damage contents
some Magicbane messages treated "erinys" as plural
initialize artifacts before processing $WIZKIT
clean up inconsistency between various places quaff is documented
is_damageable was using is_rottable incorrectly
charge for use of an unpaid tinning kit
avoid impossible when water freezes while hero is hiding under water
avoid impossible after eating the object the hero is hiding under
failed attempt to eat floor gold while polymorphed would lose the gold
running that stops for closed doors should stop at mimics mimicking closed doors
allow wishing for magenta potions (ignoring the rank name 'mage')
fix an uninitialized memory access in non-quick dolookup
fix were changing message that wasn't being displayed
immediate encumbrance feedback when removing gauntlets of power
make deliberately flying down the Castle's trap doors consistent with falling
give more explicit feedback for exploding bag of holding
help display for "list of game options" misformats runmode and scroll_amount
pit created by land mine explosion doesn't start out concealed
update map display sooner when pushed boulder triggers land mine explosion
prevent several QBUFSZ sized buffers from overflowing and triggering fatal 
	errors inside window port prompt routines
make sure that leashed monsters are released prior to shopkeeper inheriting
	dead character's inventory
attaching long named candle to long named candelabrum caused buffer overflow
when polymorhed, only hand/weapon attack on disenchanter should result in
	damage to weapon, gloves, etc.
killer should say "the" when choking on unique monster's corpse
allow applying polearm on monster you can see via infravision
killer reason shouldn't use "a" or "an" prefix for multiple projectiles
	scattered by land mine explosion
killer reason for named missile could end up with garbage instead of the name
make killer reason for various poisioning deaths be more consistent
poison missiles were unintentionally more likely to inflict "deadly poison"
	than in pre-3.4.1 releases
provide feedback when going invisible after eating a stalker
killer on tombstone had no prefix for starvation/exhaustion case
ensure proper message ordering for boulder trap messages
clean up data set by join_map that is overlaid by MAPs on special levels
clarify disclose option default in opthelp, and support "all" as old help said
add more calls to update_inventory as the inventory changes
don't charge for items picked up from monster's interior while swallowed
choking while eating non-food always called the food "quick snack"
short swords are not throwing weapons
several sit-in-trap cases were unreachable
curse candelabrum in bones, like other similar artifacts
detecting a trap in a chest while confused should not exercise wisdom
any golem statue hit with stone-to-flesh spell animates as flesh golem
correct invalid startup gender selection
can no longer untrap floor containers during unskilled riding
can no longer easily set land mines and bear traps during unskilled riding
refine cmdassist handling for armor vs accessories
prevent monsters from level teleporting out of the quest into the main dungeon
prevent monsters from level teleporting into the Sanctum prior to invocation
"m," command sequence would let you see all objects at a location even when 
	they included a cockatrice corpse which hero was unequipped to handle
use correct pronoun for unique monsters
hostile monsters who follow you between levels won't do so if they're fleeing
options for font_size for map, menu, message, status, and text all had the 
	same description of "the size of the map font" in options.c
when dismounting by choice and unimpaired, try not to land in a known trap
when jousting a pudding into a polymorh trap, it was possible to end up
	with two of the new type of monster
don't allow polymorphed player to web over the stairs
geographical shopkeeper updates
stethoscope use should be free the first time it's use per player move
travel command caches last position to make non-mouse less painful
update pit trapped time when polymorphing to or from a monster that passes_walls
show artifact hit message which affect the monster that swallowed the hero
revived pet corpse from bones file should not be loyal to current player
finding a statue trap you are about to dig should stop your occupation
try to keep saddle at the same location as the steed corpse
never display I symbol on the mounted hero/steed location
pit digging is no longer stopped by a sleeping monster next to you
ensure mksobj() always attaches timer to corpse, even if called with init FALSE
only charge for eating one stacked tin, not all at once
add flag to makemon() to allow monster to be created adjacent to the supplied 
	coordinates if there is already a monster at the target location
stone-to-flesh of spot with multiple statues can animate more than one
use of stethoscope now deliberately impacted when hero is engulfed by whirly 
	monster but fixed so it can sometimes work on your steed there too
typos fixed in data.base
add looting freehand() check to able_to_loot() to prevent opening container
	only to be told that you can't loot anything
Schroedinger's Cat could be placed at wrong location when its box is carried
travel while polymorphed into a grid bug should not move diagonally
refine cmdassist handling for grid bugs
when casting force bolt spell while engulfed go ahead and use the engulfers 
	name in the hit message rather than "it"
a fog cloud shouldn't pummel you with debris
do not let an attached iron ball drag the hero through a location that the hero
	could not move normally
hero's appearance should change immediately after mimicing completes
avoid some uses of "it" in killer messages
avoid "singular of null?" warning for info lookup of obscure user input
there was no check for iron bars in dokick() so it defaulted to "empty space"
if you couldn't see the rat created in a sink for some reason other than
	blindness, you would get "Eek there's it in the sink."
digging a pit while stuck in the floor should always free the player
quest guardians can no longer be created via stone-to-flesh on their statue
stone-to-flesh no longer silently ignored by a statue of a unique monster
wishing for quest guardian corpse now gives a generic corpse of the species
prevent quest guardians from other classes from talking to you as if they 
	were your quest guardian
wake up shopkeeper if a shop transaction is attempted while he's immobilized 
statues created from monsters remember more monster attributes


Platform- and/or Interface-Specific Fixes
-----------------------------------------
Gnome: compilation problems on Redhat 7.2 and 8.0
unix: Makefile.utl would put OBJDIR objects in the wrong directory
vms: create an empty paniclog file during playground installation
win32tty: add subkeyvalue option to alter key values; Finnish keyboard fix
win32tty: distinguish between black/gray/white (by Quietust)
win32gui: prevent male Valkyrie and other incorrect startup settings
win32gui: allow numeric quantity count on item selection during loot
win32: some code in files.c was incorrectly assuming that a file
	descriptor return value of 0 from open() was invalid but it 
	could be valid on win32gui where stdin, stdout, stderr aren't open;
	now it correctly checks for return value < 0 from open() 
tiles: high priest tile had a couple bad pixels
tiles: bad pixels in Croesus and Yeenoghu tiles
FreeBSD: incorrect srandom declaration
unix: don't autosave if hangup occurs after game is over
linux: add example use of nroff on recent Linux distros
linux: use random() by default instead of lrand48()
OpenBSD: time() prototype and correct default Mail program
Gnome: compilation problems on Solaris
unix: better error message for .nethackrc access problems
vms: during installation, warn if dlb file creation or non-dlb playground
	setup is missing expected data files


General New Features
--------------------
debug mode level teleport menu via '?'


Platform- and/or Interface-Specific New Features
------------------------------------------------
win32tty: keystroke handlers can be dynamically loaded to assist in resolving
	internationalization issues
win32tty: add Ray Chason's code for international keyboard handling
Solaris (and other SystemV variants): TIMED_DELAY support
X11: NetHack.ad is now installed and used w/o user intervention




$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.106 $ $NHDT-Date: 1524689549 2018/04/25 20:52:29 $

General Fixes and Modified Features
-----------------------------------
monster draining the player using Stormbringer decreased monster's hitpoints
polymorphing to a flaming sphere should cure slime like other flaming monsters
grammar, spelling and other typos
wishing for student corpse yielded a valkyrie one, not an archeologist one
fix typo in bustling town down stairs declaration
you could exceed the limits on nazgul and erinys counts via bones files
fix inconsistency where you can't kick something out of a pit, but you can
	escape the pit and still pick it up; items are now assumed to be at 
	the bottom of pit
room cleanup, eg on Bustling Town, could incorrectly truncate room bounds
	for rooms that become L shared due to partial overlap with the MAP
approaching Medusa while having reflection+invisibility+esp would cause her
	to turn herself to stone if you happened to be blind at the time
Master Kaen's death message was not appropriate
missing fountain tag in minend-3
do not pacify shopkeeper when the hero enters a shop if that hero previously
	angered the shopkeeper without ever visibly entering the shop
attempting to place migrating monsters onto a monster-saturated level no
	longer triggers impossible()
open_levelfile_exclusively() was showing the return value -1 in a panic message,
	even though that was the only possible value; show errno instead
it was inappropriate to have a ghost "appear" in desecrated temple when 
	you were blind and without telepathy
accept wish for "grey spell book" not just "grey spellbook"
do not double credit when putting gold into an unpaid container
manes are nonliving
poles and grappling hook worked thru walls when wearing Eyes of the Overworld
more tweaks to fog cloud behavior
when dismounting by choice and unimpaired, try not to land on a boulder
casting stone-to-flesh on self while wielding a statue caused problems
add tab support to menu strings for control-x minimal_enlightenment()
if the monster that a statue represents is not made of flesh then don't
	allow stone_to_flesh to animate it, make a meatball instead
attempting to saddle a cockatrice while wearing gloves shouldn't stone you
kicking a closed drawbridge and dieing should not say "kicking a wall"
cannot get blessed potions from sink, remove unreachable message
couldn't insert gold into a container using full menu style if no other
	objects in inventory unless compiling with GOLDOBJ
nagas eat
always have warriors on the Valkyrie quest be female
be more consistent with sounds when dropping into water
surface() returns "bottom" when Underwater
bill for all discarded, opened tins
monsters that cannot pick things up cannot throw things either
eating an amulet of unchanging un-changes you
Vlad won't waste time trying to use wand of digging in his own tower
non-weapon iron objects should rust when dipped in fountains since
	iron weapons rust
suppress "turn to flee" message if monster is mfrozen
don't silently interrupt monster's hold on you if Levitation/Flying ends
	while over water
you could specifiy '~' with crystal ball and have it try to detect monsters, 
	but it never revealed anything; show the entire long worm now
allow a crystal ball to detect ghosts-and-shades via space key,  and display
	the results using detected_mon_to_glyph() so that they show up in 
	inverse video
allow a crystal ball to detect boulders using the user-defined boulder symbol
allow a crystal ball to detect mimics via ']'
prevent boulder option from accepting a symbol that matches a monster symbol
traveling while standing on a trap would sometime step in the wrong direction
avoid traveling into water/lava, using usual running rules
unchanging iron golem would still rehumanize in a rust trap
fix an impossible rndmonst: bad `mndx' bug
pets should not try to go after objects that they can't reach
cutting a shopkeeper polymorphed in to a long worm would generate strange
	messages and could cause a crash
reading a cursed scroll of light in a corridor wouldn't display correctly
	if lit_corridor option was disabled
barbarians can become export in short sword skill
samurai are now limited to master in martial arts skill; barbarians and
	cavemen are now limited to master in bare-handed combat skill
tweak messages when werefoo summons help
when polymorphed into a quantum mechanic, it was possible to jump into
	the water on a no teleport level and instinctively teleport
when polymorphed into a quantum mechanic on a no teleport level and swallowed,
	no feedback was given when you teleported the swallower away
allow Conflict-resistant monsters to respond to conflict attacks rather than
	sitting there and taking the attacks until they die
prefer herbivorous stone-to-flesh message when hero is a vegitarian
try even harder to avoid incorrect map display while changing levels
no "freaked" message by exploding black light, unless you really are
sleeping monster could respond to attacks by other monsters
sleeping shopkeeper responds to various events without waking
rotting corpses grammar fix
allow successful teleport to more locations on debug mode level teleport menu
trapped monster repeatedly switched between ranged and hand-to-hand weapon
silver items such as wands avoided all the silver checks in hmon_hitmon()
resuming an interrupted 'A' command could cause crash if pending worn item(s)
	were stolen or destroyed
resuming interrupted 'A' sometimes ended with "You finished disrobing" twice
when you're asleep you shouldn't "notice" monsters that have become undetected
must be able to reach floor in order to use stethoscope on corpse or statue
fix a few coordinate (y,y) -> (x,y) typos in apply.c, mon.c, and wizard.c
killing a long worm on a drawbridge could produce a panic
prevent "see it drop from your pack" when figurine monster becomes undetected
attempting to drop a subset of a stack of multiple cursed loadstones could
	corrupt inventory or cause a crash
"miss" message was missing for thrown or kicked gold not caught by a monster
prevent recursive impossible() and panic() calls from leading to a stack overflow
tainted meat didn't invoke cannibalism
shopkeepers can't act as porters for the Amulet
dismissed monsters can't remove special items from play


Platform- and/or Interface-Specific Fixes
-----------------------------------------
win32tty: fix visible CRLF characters during lockfile error message
win32tty: switch to low level console routines
win32tty: refrain from cursor movement until an input is pending (M. Lehotay)
win32tty: distinguish blue, bright blue, cyan, and bright cyan (Nicholas Webb)
win32tty: fix hanging problem when you ctrl-C at "Who are you?" prompt
win32gui: you couldn't specify an alignment in defaults.nh and have it stick
win32gui: allow race/gender/alignment selections beyond those specified in
	defaults.nh, while still honoring defaults.nh choices
unix: don't define errno if NHSTDC
unix: save file permissions could be wrong in explore/debug mode
X11: avoid a possible crash when using window manger to close a player
	selection window
Gnome: add Quiver menu item, fix outdated Quit menu item
Gnome: key values on unsigned char platform could fail to compare correctly
Gnome: real extended command menu so all extended commands can be entered
Gnome: ignore interrupts to avoid infinite loop in gnome library
tty: avoid crash displaying quit inventory if inventory was already displayed
tty: use "bold" in menu heading if available and requested
tty: differentiate between default unlit and lit corridor symbols
winCE: ensure orphaned lockfile is always deleted on single-user handhelds


General New Features
--------------------
bones file compatibility info is now written into the dat/options file
extend autodig to work downwards via '>'
make attribute that is used to distinguish headings in a menu configurable
add experimental build option AUTOPICKUP_EXCEPTIONS for filtering pickup of
	items by pattern matching against their doname() description
include version number in paniclog entries
add a section on "shops and shopping" to the Guidebook


Platform- and/or Interface-Specific New Features
------------------------------------------------




$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.543 $ $NHDT-Date: 1524689549 2018/04/25 20:52:29 $

There was no NetHack 3.5.x release



$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.562 $ $NHDT-Date: 1524689549 2018/04/25 20:52:29 $

General Fixes and Modified Features
-----------------------------------
change the dreaded "Stop eating?" to "Continue eating?" with default "no"
setmangry should not be called when a monster enters a bones region
bad capitalization of msg when charging for something that catches light
missing opthelp for use_inverse
Never say "It moves only reluctantly"
expert fireball/cone of cold could not target a monster seen only with
	infravision or ESP
display "lotus juice", not "lotu juice" for the fruit juice name
only humanoid angelic minions should get/use sword and armor
paper, straw and wood golems resist cold
the options lootabc, showrace, travelcmd, and runmode are now saved
use mons[] array offsets in mnum field in save file rather than storing
	the ptr and calculating the distance from beginning of array
two-weapon combat makes two attacks instead of having one attack hit with
	each weapon
apply weapon skill to-hit bonus or penalty to bare-handed attacks
only give monk's "cumbersome armor" message when the armor penalty causes
	an attack to miss
dust vortex-induced blindness should kick in immediately when blindfold
	is removed or glop is wiped off
prayer/unicorn-horn won't fix blindness while still engulfed in a dust
	vortex since it will just return immediately
being confused and reading cursed scroll of charging drains your energy
class genocide recognizes species name as an example of the class to
	genocide (Martin Snyder)
internals: use Is_box rather than explicitly checking what it checks
fix some unreachable messages (either make then reachable or remove them)
can quiver coins when GOLDOBJ is defined
make #loot behave same for GOLDOBJ as for !GOLDOBJ
for GOLDOBJ, can pick gold up into $ when all 52 letters are in use, and
	can pick non-gold up into unused letter when gold uses one of 52 slots
grammar, spelling and other typos
keep various delayed killers separate to avoid mixed up messages
don't place randomly-placed aquatic monsters in lava on special levels
hiding monsters don't hide under cockatrice/chickatrice corpses
"sound" option renamed to "acoustics"
deafness now a full-fledged attribute
water should flow into pits from broken wand of digging and drum of earthquake
objects that fall thru trapdoors, et al, can break on impact
support engraving in blood in special level files
many instances of physical damage were not taking Half_physical_damage
	into account when reducing your hitpoints
make it possible for the code to recognize your starting pet throughout the 
	game via is_starting_pet(mon) macro
healers notice when a wand of undead turning revives a monster so the
	wand is then identified
update display if bestowed a spellbook while unable to see invisible self
use small pool of static buffers for mon_nam() and Monnam()
Acknowledge Schroedinger's cat at end of game
grammar fixes for applying stethoscope to corpses and statues
player polymorphed as a ceiling hider cannot reach the floor, but
	automatically unhide on #sit
trappers do not hide on the ceiling
fix "You hear The food ration tumbles downwards" for blinded pit dropping
silver arrows weren't causing silver damage on some silver-haters when wielded
wizard mode: avoid division by 0 crash for level teleport in the endgame if
	confusion overrides teleport control
don't #sit on an object in a pit if you're only on the precipice
fix message when pushing a boulder into a pool while riding
plural of "Nazgul" is "Nazgul" not "Nazguls"
trap messages referring to named steed were awkwardly worded when hallucination
	overrode use of the name
some actions such as eating corpses off the floor didn't check whether hero
	could reach the bottom of a pit
usmellmon() instead of "It turns into it" during monster polymorph
grammar of messages regarding eating artifacts
avoid a message about an invisible monster looking much better
player polymorphed as a xorn could not pick up items in pits
non-magical whistles do not work underwater
try to restrict whistles and musical instruments to monsters that can blow
don't display "turns to flee" message for a mimicing mimic
don't display "turns to flee" message for a monster who has just died
dipping acid in a fountain could cause an explosion but not destroy the potion
thrown potions can sometimes hit a steed's saddle
if your blindfold glows and you're not otherwise blinded, you can see it
sync default documentation of "null" option with the code
tripping over a cockatrice corpse didn't petrify, even when not wearing boots
do not call swamps on the Juiblex level "moat" when freezing or drowning;
	likewise for Plane of Water when drowning
keep score from wrapping around and becoming negative by capping it
kicked objects do not slide when on the air or water levels
added strsubst() to hacklib
be consistent with use of "removing" rather than "lifting" for encumber 
	messages associated with taking things out of a bag of holding
when a giant carrying a boulder dies in a pit, ensure that the corpse is
	buried under the filled pit
cursed scroll of destroy armor damaging cursed armor didn't adjust attributes
add passive() flag that indicates uwep was destroyed during the turn
polymorphed or shapechanged monster sometimes got erroneous hit points
when blind and levitating > shouldn't say "stairs" if player has not seen them
a slow-moving monster hidden under a rotting corpse was not immediately
	displayed when the corpse rotted away
mimic that ends up on the rogue level should not mimic a closed door
mimic should not mimic a boulder while on a pit or hole or closed door
calculate weight of corpses on special levels correctly
Sting could trigger premature display of orcs during savegame restore
Sting now glows light blue again
prevent "offering" or other words with similar ending from matching ring quote
make cleric cast lightning blind as other lightning does
change the wording slightly to use "one of " when a monster wielding 
	multiple daggers thrusts them
if you didn't see a rolling boulder fall into a pit, you only heard the sound
	of it doing so if you were blind
fire trap was triggered twice in the same turn when melting ice was involved
abandon the specialized djinn and ghost counters used for potion tuning and
	use the mvitals[].born field instead
if you were Poison_resistant, only a *blessed* potion of sickness caused
	loss of hitpoints
reviving invisible troll could appear visible until it moves
adjust some of the shop repair messages
shopkeeper removal of trap from shop doorway yields an open door instead of
	a closed one if an intact open door is present
guarantee that hostile djinn released from bottles really are hostile
handle lava when removing or losing water walking boots
fix incomplete sentence occurring when unique monster's corpse fell down stairs
fractured boulders or statues produced inconsistent object settings on the
	resulting rocks
really fix rolling boulder bug C340-18, the previous "fix" reversed the test
monster throwing greased weapon has same chance for slip/misfire as player
killing a pet by displacing it into a trap now yields experience
prevent a rolling boulder that is in motion from vanishing in bones files
ensure that a sleeping steed doesn't answer a #chat
eliminate two very minor anomalies when using Luck to adjust random numbers
destroying a worn item via dipping in burning oil would not unwear/unwield
	the item properly, possibly leading to various strange behaviors
avoid a panic splitbill when shopkeeper is trapped by the door
grammar tidbit for message given when eating tainted meat is also cannibalism
gas spores shouldn't be described as "unable to attack" while hero is praying
incorrect screen display if engulfer gets turned to stone when trying to
	swallow while hero is poly'd into cockatrice
panic on subsequent move if engulfer gets turned to stone and poly'd hero
	also has attached ball&chain
give more specific messages when dropping weapons due to slippery fingers
various helmet messages changed to distinguish between "helm" and "hat"
helmets don't protect against cockatrice eggs thrown straight up
breaking container contents in a shop didn't always charge for them
some types of shop theft of a stack of items only charged for a single one
some thefts weren't charged at all even though shopkeeper noticed
wizard mode: WIZKIT wish for own quest artifact triggered crash at startup
avoid "your steed is still eating" message when going through a magic portal
cannot drink from fountain, sink or surrounding water while swallowed
don't hallucinate anything for an exploding black light as it dies
give blindness feedback when moving into/through stinking cloud
fix case on monster name when monster reflects floating eye's gaze
monsters "shrieking in pain" from a potion didn't wake anything up
charge for reviving a shop owned corpse or reanimating a shop owned statue
filled trap doors on castle can be re-dug
message order when swapping places with a pet (e.g. into a trap), also use
	different term instead of "displace"
flyers can get out of pits more easily than non-flyers
allow use of the < command to try to exit a pit
Master of Thieves as Tourist Nemesis still had STRAT_CLOSE
co-aligned unicorns in bones could be hostile
finding "something" posing as a statue while Blind should map_invisible()
adding more candles than required to total 7 to a candelabrum which 
	already had between 1 and 6 gave an ungrammatical message
give correct message when a spellcasting monster summons other monsters
correct experience calculation for monsters that cause nonphysical damage
clean up messages when you stop levitation while riding a flying steed
monsters evading a kick on noteleport levels would cause a "teleports" message
interrupt current activity during certain stages of petrification or vomiting
warning about bad food didn't recognize tin of Medusa meat
eating tainted Medusa corpse caused food poisoning instead of petrification
avoid potential stale pointer use after magic bag explosion
nymphs and monkeys can't steal rings worn under gloves
monkeys can't steal rings worn under cursed weapon
succubi will remove hero's gloves before taking worn ring; incubi will do
	so before forcing ring to be put on
mbodypart should return forehoof, not foreclaw, for horselike monsters;
	rear paws instead of rear claws for feet of d, f, r, and owlbear;
	hand, arm, leg, foot for yeti, sasquatch, monkey, ape, carnivorous ape
further digging of an existing hole finishes in a single turn
only prefix shopkeeper names with "Mr." or "Ms." when not a personal name
account for all attacks when determining max_passive_dmg
green slime should not affect noncorporeal monsters
land mine explosion will destroy a drawbridge at same location
avoid some more buffer overflows in query buffers containing object names
avoid giving extra information about things that break out of sight
dipping in acid can erode the dipped object
avoid giving away wand type for near misses while blind
avoid excessive repetition of "monsters are aware of your presence"
monster's aggravation spell now affects meditating monsters
handle pets sooner at end-of-game to avoid message delivery anomalies
busy pet won't miss out upon ascension
fix various places that "finally finished" could be displayed after the hero
	stopped doing something other than eating
fix some cases where movement was disallowed but the hero was still conscious
after destroying drawbridge, hero could appear to be in the wall
sometimes shop items which hero is forced to buy could be sold back twice
non-empty container dropped but not sold in a tended shop and then picked up
	after that shop became untended could be sold twice in another shop
vision was not updated when polymorphing a statue into a boulder
various actions--such as enchanting--performed on an unpaid shop object
	either force the hero to buy the item (when its value is lowered) or
	increase the current bill (when its value is raised)
`I u' when carrying single unpaid item listed its cost twice
armor which auto-curses when worn by hero should do same if worn by monster
limit how high accuracy, damage, or protection can become via eating rings
when blinded hero detects a trap by touch, make sure it shows up on the map
confused remove curse will cause loss of knowledge of items' curse/bless state
with astral vision, the ";" command should only display "normal vision"
	for things that could be seen without astral vision
reanimating a statue containing gold produced double gold
probing the resulting double-gold monster caused "static object freed" panic
cursed wand might explode if used to engrave
fatal wish from magic lamp left functional magic lamp in bones data
fatal wish granted by monster left that monster in bones data
death due to dipping potion of acid into a pool left the potion in bones data
clear prompt from screen after ESC is used to abort "In what direction?"
minor interface changes for interactively manipulating autopickup exceptions
chatting with quest leader who was brought back from the dead gave warnings
becoming green slime or mimicking gold violates "never changed form" conduct
when a monster grew into a higher form which had previously been genocided,
	the message explaining its fate was only given if it was sensed via ESP
hero could still see for brief period after being blinded by potion vapors
avoid crash when thrown potion hits bars before a monster
don't give messages about seeing things happen while asleep
adjust health threshold where wounded hero will be healed by successful prayer
protect hero from mind flayer's remote mental blast during successful prayer
recognize if hero has already entered Gehennom by means other than usual route
	so that prompt can be skipped if Valley's stairs are subsequently used
once you've passed the Valley, drawbridge tune is no longer a prayer reward
fix up grammar and punctuation in variants of shopkeeper's price message
regression, bug fixed in 3.4.1 reintroduced in 3.4.3:  Sunsword continued to
	emit light after monster who was wielding got killed
weaken "farming" strategies
don't suppress corpse if you kill your own steed
fix typo in tourist quest leader's greeting
fix grammar for graveyard sounds when polymorphed
avoid divide by zero crash if Luck drops below -1 while a prayer is in progress
make hero inflicted with lycanthropy immune to level drain just like monsters
describe locomotion method accurately when flyers traverse ladders or holes
when there were multiple boulders at a location, moving one of them sometimes
	resulted in line-of-sight anomalies
unicorn can't catch gems if it is asleep or paralyzed
fix grammar when choking on gold
prevent lose-level+regain-level cycle from arbitrarily boosting HP and Pw
prevent polymorphing into "new man" at low level from magnifying HP and Pw
some messages which referred to "mirror" ought to have used "looking glass"
incubi react to mirrors
losing a level while polymorphed affects hero's current monster HP as well as
	underlying normal HP
mind flayer brain eating is subject to certain fatal targets and to cannibalism
mind flayer can't eat brains of ghost or shade
alignment of Angels was handled inconsistently
corpses of unique monsters in bones behaved incorrectly if revived or eaten
pets capable of digging could pass through walls and stone on the Rogue level
don't generate mimics pretending to be closed doors when making Rogue level
fix pluralization for "this tin smells like mother-in-laws" when hallucinating
force user-specified fruit name to be singular
avoid false matches when looking up fruit names ("grapefruit" isn't "grape")
handle pluralization of man-at-arms and singularization of men-at-arms
avoid inappropriate "the corridor disappears" when vault guard gets killed
avoid inappropriate "the guard calms down" if vault guard's magic corridor
	reaches a spot where gold is embedded in the rock
avoid having vault guard ask hero's name when hero is swallowed
assigning an artifact name is rejected on objects with similar description to
	corresponding artifact's type rather than just those of the same type
adjust feedback for gas spore explosion when hallucinating
adjust message for gas effect from chest trap if hero resists hallucination
cancelling non-shop objects in a shop's entrance would upset the shopkeeper
traps detected by scroll or crystal ball overlooked carried or buried chests
can't wish for a trapped box/chest/tin by specifying "poisoned"
grammar bit if killed by stealing a cockatrice corpse from a monster
identified touchstone can rub on gold like the data.base entry says
restore the capability of rubbing any object against known touchstone
being petrified by swallowing a cockatrice violates foodless conduct
devouring Medusa whole is fatal
tombstone's reason for death after being killed by mis-returning Mjollnir
	varied depending upon whether it was fully identified
tombstone's reason for death from kicking an object could include so much
	detail about the object that is was too verbose
several quest messages were worded inappropriately if the hero was blind
a samurai quest guardian message used "ninja" where "ronin" was intended
revive from fainting if vault guard or bribe-demanding demon approaches
tame flaming spheres and shocking spheres shouldn't pick up items
eating pet won't continue eating after becoming paralyzed or falling asleep
can hear the opening or closing of an unseen drawbridge
prevent "object lost" panic caused by accessing freed memory after worn
	non-fireproof water walking boots are destroyed by lava
stop multi-turn running, searching, or resting early if levitation ends
randomize shopkeeper names when hallucinating
fix wording for "leprechaun steals gold from between your feet" when mounted
Call command could be used to remotely identify which high priest is which
large amorphous, whirly, noncorporeal, or slithy creatures can fit through
	tight diagonal gaps despite their size
avoid "You summoned it!" for unseen monster produced by same-race offering
fix monsndx panic which happened after currently moving monster expelled
	swallowed hero onto magic trap and was made tame by its effect; taming
	no longer replaces monster
reduced message verbosity when re-entering a temple
reduced message verbosity when monster with multiple attacks missed wildly
recognize "mindflayer" as an alternative spelling for "mind flayer"
putting on a never seen ring while blinded won't make the ring a discovery
zapping a never seen wand while blinded won't make the wand a discovery
zapping an unID'd wand of teleportation at self will discover it (usually)
zapping unlocking magic at self while punished will remove attached chain
treat mattock as blunt object when forcing locks
restore capability to force locks with wielded statue
only count successful statue creations against the monster limit in sp_lev.c
don't see objects or read engraving when hero changes location (random
	teleport) or position (levitation timeout) while asleep or fainted
unseen wand of striking zapped by unseen monster became known if it hit a door
tweak knight quest messages
guidebook grammar bits
special level loader wasn't able to place random door in 1x1 room; could
	trigger divide-by-0 crash for user-developed custom levels
polymorphed spellbooks may turn blank or be too faint to read
make gender of quest leaders and nemeses consistent with data.base and
	quest messages
Orion and Norn should be giant sized
Orion, Norn, Cyclops and Lord Surtur should be able to tear webs
avoid inappropriate message when using a cursed lamp while blind
player polymorphed as a guardian naga spit the wrong kind of venom
ensure monsters cannot teleport to or be created outside nonpassable bounds
	of special levels
candles should not be fireproof
put #define for potion occupant chance and cursed wand zap chance in one place
recognize most instances where hallucinatory monster name should be treated
	as a personal name (to avoid "the Barney") instead of a description
avoid giving misleading or redundant feedback when reading scrolls
monsters could end up off the left side of the Ranger quest start level
custom arrival message for special levels could be delivered too soon
custom arrival message for special levels now supports quest text substitution
prevent scroll of charging that has already disappeared from showing in the
	picklist of things to charge
doors break instead of absorbing the blast of a broken wand of striking
worms don't have scales, krakens have tentacles, stalkers have a head
you no longer "fry to a crisp" as a water elemental
change leather spellbook to leathery; pertains to appearance, not composition
more precise probing/stethoscope feedback when engulfed
make baby long worms have lower level than full grown ones
use "your kraken" instead of "a kraken" when searching reveals a tame
	hidden monster
Magicbane should not produce "<something> are confused" message
handle antholes more sensibly when ants aren't available
avoid "Something's in the way" message with unidentified wand of locking
cancelled nurses shouldn't say "Relax, this won't hurt a bit"
check for hero location in digactualhole() before clearing u.utrap
clear any pits that the hero digs in the vault guard's temporary corridor
better handling for Fort Ludios and endgame in wizard mode's `^V ?' menu
no free lunch for gelatinous cubes eating scrolls of mail
eating gold in front of the vault guard will make the guard angry
calculate engulf time differently for non-digestion attacks than for digestion
preform autopickup and/or report on objects at the spot when a failed #untrap
	attempt causes the hero to move onto a trap's location
shattering a monster's weapon didn't work as intended for stack of N>1
thrown silver weapon hitting silver-hating poly'd hero got double silver damage
wielded silver weapon hitting silver-hating poly'd hero lacked silver message
don't reveal surface information that you can neither feel or see
if the hero or a monster is already in a pit don't have them "fall into a chasm" 
	from drum of earthquake
monsters who ate lizard corpses to cure confusion would lose intrinsic speed
monsters couldn't eat lizard corpses to cure being stunned
code handling a monster's use of potion or food to cure stoning or confusion
	was accessing freed memory after the object had been used up
properly handle destruction of equipment carried by monsters hit by
	disintegration breath; life-saving retained conferred properties of
	formerly worn items (loss of steed's saddle caused much confusion)
don't exercise or abuse wisdom when rumors get used for random graffiti
don't exercise wisdom twice for each minor oracle consultation
don't welcome the hero to Delphi if the Oracle was angered before first entry
create_object() created lizard corpses without timers and troll corpses with
	their revive timers, then changed the corpsenm field
when a potion of acid was dropped into water and exploded, nethack would
	continue to use already freed memory and later might panic or crash
when jumping over an already seen trap, use an() to get appropriate grammar
fix bad grammar when putting on not-yet-seen Eyes of the Overworld while blind
don't "walk quietly" while levitating
shopkeeper polymorphed into animal form can no longer speak
don't give attribute adjustment messages ("you feel wise") unless the current
	value actually changes
fix message handling when multiple shopkeepers are present at end of game
'C' command can't name shopkeepers or temple priests and other minions
when "of <deity>" is intentionally being suppressed, an aligned or high
	priestess would be described as an aligned or high priest
specifying role and/or race along with an invalid alignment for it/them in
	NETHACKOPTIONS or config file would yield a prompt which misleadingly
	mentioned the rejected alignment when asking player to pick alignment
temple donation can recover protection previously stolen by attrcurse attack
	even when protection amount is so big that no increment would be given
meditating monsters stop meditating when affected by something which wakes
	sleeping monsters
monsters capable of hiding can't do so when trapped or while holding you
limit recursive calls to spoteffects (poly'd hero fell into water, reverted
	to human because of it, fell into same water, then crawled out twice)
ensure that the punishment ball and chain make it into save file after being
	temporarily orphaned from the normal chains in the swallowing code
display the invisible monster glyph ('I') whenever an unseen monster forces
	poly'd hero out of hiding
charge for thrown wand that shatters into a thousand pieces in a shop
wielded light source susceptible to water gets extinguished when weapon rusts
don't discover unknown bag of tricks when monster it releases is undetected
escape the deleted trap after performing the invocation while trapped
use alternate phrasing when life drain attack affects non-living creature
bypass "wait! there's a creature hidden there" when attacking a hidden monster
	sensed by ongoing monster detection
remove makedefs.c dependency that time_t and long are the same size
terminal window set to 21 lines can cause a crash during player selection 
	menus; have bot() check for valid youmonst.data
make region ttl field a long instead of short to get rid of lint warnings
	about a possible loss of data
free storage used to hold region messages in free_region()
honor pushweapon when applying a tool or weapon causes it to become wielded
in the quest, if the locate level hasn't been reached yet, don't fall or
	randomly teleport past it
fix phrasing in monster against monster attack feedback when attacker is
	wielding stacked weapons
pushing a boulder onto a level teleporter trap could issue repeat messages
if shopkeeper or priest gets teleported while inside his shop or temple,
	give locations inside that room preference when choosing destination
don't place hero on top of monster when arriving on level which is so full
	that the monster can't be moved out of the way
tame/peaceful grabber/engulfer will release hero after conflict ends
any grabber will release hero if it moves away while confused/stunned/afraid
make changes in hallucination be reflected by changes in mimickery feedback
have to see a divine gift in order to have it become a discovery
honor the never-in-hell flag when selecting random monster type for corpses,
	eggs, figurines, and statues created in Gehennom
hero is not subject to light-based blindness while fainted from hunger
add Unaware pseudo-property to suppress various messages while unconscious
engraving while underwater should use surface() which handles that case
prevent obj_is_local panic during bones creation when splattered burning oil
	from a thrown potion of oil kills the hero
don't leave lit potion intact when splattered burning oil from broken floor
	potion kills the hero
fix region timeout detection, caused strange display of stinking cloud
	while wearing the Eyes of the Overworld
try to keep migrating monsters from escaping the wizard tower
affected monsters should always respect "Elbereth"
try harder to keep dragged chain between ball and hero
fireproof containers should not burn in lava
missile which kills engulfer will now be placed prior to hero's return to map
fix invalid pointer dereference after applying a wielded cream pie
avoid drowned in a drowning and burned by burning if life-saving is inadequate
bugles affect all monsters to some extent
nurses are affected if player is polymorphed as a cockatrice
getting a particular rotten food result can't make attempting to eat a
	corpse of one of the Riders be survivable
pad shortest rumors to improve distribution of delivered rumors
wake up sleeping steed when putting on saddle or mounting
reveal hidden monsters who change levels or are magically summoned
hero can't carry an unlimited number of boulders when poly'd into a giant
stop wielding cockatrice corpse which triggered own death followed by life-save
format various prompts to avoid "Query truncated" entries in paniclog
prevent very large number of objects in # inventory slot from causing
	buffer overflow
!fixinv config was using arbitrary characters instead of # for invent overflow
for inventory display, include cost info on hero-owned containers holding
	shop goods
shops now claim ownership of items created by using an unpaid horn of plenty
shopkeepers shouldn't refer to non-male character as "cad"
tweak levitation timeout if trap is being triggered on same turn it is to end
don't report death by petrification if cockatrice kills hero via HP loss
Riders are immune to green slime
Rider corpses can't be engulfed by gelatinous cubes
if Rider corpse revival fails, usually try again later instead of rotting away
wielding a cloak of magic resistance or gray dragon scales, or carrying one in
	alternate weapon or quiver inventory slot, conferred magic resistance
	to polymorphed hero
wielding a potion of blindness or carrying one in alternate weapon or quiver
	slot conferred resistance against light-based blindness to any hero
worn item transformed by polymorph remains worn if feasible
zapping closing or breaking magic up or down from beneath an open drawbridge's
	portcullis failed if bridge orientation was north-to-south (Valk quest)
can't dip or apply grease to a worn item that's covered by another worn item
sinking into lava didn't track passage of time properly
sinking into lava eventually burns away slime; sitting in it always does
after escaping lava by foot, if hero doesn't move he'll fall back in
suppress corpse from bones data if death is due to being dissolved in lava
suppress "you rise from the dead" if game ends due to be turned into slime
hero poly'd into stone golem and wielding cockatrice corpse casts stone-to-
	flesh at self to become flesh golem will revert to stone if no gloves
don't give erroneous "<mon> disappears" message for hero poly'd into quantum
	mechanic who hits engulfer while swallowed and blinded
demon lords/princes can't be summoned to the elemental or Astral planes
feedback from casting spell of protection was wrong in some situations
can't engrave on floor while inside solid rock, wall, or closed door
same-race sacrifice can't damage high altars
allow corpses on floor to be offered at high altars
allow hero to attempt to offer the Amulet at ordinary altars
shooting range for crossbow isn't affected by strength; multi-shot volley is
remove engravings at drawbridge location when it is opened, closed, or wrecked
monster killed in midst of multi-shot volley throwing/shooting might cause
	freed memory to be accessed, potentially triggering a crash
right-handed boomerang throw travels counterclockwise
can't arm bear traps or land mines on Planes of Air or Water
statues that "come to life" when trap activates shouldn't start out sleeping
shopkeepers and priests wouldn't step on graves put in their rooms by bones
can't throw if poly'd into form which lacks hands
monsters can use ranged attacks over/around boulders, same as hero
can't eat an artifact you're unable to touch
attempting to kick beyond map edge performed an out of array bounds memory
	access; symptom seen was "show_glyph: bad pos" warning when blind
attempting to engrave with an empty wand should always use a turn
don't access freed memory after engraving "wrests one last charge" from wand
a magic portal could be rendered inactive for the hero if a successful
	hangup save took place during level change; leaving the level by any
	means other than triggering the portal would reactivate it
can't drop part of a stack of N weapons welded to hero's hand
pickup still accepts m as command prefix, but now rejects F,g,G,M,numpad 5
scatter piles of kicked gold rather than move the entire pile at once
hero wasn't allowed to affix candles to the candelabrum while underwater
non-unicorn horn healing magic which cures sickness now also cures vomiting
vomiting/nauseated state is included in enlightenment feedback
vomiting countdown actually triggered the final vomit code twice
rats aren't capable of vomiting
fireproof, non-rustable weapon would be revealed as fireproof by hitting a
	rust-causing target; ditto for fixed crysknife
surviving choking while eating various foods (cockatrice egg, fortune cookie,
	wolfsbane, others) didn't carry through to those foods' side-effects
shapechangers who take on mimic or hider form will mimic or hide when feasible
avoid War message if tinning a Rider corpse fails
prevent long messages from triggering access violation or segmentation fault
	due to buffer overflow in pline()
cursed corpse wielded by a monster isn't welded to its hand or paw
fix grammar errors in samurai quest, wakarimasu ka?
fix spelling of Dr Dolittle
hero's sleep resistance shouldn't protect steed from sleeping gas trap
#jump attempt fails if mounted on sleeping steed; jumping spell still works
dropped wielded, in use leash should remain in inventory, since it's in-use
wielded, in use leash can't be snatched by whip-wielding monster
when using two weapons at once, whip-wielding monster can target either one
if normal game save file is restored via `nethack -X', restore in normal
	mode--with save file deletion--and require confirmation ala 'X'
	command to make deferred switch into explore mode
can't #force floor item while engulfed, levitating, or unskilled riding
can't lock or unlock doors while engulfed
if hero or monster standing on opened drawbridge survives its destruction,
	fall into water or lava instead of remaining on top
don't give a speed change message when an immobile monster is seen to be hit
	by a wand of speed or slow monster
when shopkeeper "gratefully inherits possessions" of hero who dies in shop
	doorway without owing the shop, move those items inside shop for bones
dying in a shop while wielding two weapons could cause "Setworn: mask" warning
make score file processing more bullet proof to avoid potential security issue
stethoscope applied to hiding mimic will bring it out of hiding
rephrase "<artifact> evades your grasp" message if artifact is already held
artifacts which subsequently evade your grasp/control after already being
	worn or wielded become unworn/unwielded
towel equipped in weapon, alternate weapon, or quiver slot can be applied
lit candle or potion of oil which burned out while equipped would leave stale
	weapon/alternate-weapon/quiver pointer that could cause panic or crash
wielded/worn figurine which auto-transformed had same stale pointer bug
likewise with casting stone-to-flesh on self for figurine of non-veggy monst
format names of not yet id'd artifacts such that obj type shows for non-weapons
hero with lycanthropy is vulnerable to silver in both human and beast form
changing alignment or shape triggers a check for equipment evading hero's grasp
passive fire effects can damage attackers' weapons
make quest leader and nemesis be unlikely to be affected by traps
wielded bow shouldn't affect outcome of kicked arrows
ranged polearm hit can divide puddings and can use confuse monster effect
charge for kicked shop-owned food if it gets used up taming a monster
give better feedback when thrown shop-owned food gets used up taming a monster
effect of negative AC on damage received was calculated differently than
	normal when deciding whether hero poly'd into pudding would split
use a more precise jumping path for far, non-straight line destinations
unicorn horn produced by revived monster will polymorph as if non-magic
stone-to-flesh on any golem statue or golem figurine creates flesh golem
stone-to-flesh which activates shop-owned figurine entails shop charges
make giants be less likely to be randomly generated in Sokoban
bear traps dish out some damage on initial entrapment
bear traps and webs are harmless to water elementals
hero with polymorph control and inflicted with lycanthropy can specify own
	werecritter or human werecritter monster types as polymorph target
hero undergoing semi-controlled polymorph won't also undergo sex change
when doppelgangers taking on new shape don't specifically pick nasty monster
	or role monster, bias the random form towards humanoid
salamanders can use green slime corpses to cure themselves of petrification
increase damage bonus applies when kicking while polymorphed into a monster
	form which has a kicking attack, just like for other kicks
feedback about summoned monsters may use singular when it should use plural
if magically removing steed's saddle is fatal, don't leave it saddled in bones
charging prompt used wrong criteria when deciding whether to list rings
rogue's backstab bonus doesn't apply for throwing attacks
hiding monsters who are unhidden when hero leaves a level can hide upon return
touching a pile of objects while blind affects hero even when the pile is
	big enough to give "there are many objects here" and not list them
explosion while engulfed only affects engulfer and hero, not adjacent monsters
eliminate case-sensitivity when converting words from singular to plural and
	vice versa, so some failing wishes like "Gauntlets of Power" now work
breath attack directed at self by poly'd hero always hits
an orc (or gnome) will respond to #chat if hero is also an orc (or gnome)
override non-silver vs shades for artifacts which deal extra damage to undead
assorted mirror fixes--mainly visibility issues
kicking at "empty space" has side-effects so should use current turn
using weapon to kill tame engulfer from inside triggered "placing defunct
	monster onto map?" warning
some monsters can't be strangled; self-polymorph can stop/restart strangulation
nymphs could steal carried boulders
amnesia of object discoveries would never forget the very last one
re-adjust gem generation probabilities when revisiting existing dungeon levels
kick evasion shouldn't move monsters through walls
kick evasion and jousting/staggering blows shouldn't move grid bugs diagonally
#untrap didn't check whether hero could reach the ground
digging/chopping a closed drawbridge message mentioned digging a "wall"
attacking via applied polearm now honors the "confirm" option
engulfer under influence of conflict or confusion could swallow monster at
	water/lava/trap spot and not be affected by destination til next move
unicorn horn restoration no longer overrides sustain ability characteristic
hider monster revived from corpse would start out hidden (even if own corpse
	was only object around to hide under)
fix sequencing issues with dropping #invoked Heart of Ahriman
applying an unpaid stack of potions of oil forced hero to buy all of them
	instead of just the one which got split off and lit
sometimes when hero is forced to buy an unpaid shop item its price changed
monster could attack with a polearm even after attempt to wield that failed
sometimes got "you trip over it" after intervening messages following the
	one which described "it"
wizard mode: WIZKIT wishes could overflow inventory's 52 slots
code controlling item drops by small monsters still used pre-3.1.0 weight
monsters who want the Amulet won't attack the Wizard to try to get it
when loading bones files, censor suspect characters from player-supplied
	strings such as pet and fruit names
opening or closing the castle drawbridge via music consumes a turn
can't swap places with tame grid bug when moving diagonally
can't move diagonally through a long worm's body (can still fight that way)
require confirmation to read a scroll of mail if doing so will be the first
	violation of illiteracy conduct
could get "suddenly you cannot see the <mon>" while invisible mon remained
	displayed due to telepathy or extended detection
cutting a long worm in half would trigger segfault/accvio crash if the hit
	took parent down to 1 hit point or if long worms had become extinct
cutting a level 0 long worm in half produced a new worm with 0 hit points
using F to force an attack towards a boulder gave "you attack thin air"
random "treasure drop" upon monster's death bypassed dropping side-effects
melted ice on Valkyrie quest should be pool, not moat
some variations of attempting to use open or close commands on a drawbridge
	didn't give drawbridge-specific feedback
tin contents can now sometimes be accessed on the same turn that the tin
	starts being opened; when not, the opening feedback is more accurate
Nth adjustment of feedback when observing a pet eating
monsters who want the Amulet won't attack temple priests to try to get it
blinded invisible hero can't see self as invisible via ';' or '/'
it was possible to generate an object of 0 gold pieces by dropping 2**32 gold
wizard mode's sanity_check option missed nested containers and migrating mons
always update map display and use up turn if open or close command attempted
	while blind reveals change in door state or discloses non-door spot
a hangup save while picking up gold from shop floor could duplicate that gold
secret door detection's trap finding is no longer blocked by water or clouds
	on the Planes of Water and Air
potion thrown by monster which hit a long worm's tail gave feedback about
	hitting its head
implement energy vortex's previously unused energy drain attack
changing alignment type resets alignment record to 0 (nominally aligned)
jellyfish do not technically have a head
while polymorphed, suppress attribute gain/lose earned by pre-poly exercise
wizard mode #monpolycontrol prompting asked about "it" when monster was unseen
reprompt if player fails to make a menu choice during inventory identification
potion explosion during failed alchemy should awaken nearby monsters
seen eels who were stuck in isolated pools would never re-hide
can no longer get both strength and resistance from eating one giant corpse
aborting key/lock pick usage via ESC at direction prompt no longer uses a move
lit south wall of C quest leader's room contained dark gap at secret door spot
when probing from inside an engulfer, "not carrying anything" overlooked hero
archeologist shouldn't start with sling skill by carrying slingable touchstone
wearing or removing an amulet of restful sleep clobbered permanent sleepiness
if attempt to select a co-aligned artifact for first divine gift fails because
	none is available, choose one from among nonaligned artifacts
ensure current_fruit gets set to the correct index when setting fruit
	option to existing entry whose fid is not the highest
monsters already wearing suits can't put on shirts
if breaking a wand of polymorph causes hero to drop items, don't transform them
give "shuddering vibrations" feedback if breaking a poly wand uses up items
if polymorph causes a monster to drop items, they won't be used up via
	shuddering vibrations or as golem creation fodder
monsters who ate green slime corpses weren't turned into green slime
"hand slip" while naming an object would never pick 'z' as a substitute letter
hero would "gladly take off <armor>" for nymph or succubus even while asleep
concealed mimic wasn't revealed if kicking attempt yielded a clumsy miss
too accurate feedback given to a blinded hero when a monster summons insects
if life-saved steed became untame, repeated "placing steed onto map?" warnings
	would be given as long as the hero remained mounted
message sequencing for fatal explosions was confusing if feedback was given
	for carried items being destroyed
when dipping something in holy/unholy water, only learn its new bless/curse
	state if hero sees it glow
describe lit Sunsword as shining rather than glowing
prevent poly'd shopkeepers from taking on forms that can't handle objects
attempting to move direction 'u' as a grid bug performed #untrap command;
	the other diagonals reported "unknown command" instead of "you can't"
mimic posing as statue or corpse now picks and maintains particular monst type
trying to move down while levitating said "you are floating high above floor"
	even when being stuck in floor or lava blocked full levitation
when levitating, don't show '>' as a likely direction for digging
poly'd or mimicking hero who was hidden from monsters would still be treated
	as a normal target for their ranged attacks
hero would remain stuck to an adjacent monster after rehumanizing if he had
	been attacked while hiding via #monster when poly'd into a small mimic
hero poly'd into mimic and hiding as an object via #monster didn't unhide
	when polymorphing into non-mimic
attacking via applied polearm never scuffed engraving underneath hero
auto-wielding a polearm took no time if ESC was used to cancel target choice
applying a bullwhip while at very edge of map could target beyond edge,
	potentially leading to a panic or crash
prevent temple priests and minions from wearing helms of opposite alignment
'D' drop command didn't handle 'u' choice correctly if the only unpaid items
	were inside containers
pearl rings shouldn't rust
shouldn't be able to read a worn T-shirt when it's covered by a worn suit
simplify hero placement on Castle level when climbing up stairs from Valley
spell attack by low-Int hero could inflict negative damage
some wand/spell/breath zaps that hit a secret door failed to reveal it
wand explosion feedback about adjacent door was phrased as if for a wand zap
improve the message sequencing when a thrown poisoned weapon loses is poison
message "You hit the  with all your might." could be issued if a boulder
	went away while it was being dug/broken with a pick-axe
prevent "object lost" panic if/when drinking a wielded potion of polymorph
	causes hero's new form to drop weapon
documentation tidbit:  change Guidebook and in-game help for pickup_burden
	option to match game's 'O' command ("Unencumbered", not "Unburdened")
writing while blind no longer possible for books, might fail for scrolls
blanking items in pools while blind shouldn't reveal new obj description
	for ones which had been seen before becoming blind
avoid infinite loop in topten output when killed by long-named monster
grid bug could move diagonally 1 step using travel command
attempting to open, close, or lock/unlock a door while confused or stunned
	uses up a move regardless of whether direction choice finds a door
grammar fixes for vault guard messages given after player assigns guard a name
wearing cloak of displacement auto-discovered it even when hero couldn't see
wearing elven cloak auto-discovered it even when already stealthy
putting on ring of stealth never auto-discovered it
forgetting spells due to amnesia now sets memory retention to zero instead
	of removing them from hero's list of known spells
shouldn't have been able write scrolls by guessing type name when they're
	only partly known via name assignment
scrolls given names can be written by assigned name as well as by description
fix writing feedback "the spellbook warps strangely, then turns parchment"
make stone artifacts usually resist stone-to-flesh
when reading an unknown scroll and learning it, discovery of teleportation was
	too late if hero happened to land on another scroll of teleportation
using an unlocking tool on a closed door which was actually a mimic reported
	that there was no door to unlock instead of exposing the mimic
purple worm could end up in wall or solid rock when swallowing ghost or xorn
unpaid shop items stolen from hero by a monster remained on hero's shop bill
#untrap toward known trap location containing concealed mimic would yield
	"{The mimic|It} {is in the way|isn't trapped}." but not reveal mimic
some actions taken when blind would yield "Wait!  That's a monster!" (for a
	mimic posing as a door) but not display the unseen monster glyph
enhance life-saving by preventing subsequent poison from being fatal upon
	rescue from death due to spiked pit, dart trap, or poisoned missile
don't create mail daemons when populating special levels with random demons
teleport control and polymorph control are ineffective while hero is stunned
don't report "fried to a crisp" for disintegration from divine wrath
when polymorphed into an opposite sex monster, if you then become a new
	human while failing to polymorph into something else, you'd be told
	"you feel like a new man" for female or "a new woman" for male  
spellcasting monsters' spell selection became less likely to choose harder
	spells as their level got higher (including Wizard's "double trouble")
Eye of the Aethiopica, Eyes of the Overworld, and Sceptre of Might must be
	worn or wielded rather than just carried to convey magic resistance
Mitre of Holiness and Tsurugi of Muramasa convey Protection when worn/wielded
effectiveness of magic cancellation by worn armor has been reduced
Protection improves the effectiveness of magic cancellation
the weight of a non-cursed bag of holding was sometimes off by 1 unit
for number_pad:2 (MSDOS compatibility), M-5 (Alt+5, or Shift+keypad5 using
	MSDOS/Windows keystroke hackery) didn't function as G movement prefix
if an angry shopkeeper chased the hero to a different level and then got paid
	off, he'd dismiss kops on that other level but not on his shop level
objects inside the Wizard's Tower can't be teleport to outside and vice versa
dying in lava and being life-saved or leaving bones would destroy ring of
	fire resistance if it happened to be made of wood, and also burn up
	scrolls of fire and spellbook of fireball
surviving in lava boils away carried potions, but dying in lava and being
	life-saved or leaving bones would keep them intact
when applicable, give "your body rises from the dead as an <undead>..."
	even when bones data isn't being saved
unlit candelabrum would become unlightable if its candles had exactly 1 turn
	of fuel left and it was applied anywhere other than the invocation spot
have shk claim ownership of worn saddle dropped by dying pet if hero is
	not within the same shop at the time of the drop
temporary loss of Dex from wounded legs will become permanent if it occurs
	while mounted and hero dismounts before steed's legs have healed
for poly'd hero hiding on ceiling who gets attacked, make attacker's position
	be an eligible location for hero when vacating hero's spot for attacker
	to prevent ending up far away under crowded conditions
for poly'd hero hiding on ceiling, attack by sea monsters won't move them
	into hero's position unless it is over water or they're already on land
for poly'd hero hiding on ceiling, attack by long worm might fill hero's
	destination with worm's tail, so double check and maybe choose again
poly'd hero can't hide on floor or ceiling when on Planes of Air or Water
when shop prices are adjusted, handle roundoff (integer truncation) better
for hero poly'd into a monster form that lacks a weapon attack but has a claw
	attack, use wielded weapon even when claw attack isn't the very first
rename the SLEEPING property and Sleeping attribute to SLEEPY and Sleepy, resp.
character escape sequence handling during options processing was vulnerable
	to malformed escapes and could potentially be abused to clobber the
	stack and launch a buffer overrun attack
give alternate message for "<mon> turns to flee" when mon can't move
all statues in a cockatrice nest were for giant ant if 'record' was empty
when dying outside all shops on a level with multiple shopkeepers and one takes
	hero's stuff, choose one who is owed money over first one on fmon list
hero poly'd into a critter without hands could still open tins
if a vault guard was killed, his inventory would be dropped at <0,0>
throwing gold to/at a vault guard will no longer be treated as an attack
non-pit traps created in vault guard's temporary corridor would remain after
	the location reverted to solid rock
using magic to light vault guard's temporary corridor would produce lit solid
	rock after reversion, and then yield lit corridor if dug out again
if hero was blind, killing the vault guard while in his temporary corridor
	would leave hero encased in solid rock without informing player
if hero dragged iron ball into temporary corridor and then killed vault guard,
	the portion of corridor currently in existence would become permanent
on Plane of Water, restrict levitation and flying to air bubbles;
	elsewhere, restrict them such that they don't work inside solid rock
wand/scroll/spell of light now hurts gremlins (lamp/candle light doesn't)
ditto for hero in gremlin form (camera too)
autosearch finds and transforms secret doors and corridors even while blind,
	but it wasn't updating the map to show them unless the hero could see
fix message typo, "you sold some items inside <container> for N gold piecess"
hangup save made during magic mapping or <foo> detection performed while
	underwater could put hero on top of the water after restore
fix bug preventing stone-resistant monster w/o gloves from wielding cockatrice
items conferring life drain resistance were affected by drain life spell
'a'pply command could be used to recognize undiscovered potions of oil
fix replacing an existing bones file in wizard mode [load?y, unlink?n, die?y,
	save?y, replace?y] for configurations using external file compression
theft of worn armor with wear/unwear delay would interfere with completion of
	wearing or unwearing some other armor which also imposed a delay
	(disrupted wear attempt for +N helm of brilliance would result in loss
	of N points of Int and Wis; gauntlets of dexterity had similar problem)
#sit while swallowed would give the wrong message
alchemical explosion or evaporation only used up one potion instead of all
	the potions being dipped
feedback for reverse-genocide was plural even when just one monster was created
fix message given when part of a stack of items in a monster's inventory is
	being destroyed
add "Boing!" message when hero zaps resistant monster with striking/force bolt
adjust gaze reflection message when your scales are embedded in your skin
adjust turning-to-stone or -slime messages when you have no limbs
wizard mode ^F on Plane of Water marked portal as seen but didn't display it
magic mapping now displays furniture in preference to known or remembered traps
	or objects and known traps in preference to remembered objects
restrictions on diagonal movement were ignored when crawling out of water
when using magic whistle, prevent steed from being affected (trap interaction)
declining to attack a peaceful monster via movement used up nutrition even
	though no action took place
declining to attack a peaceful monster via kicking woke nearby monsters and
	scuffed engraving at hero's location even though no action took place
make hero be immune from stinking cloud damage during successful prayer
very fast hero would sometimes take two consecutive moves with very fast
	monsters then getting two moves, instead of interleaving the activity
when a monster zapped by polymorph drops inventory because of its new form,
	don't let that same zap hit the dropped item(s)
entering an untended shop while blind gave an inappropriate message
engraving feedback about partial text when weapon became too dull to finish
	was lacking sentence-ending period
impossible() might display inaccurate feedback after updating paniclog
fix crash which occurred if hero was teleported onto a sink while busy putting
	on or taking off levitation boots
fix "object lost" panic (or even crash) when dropping multiple items while
	levitating and a lit potion of oil explodes and destroys some inventory
fix "object_is_local" panic when saving bones after hero is killed by explosion
	produced by dropped or thrown lit potion of oil
gold dropped on altar by hero wouldn't stack with gold dropped there by monster
if lava burns up the player's water walking boots, the player falls in
the messages for lava burning items up are always printed
fix used-up magic trap trying to hit steed.
messages are now printed when objects on the ground are eroded
object erosion now always identifies fooproof objects
grease protects from all types of erosion
all sources of erosion now affect objects the same way
passive attacks no longer erode armor covered by other armor
dipping a fooproof item into acid no longer forgets that it's fooproof
dipping a container into uncursed water now gets its contents wet
sanitize petnames and fruit to prevent escape codes
data.base "bat" overrode later "combat" entry
data.base "gelatinous cube" and "jack boot" have their own entries
data.base "vampire bat" matched twice; use the bat entry
data.base dagger attribution started with spaces instead of tabs
remove 'if (Deaf)' guards preceding You_hear which already checks deafness
use a menu to loot multiple containers
do_look() in post-3.4.3 used glyph prior to setting it in pager.c
charge for a boulder that fills a pit in shop
abuse wisdom in keeping with Rider eating message
message inconsistency: death message "swallowed <mon> whole" was preceded 
	by "You bite into"
improve the messaging when a monster you can't see is causing an obstruction
add option mention_walls, which gives feedback when bumping against a wall
fix invalid pointer dereference in morguemon if ndemon returns NON_PM
after object loss through polyshudder don't get left hiding under nothing 
	if you're polymorphed into a hider
show object symbols in menu headings in menus where those object symbols
	act as menu accelerators, toggleable via "menu_objsyms" option
show t-shirt text at end of game inventory disclose
hitting with a polearm remembers the position of the last monster you hit
add messages for trying to pick up some terrain features
boomerang makes noise when hitting a sink
non-pet rust monsters would eat rust-proofed non-digestibles but ignore
	those non-digestibles otherwise
kicking a grave may topple the gravestone
allow showing legal positions for stinking cloud, jumping and polearms
	when asked for a location
cloned creatures (of any type) don't deathdrop items
pudding corpses behave somewhat differently than before
mithril armor should have silver color
lichen corpse is an acid indicator
camera may contain a picture-painting demon
some monsters can eat through iron bars
inaccessible niches occasionally have iron bars in front
sinks may teleport or polymorph
shopkeepers give honorifics to vampires and elves
when commands (D, A, object identify) mix object class filtering with BUCX
	filtering, take the intersection rather than the union (so ?B picks
	blessed scrolls rather than all scrolls plus blessed everything)
bmask is stored with the objects on the Plane of Water to prevent segfault
engraving on drawbridge with wand of digging should produce appropriate
	message instead of referring to gravel
engraving Elbereth is less efficient as protection
scare monster scroll now provides a better effect
monsters without hands can no longer pick up piles of objects (with 
	certain exceptions)
uncursed enchant weapon now correctly fixes erosion
scroll of earth messages cleaned up
long worms can no longer be leashed
the chest in the Castle containing the wishing wand can never be trapped
the vibrating square is now a trap
mimics wouldn't take on the form of "strange object"
add an option to prevent omitting the uncursed status from inventory
show prices when walking over the shop merchandise
you shouldn't see Sting glow light blue if you're blind
when jumping, bumping into something is noisy
flesh golems hit by electricity healed by wrong amount
fleeing monsters couldn't use stairs that lead to different dungeon branch
casting spell of protection when previous casting(s) hadn't time out yet
	miscalculated the new AC increment
remaining monsters continued to move after hero conceptually left the level
	when a monster knocked him onto a level-changing trap (this bug made
	it be feasible--but not practical--to level teleport with the Amulet)
#turn for non-priest/non-knight attempts to cast "turn undead" spell, but
	was forcing the spell to target self rather than choose a direction
potions of gain energy are more useful for recovering hero's spell energy
spellcasting attempt of any spell while stunned now always fails
spellcasting attempt of expired spell while confused will increase confusion
	duration rather than replace it
add ways to get out of inaccessible niches in one of the minetown layouts


Platform- and/or Interface-Specific Fixes
-----------------------------------------
FreeBSD: compilation problems on FreeBSD 6.1
linux: compile support for TIOCGWINSZ by default
smartphone: do not translate input when command helper is hidden (fixes 
	Motorola Q keyboard bug)
smartphone: new keypad layouts
smartphone: wizard mode command layout
smartphone: option to feed arbitrary text as a command to nethack core
tty: when loading user's run-time configuration, explicitly negating one of
	{DEC,IBM,MAC}graphics options after enabling another of them switched
	to regular ASCII and left the earlier option inaccurately set to "on"
tty: various bugfixes for very wide and/or tall screens
tty+GOLDOBJ: dropping or looting by menu wouldn't honor a count for gold
tty: fix crashing when a location has more than 32k items
tty: fix segfault when MD termcap is not defined
tty: do not cut off statuslines at 80 characters for wider term
tty: prevent accidental escapes from string entries
tty: hilight object piles
unix: remove use of parentheses in nethack man page usage that confused a
	man page conversion tool
unix: new -wwindowtype option
unix: don't clobber old level files if 2nd hangup/disconnect occurs while
	reconnected user is responding to the "destroy old game?" prompt
unix/Qt: saved games were not found if nethack was built with prefixes in use
unix,vms: allow digits after first character in name at "Who are you?" prompt
unix: implement fcntl(2) locking on systems that can handle it
vms: the DLB configuration could fail to build if a file without a dot
	in its name happened to match a logical name
Windows: starting a game with nethack.exe (tty) and saving, then restoring
	and finishing with nethackW.exe (win32) would display the high scores
	output in a series of popup windows, one for each line of text
Windows, probably MSDOS and OS/2: attempting to use very first false rumor
	for cookie fortune or random engraving could produce garbled text
	when rumors.tru had CR+LF line ends instead of Unix-style LF lines
#if CLIPPING: during teleport or hurtle, re-clip the map immediately instead
	of waiting until hero's next move
winCE: disable processing of double-click messages if the first click
	causes map to scroll
winCE: help text windows close immediately after open (unhandled WM_KEYDOWN
	in mhtext.c)
winCE: correct coordinates used by action button
winCE: wrap/unwrap text option for text windows
winCE: hardware keyboard detection
winCE: hide keypad when hardware keyboard is present
winCE: backport message window highlighting from winnt port
winCE: new icon with recommended image sizes
pocketpc: menu window closes on up/down keys from first/last position
win32gui: better handling of "more" prompt for messages that would have
	scrolled off the window
win32gui: set correct checkmark on "Lock Windows" menu item on startup
win32gui: redraw message window on resizing (it does not update properly otherwise)
win32gui: fixed copy/paste error in read registry settings function
win32gui: improved calculation of the size of the menu window
win32gui: made auto-arrange windows on/off option (it was reset automatically
	which was unintuitive and in some cases annoying
win32gui: fix a possible crash with AltGr-4 WM_KEYDOWN handling
win32gui: use whatever alternate tile set is loaded in the menus
win32tty: prevent early error messages from flashing by too fast and not seen
win32tty: work around problem where display symbols were wrong or
	unrecognizable on systems where the default language for non-Unicode
	programs was not set to "US English" - courtesy Ray Chason
win32tty: work around problem where some characters did not show up if the
	console code page was other than 437
X11: support dynamic switching of map mode via tiled_map option
X11: added support for hilite_pet to text map mode
X11: ensure vertical scrollbar shows up in text display windows
X11: fix typo in mouse click sanity check; result might have pointed to
	spurious location after window resizing
X11: use a plus sign to mark piles of objects
platforms that support hangup: SAFERHANGUP to avoid losing objects in transit
	between lists when hangup occurs, and also avoid cheats due to
	well-timed hangups to stop a long melee
build-from-source: dlb utility can handle arbitrary number of files


General New Features
--------------------
when you're teetering on the edge of a pit you can use '>' to enter the pit
when you're flying over a pit you can use '>' to enter the pit
when asked for a direction, a response of '?' yields help and then asks again
when adding an item to inventory, try to stack it with the quiver slot
	before trying against other carried objects
#adjust can be used to split an inventory stack
cockatrice meat has a distinct flavor to some
wish request for "<something> armor" will match item named "<something> mail"
Fire Brand and Frost Brand have a chance to avoid taking rust damage
support ^R (and ^L in numpad mode) to request display repaint during direction
	choosing and location choosing prompting modes
intelligent pets will use keys to unlock doors
destroyed drawbridge leaves some iron chains
give feedback when a nearby monster grows into a stronger form
familiars are now created without any starting inventory
using the 'f' command when quiver is empty will fill quiver with player's
	response to the "what to throw?" prompt
breaking a wand with the apply command has a chance to wrest an extra charge
burying a punishment ball no longer ends your punishment
#tip command (with M-T shortcut) to empty a container's contents onto floor
add clicklook option to allow looking at things on the display by clicking 
	right mouse button when floating mouse pointer over them
Izchak's lighting store is now able to stock oil for your lamp
provide core support for saving of message history in save file
the following actions can now be continued after save/restore: digging, 
	eating, studying, removing armor
hero-created and monster-created ice will eventually melt away
extend Warning to include ice danger
wishing for particular variety of tin contents (deep fried, broiled, etc.)
debug-mode wishing for random monster(s) via '*'
debug-mode viewing of fully identified object descriptions without 
	actually identifying the objects
health-food store that stocks monk-appropriate foods in mine town when monk
give more information about your attributes in debug mode
polywarn to give intrinsic monster detection of limited species while poly'd
rocks can skip on water sometimes allowing them to pass over water creatures
vampires can now shapeshift into bats and fog clouds; the latter can be done
	at will to slip through locked doors
shapeshifted vampire will transform back to vampire form after you defeat it
	and continue to fight in its native form
container lknown flag for locked/unlocked/broken awareness
container cknown flag for container content awareness
plname is stored in the save file on all platforms now
introduce support for negation of role, race, align, gender values to eliminate
	them from random selection and the pick list of startup choices
some intelligent pets will avoid cannibalism
keep track of which monsters were cloned from other monsters
cloned and revived monsters become worth fewer points than ordinary ones
number_pad:3 run-time option to use inverted phone keypad layout for movement
number_pad:-1 to swap function of y and z keys; z to move NW, y to zap wands
display spell retention information in the spell menu
tame ghouls can eat old eggs
new effect for reading a scroll of light while confused
allow digging an adjacent pit with wand of digging while trapped in a pit
#terrain command to show unobstructed view of map (w/o mons, objs, traps)
digging can activate or disarm some types of traps
some monsters can eat tins in addition to corpses to cure some ailments
add ability to sort the list when viewing known spells with '+' command
describe magic cancellation from worn armor in enlightment/end-of-game feedback
disclose half physical and/or spell damage in enlightment/end-of-game feedback
rephrase see invisibility enlightenment feedback when unable to see at all
add atmospheric sound messages for temples
sometimes give announcement message when monsters teleport to hero's vicinity
obsolete config file keywords: GRAPHICS, OBJECTS, TRAPS, EFFECTS
deprecated options: IBMGraphics, DECGraphics, boulder
new options: symset, roguesymset for choosing a symbol set from  symbols file
new config file keyword: SYMBOLS for overriding character symbol values by name
opening magic frees from bear traps and webs, activates trap doors
closing magic activates bear traps and webs
locking converts a hole into a trap door; striking does the opposite
lembas and cram never rot unless cursed
multiple squeaks for squeaky boards
include time, user ID, and play mode in paniclog entries
add oracle and rumor regarding priestly donations
anti-magic traps have alternate effect on targets who have magic resistance
the Amulet can be offered to Moloch
javelins and spears now share the same weapon skill
all stackable weapons are capable of being thrown/shot for multi-shot volleys
worm teeth and crysknives have become stackable
improved container interface
acid can destroy iron bars
OPTIONS=playmode:normal|explore|debug to choose mode without command-line
score bonus for ascending is reduced or denied for changing alignment
player can give a monster class when asked for type of monster to poly into
likewise when asked about type for #monpolycontrol
both controlled self-polymorph and #monpolycontrol accept ESC, "*" or "random"
	when asking for type of monster; ESC aborts #polyself command
scroll of taming/spell of charm monster now gives some feedback
doppelgangers can take on the shape of alternate roles' quest guardians
pile_limit option to control when to switch to "there are objects here"
	vs listing objects on floor when hero goes over objects while moving
some monsters will use fire to prevent selves being turned into green slime
add `#vanquished' debug mode command
C and #name commands are now same and use menu to choose monster vs object
hallucination provides partial protection against gaze attacks
attempting to read "dull" spellbook might cause hero to fall asleep
dipping prompt is more precise
using F to attack wall/boulder/statue while wielding pick digs/breaks target
shapechangers shouldn't receive starting inventory of their initial shape
streamline old ^X output and integrate it with enlightenment feedback;
	new ^X output includes expanded form of abbreviated bottom line info
"killed by X" becomes "killed by a chameleon imitating X" when appropriate
eating disenchanter corpses is now considered risky
make '[' command more precise when poly'd hero has embedded dragon scales/mail
fainting while wielding a cockatrice corpse will be fatal
Sunsword's light radius depends on its curse/bless state
Add M-C and M-R meta-key shortcuts for #conduct and #ride, respectively 
can now use ESC to cancel out of prompts for playing musical instruments
being crowned gives an additional benefit:  one extra skill slot/credit
chatting to a gecko or shopkeeper while hallucinating gives alternate message
mimic posing as door might steal hero's key when [un]locking is attempted
polymorphing into a dragon while wearing dragon scale mail will cause that
	mail to revert to dragon scales
flexibility for specifying "detect <foo>" vs "<foo> detection" when wishing
when a sokoban puzzle has been completed (last pit or hole filled in),
	stop assessing luck penalties and lift most movement restrictions
'`' command to show discoveries for one class of objects
add "about nethack" to '?' menu as an alternate way to view 'v'+'#version'
display version and build information at startup
repeatedly setting the fruit option will check to see if fruits have been
    created, so the user can't easily overflow the maximum this way
bones files now include extra data to identify dead hero and reason for death
dipping multiple potions in another potion may only dip part of their stack
make being inside a stinking cloud (when not immune or resistant) become a
	major trouble which is fixable by prayer
introduce some variation in monster movement rates
add database entry for shuriken and make it match throwing star
add database entries for fedora, land mine, cream pie, bullwhip, blue jelly,
	and boomerang
change command X to twoweapon toggle
pressing @ when cursor positioning moves cursor on top of hero
pressing # when cursor positioning toggles automatic description of features
	under the cursor
cursor positioning ignores uninteresting dungeon features
allow reading many more items
when you're hiding under something a zap downward should not hit that
	something, while a zap upward should
show more explicit reason why player was helpless at death
added new hallucinatory-only gods
options to create the character blind or nudist
moving clouds on the plane of air
disclose extinct species alongside genocided ones
a tribute to Terry Pratchett
some levels in Gehennom now use the old corridor-style maze instead of the
	new room-style. Beelzebub's level always does this and the
	"beetle legs" are restored.
gnomes will occasionally have a candle
stop travel or run when you get hungry
'I' command can accept 'B','U','C',or 'X' as an alternative to normal object
	class character to show inventory of items known to be blessed,&c
debug-mode viewing of object weight
prizes on various levels now protected by ?oSM scrolls as well as Elbereth
regexes now use system libraries consistently for all pattern-matching systems
wet towels deal more damage
'P' and 'W' commands work on both accessories and armor but treat different
	types of items to be likely candidates when prompting for an item
'R' and 'T' commands also work on both accessories and armor; setting the
	Remove/Takeoff category for the paranoid_confirm option will be needed
	if user wants to stick with just one command for all worn items


Platform- and/or Interface-Specific New Features
------------------------------------------------
pcmain: check for dlb_init failure rather than relying on dungeon open failure
win32gui: support perm_invent
win32gui: menu option to add/remove windows captions
win32gui: support for saving/restoring message history
win32gui: added menu options "Copy ASCII Screenshot To Clipboard" and "Save 
	ASCII Screenshot To File"
win32gui, win32tty: add support for looking for sysconf in %COMMONPROGRAMFILES%
    first and for user config file in %USERPROFILE% (improves support for
    multi-login Windows environments)
win32tty: support for 'selectsaved' option for menu of existing save files
	to choose from at game startup
tty: add window port routines for saving/restoring message history
tty: enhanced role, race, &c selection at start of new game
tty: implement : (menu_search) command
smartphone: added "Type Cmd" command that allows to type arbitrary commands 
	using phone keypad
smartphone: added Q(quiver) command to "Attack" layout
smartphone: fixed F command to prompt for direction
unix,vms: altmeta option to handle terminals which send "ESC c" for Alt+c
tty,win32gui,win32tty: add menucolors
MSVC: send debugpline output to 'debug' window to declutter game screen


NetHack Community Patches (or Variation) Included
-------------------------------------------------
Roderick Schertler's pickup_thrown patch
adopt/adapt/extend Malcolm Ryan's Statue Glyphs patch to work for tty and tiles
adopt/adapt/improve the Paranoid_Quit patch; default is paranoid_confirm:pray
	paranoid_confirm:Confirm when requiring "yes" instead of y to confirm,
				 also require explicit "no" to reject
	paranoid_confirm:quit    yes vs y to quit or to enter explore mode
	paranoid_confirm:die     yes vs y to die in explore or wizard mode
	paranoid_confirm:bones   yes vs y to save bones when dying in wizard mode
	paranoid_confirm:attack  yes vs y to attack a peaceful monster
	paranoid_confirm:pray    y to confirm #pray; supersedes prayconfirm
	paranoid_confirm:Remove  always pick from inventory for 'R' and 'T'
adopt/adapt/improve Dungeon Overview
Aardvark Joe's Extended Logfile
Michael Deutschmann's use_darkgray
Clive Crous' dark_room
sortloot by Jeroen Demeyer and Jukka Lahtinen
Auto open doors by Stefano Busti


Code Cleanup and Reorganization
-------------------------------
removed OVLx section dividers previously  used for TRAMPOLINE overlay system
move all flags that are system or port specific from flag struct to sysflags 
	struct which is used only if SYSFLAGS is defined
all fields in flags struct are unconditionally present
monst cham field now a short and uses mons[] index
rearrange some monster ordering to follow rule #2 listed at top of monst.c
change region player_flags to more appropriate unsigned int instead of boolean
remove remains of sync_hunger, which has been ifdef'd out for years
new mextra structure housing pointers to mname, egd, epri, eshk, emin, edog
consolidate vault.h, epri.h, eshk.h, emin.h and edog.h into new mextra.h
new oextra structure housing pointers to oname, omonst, omid, olong, and omailcmd
drawing symbols for DECGraphics, IBMGraphics, MACgraphics are now stored in an
	external symbol file that can be changed without rebuilding
new hints-based configuration system
allow documentation to be specialized to the options in the game binary
add param to winsys ini routines to allow cleaner shifting during startup
make STEED, EXP_ON_BOTL, REDO, AUTOPICKUP_EXCEPTIONS, GOLDOBJ, WIZARD, SINKS,
	REINCARNATION, TOURIST, KOPS and ELBERETH unconditional
make SEDUCE compile-time unconditional but still removable through SYSCF
clean up some DEBUG conditional code
allow defining of generic usernames in config.h instead of hard-coding in role.c
set indentation to 4 spaces in most source files




$NHDT-Branch: NetHack-3.6.0 $:$NHDT-Revision: 1.448 $ $NHDT-Date: 1524780380 2018/04/26 22:06:20 $

General Fixes and Modified Features
-----------------------------------
doc/*.6 man pages and corresponding doc/*.txt text copies were out of date
data.base entry for "lava" had wrong first name for Don Woods' attribution
cursed genocide of "none" sent in monsters, but "that's enough tries" didn't
update MAXPLAYERS documentation in sysconf file and accept 0 for 'no limit'
wizard mode: don't include feedback about named fruit for ^X and enlightenment
looking at distant objects while wearing the Eyes of the Overworld made their
	up-close descriptions known when not intended
message when cursed wand zapped by a monster happens to explode was suppressed
	if hero was deaf, even though that message has no audible component
support explicit 'symset:default' and 'symset:Default symbols' in options
crash during startup if player name set as 'player' in defaults
crash during startup if defaults file has a long line
any existing vampire shape-shifted into critter (fog cloud, bat, wolf) became
	an unkillable critter if vampires were genocided
unlike in previous versions, an uncursed scroll of enchant armor failed to
	uncurse the piece of armor being enchanted (change was unintentional)
slice of {pizza,cake,&} pluralized as "slouse of ..." due to false match
	with "lice" (discovered pre-3.6.0-release)
change dipping prompt to not ignore 'called' and 'named' attributes of item
	to be dipped
avoid 'the unlabeled {scroll,spellbook} fades' when blank item is hit by water
wrong message given when high priest on astral plane rejects being assigned a
	name (got the one for unique monsters instead of the one for priests)
negative intrinsic protection shouldn't confer MC=1, "you are warded" (not
	possible from divine protection but is possible from eating rings)
make a slight adjustment to the quickmimic() sense wording
fix typo in passage 1 of The Colour of Magic
fix typos in passages 2 and 6 of Thud!
falling asleep when reading dull spellbook ignored sleep resistance
getpos() complaint about invalid movement keystroke didn't describe meta-chars
	accurately
'realtime' value in xlogfile was incorrect if 'checkpoint' option was active
make a previously-discovered scroll written with marker while blind have its
	label known so it can be read while blind
#name or C for discoveries list that spanned multiple pages would exit on
	space instead of advancing to next page (workaround: use '>' instead)
don't show the old level when you die going down the stairs because of an
	iron ball
new high score with ", while helpless" attribute appended would erroneously
	result in ", while helpless" being appended to all following entries
allow bright aliases for colors in menucolors
avoid hearing yelps when you are deaf
make corpse visible if stethoscope told you about it being there
sceptre of might database entry word change
avoid "spellbook of novel" on discoveries list after object ID of novel
add novel to discoveries list after reading one
putting gold into hero-owned container on shop floor gave free credit
stack splitting for dipping large quantities of potions was done poorly
dipping fruit juice into enlightenment gave different result than the inverse
make travel walk up to a trap and stop when the trap blocks the only
	way forward, instead of trying to go straight line
travel will displace pets rather than stop
discard travel cache when moving to a different dungeon level
do not autopickup unpaid items in shops
death due an unseen gas spore's explosion resulted in "killed by a died"
allow optional parameter "true", "yes", "false", or "no" for boolean options
actually make the castle chest not trapped
level-drain resistance wasn't shown during enlightenment if it was conferred
	by worn/wielded equipment or by lycanthropy
wizard mode enlightenment now shows more reasons for various intrinsics
rehumanizing after being poly'd into vampire left hero with ability to sense
	humans and elves
Warn_of_mon wouldn't have been able to sense giant ants if any creature were
	to have that ability, caused by using 0 instead of NON_PM for 'none'
tone down energy vortex's drain energy attack
fix message typo if tame mind flayer dies trying to eat Medusa's brains
use alternate rejection message if attempting to name an unnameable monster
	with the name it already has
cockatrice corpse no longer leaves multiple statues for shape-shifted vampire
alter name of monster causing hero's death if name contains characters that
	could cause confusion when using record, logfile, or xlogfile later
teleporting or polymorphing a sink via ring drop shouldn't depend upon being
	able to see it happen
change "unlockable chest" to "broken chest" so that it won't be misunderstood
	("capable of being unlocked" vs intended "not capable of being locked")
use doname instead of xname when using '/' or ';' to look at objects on map
when a pet moves reluctantly, name the top item of the pile it is reluctant
	to step on if the hero sees or remembers any object(s) at that spot
ensure sufficient messages are given to clarify the transition from detected
	vampire bats to fog clouds in Vlad's tower
fix "killing by kicking something weird" when kicking an object causes death
avoid accessing mextra fields which haven't been allocated
compile-time option for an alternate paniclog format for public server use
make monsters forget where they stepped when fleeing or teleporting
requiver pickup_thrown objects if quiver is empty
make mimics mimicing walls or trees also block light
stepping onto lava destroyed non-fireproof water walking boots but left other
	vulnerable boot types intact
damage and death reasons when eating globs referred to them as corpses
fix death reason when petrified (avoid redundant 'while getting stoned')
use appropriate place name for drum of earthquake shakes
fix unmapped branch stairs on sokoban level
redraw map when hilite_pile is toggled to display the highlighting
make commands that accept a count prefix for item selection
	show "Count:" like command repeating does
make vault guard accept names starting with number
fix weight of containers in special levels
make the raven medusa level shortsighted
fix possible segfault in lev_comp when map was too tall
fix "the ice is bridged with ice" when freezing castle's moat or Medusa's sea
make monsters and pets avoid poison gas clouds if it would damage them
covetous monsters may choose to teleport to downstairs or ladders
doppelganger posing as Rider would never change shape
since doppelganger posing as Rider could never revert to innate form,
	protection from shape changers turned it into genuine Rider
don't create globs of ooze/slime/pudding with bknown flag set so pre-known to
	be "uncursed"
do allow globs with same curse/bless state to merge even when that state is
	known for one and unknown for the other; result will have bknown clear
make glob merging on floor behave the same as glob merging in inventory
track age of merged globs
support globs for edibility temporary intrinsic
restore ability to gain intrinsics from black puddings (pass globs to cpostfx)
eating tainted black pudding (glob in 3.6.0, corpse in 3.4.x and 3.3.x)
	referred to it as "meat" (because it's not vegetarian food)
fix pile mark after killing a monster carrying a potion which is destroyed
don't list suit as likely candidate for Take-off if cloak blocks it
only list known blank scrolls and known blank spellbooks as likely candidates
	when choosing an item to write on for applied magic marker
make status hilites use same color names as menucolors
limit monster spell aggravate monsters to either outside or inside of the
	Wizard's tower
prevent revived unique from inheriting a user-defined name
make hurtling out of air bubble on the Plane of Water handle entering water
fix floor descriptions on the Planes when levitating
fix warning glyph description when monster symbol coincided the warning symbol
override MSGTYPE=norep while executing the ':' command
if a chameleon took vampire form, it would stop periodically changing shape
corpses obtained from tipping an ice box wouldn't rot away
suppress "you climb up the stairs" message if verbose option is off
physical damage from mind flayer attack was being inflicted twice
adjust pending movement points when polymorphing into a slower creature
damage inflicted by burning glob of green slime gave wrong messages
monsters fleeing up the upstairs on level 1 were supposed to escape the
	dungeon but ended up arriving on Plane of Earth
monster hitting fire-dealing monster with weapon triggered passive damage to
	weapon every time, when hero doing so only had 1/6 chance per hit
hitting steam vortex with flammable weapon would damage the weapon with fire
if a non-cursed spellbook being read becomes cursed and hero recognizes that
	(bknown is set), interrupt reading
if a non-cursed spellbook being read becomes cursed and hero doesn't notice,
	don't leave it flagged as in-use (hence to be deleted during the
	next save/restore cycle) if contact-poison cursed book effect occurs
stolen_value, used when breaking shop items from outside the shop among other
	times, could describe the shopkeeper as "it" when not seen
when two or more shopkeepers were visible at once, 'p' command could be used
	to probe map for locations of other shopkeepers and arbitrary monsters
vortexes and other unsolid monsters need not avoid webs
barbarian and samurai can achieve basic in their special spell's skill
scalpel and tsurugi can now split puddings; bashing with darts or arrows can't
jumping while punished could leave ball and chain in the wrong place
improve Deaf message handling for the minetown watch and shops
issues with Warning when you're adjacent to an undetected hider; clearly you
	are aware a monster is present so this causes you to search it out
allow lookup of names like Hachi when selecting monsters from the map
lookup "More Info?" prompt will now tell you what it will look for on 'y'
using 'R' on armor would bypass some restrictions imposed by 'T' (inner layer
	could be taken off from under outer layer, embedded scales could be
	attempted but triggered "select_off" impossible)
when examining hidden monsters (probing, persistent monster detection), tell
	how they're hidden (under an object, on the ceiling, etc)
some quest text corrections
use a much tighter upper bound when summoning nasties; old method could
	theoretically create 200 critters at a time
if a long worm inherited inventory from a previous shape, and if an egg or
	figurine in that inventory hatched or auto-activated, messages were
	given when hero could see any tail segment even if head was unseen,
	making it seem as if worm's inventory was kept in the visible segment
Wizard will now steal any quest artifact from hero, not just own role's
prevent a hostile renegade Angel of <lawful god> from delivering taunt
	messages which mention threats of retribution from that god
a few types of monster (barrow wight, Nazgul, erinys) have weapon attacks that
	don't deal physical damage, so special damage like stoning via wielded
	cockatrice corpse wouldn't be inflicted
non-item-using monsters who happened to be carrying scroll or wand of fire or
	a fire horn could use it to cure themselves of being turned into slime
when looting multiple containers, add 'n' for "loot next container", change
	'q' and ESC from "done with this container" to "done looting"
change looting to choose ":iobrs nq" action from a menu for menustyle:Partial
wand/spell/breath zaps that reached the edge of the level on the Plane of Air
	and "vanished into the aether" left temporary display effects on screen
stop amulets and other items which aren't affected by erosion damage from
	being subjected to erosion damage
grammar bit: polyself w/ gender change yielded "you turn into a Elvenking"
grammar bit when hallucinating: "you kill poor goblin" ('the' missing for pet)
some blindness cures ignored u.ucreamed
some instances of stun or confusion timers were being overridden rather than
	incremented when new stun or confusion damage was suffered
female gnome who gains level can grow up into male-only gnome lord; give
	an alternate message instead of prohibiting the promotion
kicked weapon which successfully hits monster vanishes from play
unseen landmine explosion could result in "The <monst-type> statue crumbles."
when using the 'O' command for regexp options (autopickup exceptions,
	menucolors, message types), provide opportunity to add more than one
	at a time [after 'add', return to add/list/remove menu]
commands invoked by uppercase meta characters: M-A, M-C, M-N, M-O, M-R, M-T
	were missing from '? c' list of game commands (dat/hh)
tweak Baalzebub's lair and clean up the map display for it
symbol set definitions didn't recognize S_darkroom and S_vibrating_square
wizard mode enlightenment was reporting "very fast innately" (which is not
	possible) for very fast hero who was innately fast
when attacking a monster with a rust or corrosion or acid passive
	counter-attack, grease wasn't protecting the attacker's weapon
the Bell of Opening now correctly reports when it opens a trapdoor/hole
knocking can no longer send a monster through a trapdoor/hole and desaddle it
game no longer gets confused when you break an unpaid shop item while inside
	a different shop
shopkeepers now correctly handle nested containers and gold in containers
for menustyle traditional, 'D' followed by (B|U|C|X)&m presented a menu of
	everything, not just invent subset matching specified BUCX categories
for menustyles traditional or combination, 'A' (or object ID) followed by i
	displayed an inventory of everything rather than just worn items (or
	not fully identified items)
exploding chest trap would destroy uchain while still worn if uball carried
if monster shapechange message "<foo> turns into <bar>!" was given, <bar>
	could be "it" (if <foo> sensed telepathically and <bar> is mindless)
automatic annotation for Ft.Ludios level got applied when a drawbridge became
	mapped, but entry there is a secret door rather than a drawbridge
sortloot changed to group holy water and unholy water with water instead of
	placing them among the h- and u-named items
sortloot changed to place diluted potion of foo after potion of foo instead
	of listing all diluted potions followed by all non-diluted ones
digging down on a grave converted the terrain to floor but did not create a
	pit and uncover the grave's contents; digging again--on floor--did
when feel_location removed a remembered-unseen-monster glyph from a known
	water location while hero was levitating, the map was redrawn showing
	floor instead of water at that spot
Vlad's tower2 and tower3 didn't show up in wizard-mode ^O output or ^V? menu
remove extra space from "All of your  <stack-of-potions> boil and explode."
	(also applies to potions freezing and to scrolls burning)
effects of cursed potion of levitation were skipped if already levitating
when engulfed, having swallower be killed by angry deity trying to zap hero
	no longer violates pacifist conduct (other penalties--reduced luck or
	alignment--still apply if target is something you shouldn't kill)
likewise when a monster kills inself trying to prevent turning to stone or
	into slime that's been caused by the player, pacifism is not affected
metabolism adjustments: hero poly'd into metallivore form still needs to eat;
	being fainted or unconscious from other than sleep now consumes
	nutrition at lower rate, like being asleep already did;
	starvation threshold shortened due to slower food use while fainting
after using detection magic or #terrain while underwater, then leaving water
	and saving while on land, save would flag you as underwater again and
	then restore would limit the map display accordingly; next move would
	notice, retify things, and report "you are on solid land again"
change #terrain used while underwater to view the regular map rather than the
	crippled underwater one
can see or feel adjacent lava or ice when underwater
farlook when underwater now reports "land" for adjacent non-{water,lava,ice}
	and "unreconnoitered" for non-adjacent anything, instead of "dark part
	of a room" for the former and either dark-room or "unexplored" for the
	latter depending upon whether the spot had previously been scouted
monster who accidentally killed itself by zapping wand of fire or fire horn
	at self to prevent turning into slime was not properly killed off;
	it wouldn't benefit from an amulet of life saving and would trigger
	impossible "dmonsfree: N removed doesn't match M pending"
resurrecting a shopkeeper corpse caused crash (replmon -> replshk -> inhishop
	-> no eshk data for temporary monster being replaced with revived shk)
new character with OPTIONS=role:Valk,race:!human,align:!lawful yielded
	"Shall I pick your Dwarven Valkyrie's for you?" where !human forces
	dwarf and dwarf forces lawful, contradicting align:!lawful
new character with OPTIONS=role:Valk,race:random yielded
	"Shall I pick your Valkyrie's race and alignment for you?" instead
	of honoring race:random without asking
while in shop, undead turning at self causing carried, hero owned corpse to
	resurrect claimed it belonged to shopkeeper
while in shop, stone-to-flesh at self causing carried, hero owned figurine
	or statue to animate claimed it belonged to shopkeeper
reviving one of a stack of N corpses in a shop charged a usage fee for all N;
	remaining N-1 were owned by hero if carried but by shop if on floor
gremlin wailing in agony should wake up nearby monsters
add more lighting variance to the second bigroom variant
when getpos was picking a location, typing '^' to move to the next known trap
	skipped some detected traps if their location was unseen
describe detected door traps and chest traps as trapped door and trapped chest
	instead of bear trap; bear trap tile is still used on map though
thrown potion that killed peaceful monster would cause "the <mon> gets angry"
	after the message about it being killed
when poly'd into a hider and engulfed, attempt to hide via #monster was blocked
	but feedback said "can't hide while held" rather than "while engulfed"
various monster/object/food/gold/trap detections were inconsistent in how they
	behaved if performed while engulfed or underwater
show in inventory which monster a leash is attached to
using /? to look up something by name, supplying multiple spaces (with no
	other characters) as the name triggered impossible "singular of null?"
add support for the 'altmeta' option to the 'what-does' command ('&' or '?f')
when wielded weapon becomes untouchable (after alignment change or polymorph)
	hero could be 'blasted by its power' twice in succession
at startup, if sysconf had been read but user's own config file couldn't be
	read, sysconf got processed again as if it contained user's options
don't give "you cannot pass through the bars" when travel is testing possible
	paths in the vicinity of iron bars
if blind and no gloves, using 'm<dir>' to move and then 'e' could be used to
	locate cockatrice corpse without fatal touching (by declining to eat)
it's cannibalism for a were<foo> to eat a <foo> corpse
conduct: wishing for an artifact and not getting it because it already exists
	counts as wishing for an artifact, just like when not getting it
	because of quest restrictions or too many artifacts in play does
avoid ring of poison resistance as starting equipment for orcish wizard
gelatinous cube shouldn't be able to eat a scroll of scare monster
make fireballs or cones of cold cast at skilled or higher not go through walls
prevent flying monsters from hovering over unreachable underwater objects
lembas wafer gives increased nutrition to elves, reduced nutrition to orcs;
	cram ration gives increased nutrition to dwarves
when #tip's terse object drop format got interrupted by a regular message,
	it continued using "obj2, obj3, ..." for subsequent objects, where
	the sentence grammar no longer made sense (the interrupting message
	still follows the comma of a partial sentence--attempting to fix that
	seems hopeless; leaving it is better than always using verbose format)
for #tip inside shop, credit was incorrectly given for spilled gold if that
	gold's stale location coordinates didn't happen to be inside the shop
when confused scroll of light summoned lights, player would be asked what to
	call the scroll even if scroll of light was already identified
if a visible monster becomes invisible, mark its spot with the 'remembered,
	unseen monster' glyph ('I' character or '?' tile)
monsters can throw cockatrice eggs at hero, but there was no handling for eggs
	when the missile hit an intervening monster
clarify that shape-shifted vampires revert to vampire form when petrified or
	digested; when back in 'V' form, they're vulnerable to such damage
when poly'd into an engulfer which does digestion damage, a kill resulting in
	a level gain gave "welcome to level N+1" before "you digest <victim>"
any corpse eaten by omnivorous hero always tasted "terrible"
eating the corpse of a unique non-named monster (Wizard of Yendor, Oracle,
	Chromatic Dragon, others) gave "The the <monster corpse> tastes ..."
when escaping the dungeon, change "you were here" annotation in dungeon
	overview to "you left from here"
option parsing will crash if 'playmode' option is present without a value
any item drained of enchantment was blamed on the player as far as shop
	billing was concerned, even if caused by disenchanter attack
if user supplied a specific monster name when asked to choose a monster class,
	first prefix match was picked rather than best match ("titan" yielded
	S_quadruped due to being preceded by "titanothere" in mons[])
change ing_suffix() to not double final 'w' when adding 'ing' ('t=' yielded
	"You mime throwwing something.")
using 'D' to drop when not carrying anything finished (after doing nothing)
	without giving any feedback for menustyles "full" and "partial"
"you hear a distant <musical note> squeak" might actually be nearby
differentiate symset and roguesymset option menu prompts
don't show monster vs. monster attack message, if the message refers to
	a monster that cannot be sensed by the hero
umber hulk gazing at hidden mimic forces mimic to unhide
show some timed hero properties in wizard-mode #timeout
give quest guardians some equipment
hero polyed into ghoul can only eat non-veggy corpses or eggs
kicking activates statue traps
pets start with apport equal to your charisma
sometimes generate the random mazes with wide corridors, thick walls,
	or with dead ends changed to loops
put throne room gold in the chest
novels are made of paper, not gold
movement speeds are made less predictable by using random rounding, rather
	than via adding a random offset
some death by the-poison-was-deadly situations left stale non-zero HP shown
	on the status line during final disclosure
when sitting at a trap spot: You sit down. You step on a level teleporter.
	(likewise for polymorph trap, and similar issue for web)
show all statusline information in #attributes
add option status_updates to prevent bottom of screen status line updates
fix achievement recording bug with mines and sokoban prizes
g.cubes would eat globs of green slime without harm; engulf those instead
fix up true rumor about rock moles vs boots
Bell of Opening could trigger segfault attempting to open some types of traps
	if hero was mounted
automatic #overview annotation for quest summons wasn't shown if the quest
	entry portal was on same level as bigroom or rogue level
gaining or losing strength while wearing gauntlets of power could give
	misleading message about already being as strong or weak as possible
levitation vs encumbrance message sequencing issues:  putting on boots of
	levitation reported reduction of encumbrance before finish-wearing
	and float-up messages, taking off such boots didn't report increase
	of encumbrance until player took another action
removing a blindfold with 'A' took two turns, with 'R' (and 'T') only one,
	and could result in a crash if the blindfold was stolen during removal
removing a blindfold and wielded weapon with 'A' could result in crash if the
	weapon was destroyed by various methods
cmdassist help for movement prefix followed by invalid direction was strange
	when the direction was up, down, or self disallowed for that prefix
poor message when shape-shifted vampire reverts to vampire if it has a name:
	The Dracula suddenly transforms and rises as Dracula.
poor message when shape-shifted vampire reverts if cause of 'death' was
	disintegration or digestion and shifted form wasn't amorphous:
	The vampire bat is disintegrated.  The vampire bat suddenly transforms
	and rises as a vampire.  (fix: switch to existing alternate phrasing
	used for amorphous form, "reconstitute" rather than "transform")
poor message when named vampire shifts shape within view:
	You observe a Dracula where a Dracula was.
vampire shifting into fog cloud to pass under door "oozed" rather than "flowed"
vampires in fog cloud shape would tend to stay that way unless killed; give
	them a chance to change to bat or wolf shape if not seen or far away
adult green dragons and the Chromatic Dragon were blinded by gas clouds
named floating eye (when hit by another monster with reflection) or named
	silver weapon (when hero hits silver-hating monster) could disrupt
	message formatting and conceivably trigger crash if name had '%' in it
fix "you feel like a new man" if female human hero's polymorph attempt failed
	while in human form (when already poly'd, "new woman" correctly shown)
fix the 'A' command to have the 'D' command's fix for C331-1 (quirk for
	menustyle:Combination; if user included 'a' in "which object classes?"
	response, to operate on applicable all items, there would still be a
	followup menu asking to choose specific items)
eating 1 tin from stack of N (for N >= 2) on shop's floor forced hero to buy 2
using a cursed whistle in a vault will summon the guard immediately
throne room's throne is occupied by a king
using a grappling hook and getting pulled toward the target into water would
	drown hero without any chance to crawl out
blinded monster who eats a carrot will have blindness cured (hero already did)
the "bonesid" written into bones files when they're created so that they can
	be validated when loaded was incorrect for bones in the quest branch
	("QBar.2" ended up being "ar.2", "QKni.4" ended up as "ni.4", and so
	forth) but worked anyway, because validation used same incorrect value
surviving a gas spore's explosion would leave that explosion as a stale reason
	for death which might show up strangely ("crushed to death by a gas
	spore's explosion" when killed by an opening drawbridge)
add database entry for "martial arts"
add catch-all database entry for the polearms
starting inventory for rogues specified +9 lock pick, where +/-N is meaningless
fix pile mark when picking up all-but-one items while invisible
improve config file error reporting
when polymorphed into something with a passive counterattack, being 'killed'
	and returning to normal form allows a subset of counterattacks to
	continue after telling the player than the hero has reverted; change
	"Mon is splashed by your acid" to "Mon is splashed by acid" in that
	situation so that the message sequence doesn't look quite so strange
when returning to quest nemesis' level, the message for some roles (A,S,T,W)
	referred to sensing presence of the quest artifact even if had been
	removed from that level; give an alternate message in that situation
when the Amulet increased spell casting cost, nothing actually happened (aside
	from the message about feeling the Amulet drain the hero's power) if
	hero lacked sufficient energy to cast the spell
if was possible to leash an adjacent pet while engulfed
if leash or unleash attempt was directed at "remembered, unseen monster" glyph
	and yielded "there's no creature there", the glyph wasn't removed
wizmode level teleport menu indicates on what level you currently are
fix invisible gold symbol in status line when S_coin was set to space
fix buffer overflow in wizard mode for '#' command when 'extmenu' option is on
"you suddenly vomit" was given two turns before actually vomiting, so you
	could get that message, move a bit, then get "you can move again"
	after the 2 turn freeze applied along with the actual vomit
give an alternate message if you vomit when stomach is empty (ie, fainting)
corpses and other flammable items not subject to direct burning or fire-based
	erosion which were thrown or dropped into lava remained intact
if a potion on the floor survived a land mine explosion and got propelled at
	the hero, it didn't behave like a potion if it hit
adjust candelabrum's weight when candles are attached
when lit candelabrum burned out, persistent inventory window showed that it
	was no longer lit but still showed phantom candles attached
improve hilite_status, allowing multiple stops per field, and temporarily or
	permanently hilited fields
give feedback when released from a bear trap
#version output sometimes had ", and basic NetHack features." on its own line
	depending upon how the dynamically inserted pattern-match phrase fit
#version output left out "pattern matching via <method>" if the basic NetHack
	features entry was split across two lines
recovery of strength lost due to weakness from hunger was vulnerable to abuse
monsters hit by scroll of earth boulder did not get angry
hero could "pronounce the words on the scroll" when blind (if its label is
	known) even while being strangled at the time
hero could cast spells while poly'd into a form which can't speak (or grunt,&c)
	or while being strangled
when poly'd into a giant and moving onto a boulder's spot, you could get "you
	try to move the boulder, but in vain", "however, you can easily pick
	it up", "you are carrying too much stuff to pick up another boulder"
improve #adjust command's handling of the '$' and '#' inventory slots
prevent #adjust from allowing anything to be moved into the special '-' slot
sometimes rings dropped into sinks can be found in the pipes
doors in special levels were always generated in vertical orientation
assigning a type name to a potion on the floor which is actually a mimic could
	prompt "Call a stream of <potion-type> fluid:" (bogus 'fromsink')
with perm_invent option enabled and no inventory, 'i' put up an empty menu
charisma affects the leeway in demon lord bribes
make Vlad slightly tougher
reduce the amount of gold laying on the floor
locked chests and large boxes contain more stuff
make shopkeepers bill hero for burying merchandise
monster holding hero takes double damage from an explosion for reaching into
	adjacent spot, but it was being inflicted even when hero was swallowed
	or beyond the explosion radius
poly'd hero holding monster now takes double damage (if monster is within
	explosion radious) instead of inflicting that upon the monster
when trying to swap places with a pet and failing due to pet being unable
	to move diagonally to hero's spot (grid bug or too tight squeeze), if
	pet became untame the map would briefly show hero at pet's location
when trying to swap places with a pet and failing due to pet being trapped
	or disallowed diagonal move, the arrive-on-new-spot code (autopickup,
	trap triggering) executed even though hero didn't ultimately move
being "dead inside" (self-genocide while polymorphed) conferred partial
	invulnerability--normal monster behavior stopped attacking hero
if a fiery monster, wand of fire, or fiery explosion burned up a paper golem,
	it could still leave blank scrolls
hero poly'd into paper or straw golem reverts to human if burned up even when
	Unchanging without any explanation given
hero polymorphed into form which can't wear armor via 'W' (eliciting "don't
	even bother") could wear it via 'P'
make multi-shot missiles fired by monsters be less verbose when they miss
can no longer play controlled notes on musical instrument if impaired
if a special level specified the appearance of a mimic and mimics had been
	genocided prior to creating the level, whatever random monster took
	the mimic's place got its intended appearance
redundant "hit by gush of water" message if poly'd into iron golem or gremlin
a shop object stolen from outside the shop (via grappling hook) would be left
	marked as 'unpaid' after the shop robbery took place, resulting in
	"unpaid_cost: object wasn't on any bill" when looking at inventory
a shop object stolen from outside the shop could trigger a crash if that shop
	had never been entered by the hero
shopkeepers in their own shop and priests in their own temple are no longer
	frightened by hero standing on scroll of scare monster
the Wizard, Angels and lawful minions, the Riders, shopkeep/priest in own room
	are never frightened by tooled horns
'Iu' would reveal unknown container contents if carrying one unpaid item inside
	a hero-owned container whose contents weren't known
docall for type of object could overflow its prompt buffer if there was a very
	long type name previously assigned
whatis lookup for 'more info?' would behave strangely for plural names, either
	entered by player or from "N foo" stacks on the map
you should not hear a whistle if you are deaf
change the deity's "congratulations" message upon ascension to something which
	sounds a bit more archaic to fit better with the other messages
prayer boon of 'fix all troubles' could get stuck in an infinite loop for
	TROUBLE_STUCK_IN_WALL if there was no spot to teleport into available
It shouldn't be considered hypocrisy if you speed up your pet while standing
	on Elbereth
fix 'object lost' panic if hero with lycanthropy but in human form is wielding
	a potion of unholy water which gets boiled/exploded by fire, causing
	were-transformation and drop of wielded weapon
prevent segfault if pline() is called recursively (which could happen if the
	interface code issues a debugpline() while processing putstr())
open at yourself is the same as #loot
when #force reports that a chest's lock is already broken or already unlocked,
	force it to be described as "a chest", even when its lock state is
	already known, rather than as "a broken chest" or "an unlocked chest"
honor wish for "locked", "unlocked", or "broken" chest or box
honor wish for "empty" container including statue, bag-o-tricks, horn-o-plenty
gas spore explosion killing a gas spore which triggers a recursive explosion
	would have killer reason for outer call clobbered by inner one; when
	they were both "gas spore's explosion" it wouldn't be noticeable (see
	corresponding post-3.6.0 entry for more...)
wizard mode 'sanity_check' gave spurious "mon not on map" warnings when mounted
at the prompt for entering a level annotation, responding with <return>
	erroneously removed old annotation; use <space><return> to do that
reorder the #droptype menu and add some separator lines
moving from a pit to an adjacent pit with uncleared debris shouldn't be a fall
open drawbridge spanning ice would vanish if the ice melted
if a warned-of mon moved onto a spot containing a 'remembered, unseen mon'
	then moved off, the unseen marker was redisplayed even though the
	hero should now know that the remembered monster isn't there anymore


Fixes to Post-3.6.0 Problems that Were Exposed Via git Repository
------------------------------------------------------------------
fix "object lost" panic during pickup caused by sortloot revamp
more sortloot revisions
fix inventory menu for response of '?' to getobj (more sortloot revamp fallout)
rings covered by non-cursed gloves not listed as 'R' candidates
in baalz_fixup, move any monster away from the two fake pool spots
switching farlook from xname to doname was giving away information for items
	located via object detection (quantity of detected gold)
changing doname to use "some" instead of precise quantity when an item's
	dknown flag is not set could result in blind hero getting
	"There is a some jackal corpses here.  Eat one?" and
	"You can only lift some of the some jackal corpses.  Continue?"
catch up win/Qt/qt_win.cpp on 18-Dec-2015 change to formatkiller()
fix for long lines in config file (28-Jan-2016) made 'O' command's 'list' and
	'remove' menu choices in interactive handling for menu colorings,
	message types, and autopickup exceptions subject to buffer overflow
when picking a destination for #jump, '$' to show valid dest. is more accurate
enchant armor gave "your pair of boots/gloves glow", should have been "glows"
when autopickup is overridden in a shop, always-pick-up exceptions and
	pickup_thrown still picked unpaid items up
the fix for giving an alternate grow up message when a monster becomes a new
	form with the opposite sex (female gnome into male gnome lord, for
	example) had the logic wrong
DUMPLOG: genocided and extinct species was always a blank line;
	vanquished creatures was just a blank line if nothing had been killed
DUMPLOG: RIP tombstone was printed for characters who survived (ascended,
	escaped dungeon, quit, trickery or panic)
DUMPLOG: pets who accompany hero during ascension or dungeon escape were
	already gone by the time known portion of the level map was dumped
artifact creation violated illiterate conduct when artifact name was assigned,
	behavior intended only for creating Sting or Orcrist via naming
tty: revert to pline() for issuing prompts (override MSGTYPE=hide differently)
previous tty-revert fix had the override test backwards, breaking MSGTYPE
save 'autodescribe' option value prior to detection or #terrain display and
	restore it after rather than leave it forced on
humanoid pet could become hostile but still remain tame if it observed hero
	attacking a peaceful creature
minor ^X/enlightenment bugs: grammar when poly'd into '1 hit dice' critter,
	missing punctuation for "You entered the dungeon N turns ago"
when configured with DUMPLOG enabled, artifacts were counted twice towards
	final score
once Moloch's Sanctum (or Astral Plane via wizard mode level teleport direct
	to end-game) was entered, end of game disclosure would reveal that
	high priests had been incorrectly flagged as extinct
attempting to name an item as an artifact and failing via hand slip violates
	illiterate conduct
crashes for 'A' above were downgraded to impossible "cursed without otmp"
wizhelp: ^O is #overview in wizard mode too; #wizwhere shows dungeon layout
wishing for tins sometimes yielded a tin wand
replace the fix for preventing putting on a helm of opposite alignment from
	causing wielded Excalibur from blasting hero twice
hero poly'd into vampire could drain monster down to 0 HP without killing it,
	triggering impossible "dmonsfree: 1 removed doesn't match 0 pending"
"you observe a fog cloud where a vampire/bat was" if an unseen vampire on the
	far side of a closed door shifted shape to pass under that door
fix mention_walls reporting secret doors as solid stone
jumping over water unintentionally moved hero through that water, causing
	drowning if not able to water walk or fly
try again to fix achievement recording bug with mines and sokoban prizes
the fix for secret doors on special levels always having vertical orientation
	resulted in some--but not all--secret doors within vertical walls
	being displayed as horizontal walls while still hidden
and the previous fix for the for secret doors didn't work if the level hadn't
	been wallified yet (Cav quest) so horizontal wall with secret door
	mis-displayed as a vertical wall segment could occur
and both the previous fixes only worked if the level description contained
	an explicit DOOR directive rather than just '+' or 'S' on the map
	(as with lower right area of Cav 'locate' level)
the fix intended for "a shop object stolen from outside the shop (via
	grappling hook) would be left marked as 'unpaid'" broke normal pickup,
	preventing any picked up item from merging with compatible stack
unix: freeing mailbox data at game end crashed if MAIL came from environment
unix: fix for freeing MAIL introduced a one-byte buffer overrun which could
	interfere with malloc/free operation
unix: fix for freeing MAIL also introduced a memory leak whenever new mail
	is detected and MAIL comes from the environment
when clairvoyance lets you move the cursor to examine the map (if it occurs
	when engulfed or underwater or when blessed clairvoyance finds a
	monster), the "for instructions type '?'" prompt could be confusing
prevent Mjollnir from being auto-quivered if it's been thrown without return
	and then picked back up while quiver slot is empty
plural of "fox" is not "foxen"
gas spore explosion killing a gas spore which triggers a recursive explosion
	would have killer reason for outer call clobbered by inner one;
	"You are hit by the gas spore's explosion!" (inner call, followed by)
	"You are hit by the !" (outer call, possibly repeated for multiple
	explosions causing multiple levels of recursion)
if multiple bands of blank lines were squeezed out of DUMPLOG's map, spurious
	blank lines appeared in the final map output
cursor positioning autodescribe of a statue while hallucinating was blank
tty+EDIT_GETLIN: if prompt plus existing output buffer contents (result of
	a prior getlin() used as default input) was long enough to wrap to
	second line, the wrap point could be different from when the previous
	input was typed, resulting it strange erase-char/kill-chars behavior


Platform- and/or Interface-Specific Fixes
-----------------------------------------
tiles: wrinkled spellbook had a spurious brown pixel on far right edge of tile
tiles: when statues are displayed as corresponding monsters, total_tiles_used
	in generated src/tile.c had incorrect value
tty: M-N gave "Unknown command 'M-" with "'." finishing the sentence on the
	line below it, leaving bogus '.' displayed on the top row of the map
tty: specifying all four of role, race, gender, and alignment still prompted
	for confirmation with "Is this ok?" before starting play
tty: responding with <return> or <enter> during role, race, &c selection
	behaved same as <escape> to quit; now it will pick [random] instead
tty: rename struct variable 'filter' (role.c) and function 'winch()' (wintty.c)
	to avoid conflicts with <curses.h>
tty: skip selector letter and selection indicator (-,+,#) during menu coloring
tty: '>' no longer closes a menu window
tty: if color is disabled and use_inverse is enabled, display lava in inverse
	video so that it is visually distinguishable from water
tty: if "--More--" was written to leftmost column (beginning of second line)
	while hero was swallowed, cursor would end up in wrong place (at end
	of status line instead back on map) after message line was cleared
tty: long message lines which wrap when shown on the top line might be
	re-displayed incorrectly by ^P for msg_window={full,combo,reverse}
tty: MSGTYPE=hide could interfere with display of prompts
tty: treat carriage return as a newline for input text and --More-- prompts
unix/X11: in top level Makefile, some commented out definitions of VARDATND
	misspelled pilemark.xbm (as pilemark.xpm)
unix: options file with CR+LF line ends and an invalid option line resulted in
	"ad option line: "whatever-the-line-was
	because embedded carriage return character changed cursor's position
unix: race condition with parallel make: src/Makefile might start building
	makedefs before finishing monst.o and objects.o; if so, util/Makefile
	can build them too, and they might be clobbered by simultaneous write
unix: Makefile.{src,utl} ignored CPPFLAGS which is expanded by the default .c
	rule by GNU make so if user had a value for that in the environment,
	it would apply to some files but not others; explicitly override it
unix: enable code guarded by USE_WIN_IOCTL by default unless prevented by
	uncommenting #define AVOID_WIN_IOCTL in include/unixconf.h
win32gui: getversionstring() was overflowing the provided Help About buffer
win32gui: guard against buffer overflow in in mswin_getlin()
win32gui: handle menu_color attribute
win32gui: name-from-discoveries list menu selector characters were punctuation
	instead of letters, repeated for each class; caused by the core bug
	of erroneously specifying space as a selector for class header lines
win32gui: allow toggling mouse_support off
MacOSX: initial binary release was built from out of date source code that
	had 'BETA' and 'DEBUG' inappropriately enabled
MacOSX: force TIMED_DELAY build option on so that 'runmode' run-time option
	is functional
Qt: could issue impossible "Destroy called before we know if Menu or Text"
	followed by crash caused by deferencing a Null pointer if player quit
	immediately after creating character and declined to disclose anything
X11: core bug for '`' (backtick) and #terrain commands was only noticed by
	X11 interface: impossible "add_menu: called before start_menu"
X11: enable a scroll bar in menu windows
X11: support pre-selected entries in menu windows
X11: make the extended command menu be easier to use and look a little nicer
X11: make the getline text entry widget display a bigger text entry area
X11: color didn't work when the map was displayed as text rather than tiles
X11: use grayscale monster tiles for statues
X11/USE_XPM: [post-3.6.0 issue] the 'tiles' bug of incorrect total_tiles_used
	for STATUES_LOOK_LIKE_MONSTERS broke XPM manipulation of tiles data
PANICTRACE: PANICTRACE_GDB used wrong value for ARGV0 when launching gdb if
	'nethack -dpath' was used to specify non-default playground directory
win32gui: gather raw_print error messages into a single dialog window
win32tty: fix display errors when using a font with double wide or ambiguous
	width characters
Amiga (untested): 'makedefs -z' didn't handle FILE_PREFIX correctly when
	building vis_tab.h and vis_tab.c


General New Features
--------------------
naming Sting or Orcrist now breaks illiterate conduct
different feedback for reading a scroll of mail created by writing with marker
reading non-cursed scroll of enchant weapon uncurses welded tin opener
if hero has no jumping ability but knows the jumping spell, the #jump command
	will attempt to cast the spell
allow moving cursor to monsters with 'm' (nearest first) and 'M' (furthest
	first) when asked for map location, or to objects with 'o' and 'O'
allow picking a used inventory letter from menu when #adjusting
zapping wand of opening at yourself, unlock carried boxes
dissolve iron bars by force-fighting with wielded potion of acid
poison breath leaves a trail of poison gas
allow knife and stiletto as possible tin opening tools
wizard mode #wizintrinsic command
additional tribute passages for The Colour of Magic, The Light Fantastic,
	Equal Rites, Mort, Sourcery, Wyrd Sisters, Pyramids, Guards! Guards!,
	Eric, Moving Pictures, Reaper Man, Witches Abroad, Snuff,
	Raising Steam, and The Shepherd's Crown
compile-time options SIMPLE_MAIL and SERVER_ADMIN_MSG for public server use
database entries for Cleaver, Sunsword, Frost and Fire brands, and
	polymorph trap
allow showing coordinates when picking a position on the map and
	autodescribe option is on
new status line conditions Stone Strngl Deaf Lev Fly Ride
allow some extra color name aliases for menucolors and status hilites
add extended command #kick
when choosing an inventory item and '-' for bare-hands/fingers/no-ammo is a
	choice, include that in the inventory menu if player types '?' or '*'
feedback from probing of long worm now includes number of segments it has
monk starts with 'shuriken' pre-discovered (despite language issue...)
item-using monster on or next to a fire trap can use it to be cured of
	turning into slime
wizard mode ^G can now specify "sleeping", "male" or "female" when
	creating a monster
REPRODUCIBLE_BUILD is new config.h setting to fetch build date+time from
	environment instead of using current date+time, so that later rebuild
	could duplicate the original (disabled by default; tested for Unix)
default value for vibrating square symbol changed from yellow '^' to purple '~'
allow symbol set values to be specified via char within single quotes
add symbols set "plain", same as default except it uses '+' for corner walls
extend wizard-mode '#stats' command
'Q' to ready an item for quick-throwing ('f') now allows the wielded weapon to
	be moved to quiver; if quantity is more than 1, it offers to split the
	stack and leave 1 wielded, otherwise it requires confirmation
'Q' will accept an item count to manually split a stack as part of it being
	quivered, provided the stack isn't already in the quiver slot
during end of game disclosure, the vanquished monsters list can be sorted in
	one of several ways by answering 'a' to "disclose vanquished monsters?"
when #terrain is displaying a censored version of the map (no monsters, &c),
	moving the cursor will display farlook's brief autodescribe feedback
when monster/object/trap detection temporarily clears the map to highlight the
	results of such detection, farlook autodescibe can be used to view it
interrupt a multi turn action if hp or pw is restored to maximum
pressing d or D when cursor positioning targets doors and doorways
pressing x or X when cursor positioning targets possibly unexplored location
	(potentially useful when using '_' [not mouse] to invoke travel)
swallowers can't re-engulf hero immediately after spitting him/her out
werejackals can summon foxes and coyotes; werewolves can summon wargs
allow taming monkeys and apes with bananas
GENERICUSERS is now a sysconf statement instead of compile-time option
fountains are bright blue, graves are white
ray bounceback chance depends on the wall type
undead #turning takes less time at higher experience level
peacefuls may react when you attack other peacefuls
prevent diagonal jumping through open doorways
different liquids when hallucinating
when moving a cursor for travel target, show if there is no known travel
	path to that location, if "autodescribe" is on
show the reason why travel was interrupted if mention_walls is on
random horses have a tiny chance of being generated saddled
give feedback just before timed levitation runs out
travel accepts 'm' (request menu) prefix
pressing a or A when cursor positioning shows menu of "interesting" features
pressing z or Z when cursor positioning cycles through valid locations for
	jumping, hitting with polearm, or casting a stinking cloud
when moving a cursor for a jump, polearm, or stinking cloud targeting, show
	if the location is illegal, if "autodescribe" is on
wizard-mode command #wizmakemap to recreate the current level
'goldX' boolean option to treat gold pieces as X (vs U) during BUCX filtering
	(should be persistent but is reset each save/restore cycle in order
	to avoid breaking 3.6.0 save files)
for menustyle:Traditional and Combination, support BUCX filtering for item
	pick-up and container put-in and take-out; also for object IDing
for menustyle:Full and Traditional and Combination, support BUCX filtering
	for the 'A' command
option whatis_filter to set filtering for eligible map locations when cursor
	positioning
blinded hero or monster who eats a nurse corpse will have blindness cured
blinded hero or monster who breathes vapor from broken potion of healing,
	extra healing, or full healing might have blindness cured (depends on
	potion: full == always; extra == if not-cursed; plain == if blessed)
sysconf definition BONES_POOLS to allow more bones files per level
blessed scroll of fire lets you choose explosion location like stinking cloud
optional sections in the config file, selected with CHOOSE
new paranoid_confirm settings: wand-break to require "yes" rather than 'y'
	to break a wand via (a)pply, and Were-change to require "yes" rather
	than 'y' when hero inflicted with lycanthropy has polymorph control
option force_invmenu to make commands asking for inventory items always
	use a menu instead of a text line query
option hitpointbar to show a bar graph of hit points behind title field
wielding Trollsbane prevents troll corpses from reviving
wielding Demonbane prevents demons summoning friends
wielding Dragonbane confers reflection
wielding Ogresmasher grants 25 constitution
Cleaver can hit three adjacent monsters with one swing
Master Key of Thievery warns about undetected traps if wielded without gloves
Master Key of Thievery always finds door and chest traps if used to lock or
	unlock a trapped door or chest while non-cursed (for rogues) or
	blessed (for non-rogues); player is offered the opportunity to disarm
"Elbereth" must now be the only engraved text on a square to function
"Elbereth" now erodes based on attacks by the player, not monsters scared
add option herecmd_menu to make a mouse click on your character pop up
	a context menu, and extended command #herecmdmenu to do the same
change #adjust's behavior when collecting compatible stacks; that used to
	occur for any #adjust which lacked a split count, now it only happens
	when 'adjusting' into a stack's own inventory slot
a prayer result which results in uncursing some or all of the hero's items
	won't uncurse a worn helm of opposite alignment since that would
	facilitate the hero switching to another god by taking it off
wielded aklys behaves like Mjollnir when thrown--it usually returns; unlike
	Mjollnir, it isn't limited to Valkyries or need gauntlets of power
	(so far, hero-only; an aklys won't return if thrown by a monster)
allow 'm' prefix for wizard mode level teleport command (^V) to bypass prompt
	for destination and use menu of special level locations


Platform- and/or Interface-Specific New Features
------------------------------------------------
tty: menu_overlay -option to clear screen and align menus to left
tty: compile-time option to output escape codes for tile data hints
unix: compile-time option MSGHANDLER to pass messages to external program
unix: add CHECK_PLNAME-option to sysconf to make WIZARDS, EXPLORERS, and
	SHELLERS check player's character name instead of login name
X11: new NetHack*highlight_prompt resource to control whether the persistent
	prompt line between the map and message windows for the NetHack*slow
	configuration will be highlighted when it's expecting input
X11: NetHack*extcmd_height_delta resource can be used to adjust initial size
	of the extended commands menu
X11: status display split into three columns to accommodate Stone/Deaf/Lev/&c;
	NetHack*status_condition.foreground, .background, and .showGrip
	resources replaced by status_condition[1-3].*
X11: more terminal-like default resources
win32gui: save and load map colors from registry
X11: add new character selection dialog, and obey player_selection:dialog
unix: reduce makefile verbosity by default
win32gui: new player selection dialog
tty, X11, qt4, win32gui: compile-time option EDIT_GETLIN to allow some prompts
	to remember previous input and start with it as the default response


NetHack Community Patches (or Variation) Included
-------------------------------------------------
Malcolm Ryan's improved tin opener
Ray Chason's keyboard may stop responding after locking or unlocking a door
	when using altkeyhandler=nhraykey.dll
Ray Chason's fix: window interfaces that support transparency may give away
	unseen parts of the map
Ray Chason's xprname should honor iflags.menu_tab_sep
Ray Chason's punctuation for "That foo is really a mimic."
Ray Chason's proper background tiles for lava and water
Ray Chason's MS-DOS port restored to functionality with credit to Reddit user
	b_helyer for the fix to sys/share/pcmain.c
Ray Chason's MSDOS port support for some VESA modes
Ray Chason's Qt4 windowport
Darshan Shaligram's pet ranged attack
Jason Dorje Short's key rebinding
Maxime Bacoux's new DUMPLOG: compile-time option to enable logging of
	 end-of-game information into a text file


Code Cleanup and Reorganization
-------------------------------
removed some unused variables and dead code
the level generator no longer uses the native pRNG



$NHDT-Branch: NetHack-3.6 $:$NHDT-Revision: 1.318 $ $NHDT-Date: 1557447310 2019/05/10 00:15:10 $

This fixes36.2 file is here to capture information about updates in the 3.6.x
lineage following the release of 3.6.1 in April 2018. Please note, however,
that another 3.6.x release is not anticipated after 3.6.2, and most developer
focus will shift to the next major release.

General Fixes and Modified Features
-----------------------------------
last line of config file wasn't being heeded if it had no newline
list MSGTYPE values shows empty strings as reported in H7140
Killing Vlad while he was in bat/fog cloud/wolf form gave poorly worded
	feedback when he reverted to vampire form
spaces in hilite_status option title text field not working
numeric hilite_status values didn't allow negative numbers (needed for AC);
	change them to accept leading '-', also accept unary '+' as a no-op
permanent inventory window was updated too soon when a scroll of charging
	was used to [re]charge an item, not reflecting the item's change(s)
for starting inventory, don't give an orc hero lembas wafers or cram rations
targetting with a polearm could give away location of hidden monster
static prototype could be left orphaned depending on #defines in rip.c
config file error handling routines were calling xx_wait_synch early
	even before the window system was initialized; add a default routine
status_finish() in botl.c would unconditionally invoke the window port's
	win_status_finish() routine which was problematic if the windowport
	wasn't initialized yet
using 'O' to set up a hilite_status rule for string comparison, the menu for
	color was titled "choose attribute for when <foo> is 'bar'" and the
	one prompting for attribute used the default "pick an attribute"
when finishing using 'O' to examine or set hilite_status rules, if the
	'statushilites' option is 0 and there is at least one rule, give a
	reminder about setting it to non-zero to activate highlighting
if player creates any menu colors via 'O' while menucolors is off, issue a
	reminder that it needs to be on in order for those to become effective
end of game disclosure was exercising Wisdom when revealing inventory and
	also repeatedly updating persistent inventory window if enabled
internals for 'sortloot' option have been changed to not reorder the actual
	list of objects, so changing it to 'n'one will get the original order
	back and having a persistent inventory window open when performing
	full-pack identify won't result in possibly skipping some items
give vault guards a cursed pea whistle since there is a shrill whistling
	sound if hero teleports out of vault while being confronted by guard
polymorphing worn amulet triggered panic if it turned into an amulet of change
wishing for small mimic corpse or large mimic corpse failed with 'nothing
	matching that exists'; wishing for large {dog,cat,kobold} corpse
	yielded normal size one (size prefix was being stripped off for globs)
wishing for "glob of grey ooze" failed even though grey ooze is recognized
	as a variant spelling for gray ooze
spells of healing and extra healing cast at monsters handled monster blindness
	inconsistently compared to other healing
when using the 'O' command to create a status highlight that specifies
	multiple attributes (blink+inverse, &c), pick all of them in one menu
	selection and create a single hilite_status rule instead of having
	separate rules for each attribute to be merged when highlighting
highlighting status conditions would fail to use attributes if a rule with
	them was followed by another one without (color only or color&normal)
when using 'O' to set hilite_status rules, hide the 'score' status field if
	game has been built without SCORE_ON_BOTL; latent rules for 'score'
	can still be set in config file and removed via 'O' but can't be added
make stone-to-flesh behave the same on statues of petrified monsters as it
	does on random 'dungeon art' ones (revive at a nearby spot instead of
	becoming a corpse when there's already a monster at statue's location)
special level loader didn't support populating several types of special rooms
	(ant hole, cockatrice nest, leprechaun hall)
eating rings while polymorphed didn't handle bonus/penalty for increase damage,
	increase accuracy, or protection correctly
shopkeeper's position in front of shop door didn't correctly handle bottom
	edge of irregularly shaped shop due to typo or copy+paste error
	(latent bug; no such shops are present in 3.6.x)
attempting to update permanent inventory window during restore had problems
	with unpaid items (needed shop bill before shop and its shopkeeper
	were restored) and also with named fruit
remembered corpse which isn't there anymore would be described by farlook as
	the corpse of a random monster type
when eating a tin of spinach, don't "feel like Popeye" if sustain-abilities
	prevents any strength gain
summary text [for message history] of quest message Pri 00081 (Priest quest
	success message given when bringing quest artifact to leader)
	misspelled "congratulations"
verbal charm/seduce messages were given even when hero was deaf
succubus/incubus seduction might result in loss of levitation which in turn
	could drop the hero onto a trap that transports him/her elsewhere;
	seduction was proceeding as if nothing unusual had happened
#turn command which aggravated monsters did so without using a turn (not a pun)
fix hole/trapdoor passage inconsistency when polymorphed into a giant
making a wide-open special level with FLAGS:inaccessibles could trigger a
	"floodfill stack overrun" panic (no 3.6.x levels were affected)
wallifying a special level might go out of map bounds (not with 3.6.x levels)
	and corrupt other level data
if a random grave produced during level creation included some gold, that gold
	was left on the ground instead of being buried with other treasure
multiple instances of shop damage at same spot (before repairs, so a broken
	door or dug wall plus trap creation) only charged hero for first one
shop door repair which took place when hero was on another level only worked
	correctly if a trap at the same spot was removed
object scattering during shop wall repair was skipped if a trap at the same
	spot was also being removed
augmented death reason for "while helpless" was broken for record and logfile
	(but still correct for xlogfile)
prevent wish prompt input from remembering the previous wish
parchment and vellum are made from animal skin so change material composition
	and color for spellbooks with those descriptions from paper to leather;
	eating those books now breaks vegetarian conduct
fix monsters not wielding digging implements
wizard mode ^I^I didn't make temporary identifications become persistent if
	the build configuration makes plain 'char' unsigned
wizard mode #wizidentify didn't disclose extra information for unID'd items if
	key bindings took away ^I and didn't bind #wizidentify to another key
make transformation message of a deliberate apply of a figurine seem a bit
	less definite when blind and place unseen monster marker at the spot
	you think it should be
add window port status_update() value BL_RESET to use as a flag to redraw
	all status fields, distinguished from BL_FLUSH which now only
	specifies that the bot() call has completed so any buffered changes
	should now be rendered
for hilite_status of string status fields (title, dungeon-level, alignment),
	the types value-goes-up and -down aren't meaningful; treat them as
	value-changed if from config file and don't offer as choices with 'O'
jumping into or over a Sokoban pit, or over a fire trap, triggers trap twice
mimics created by #wizgenesis could block or not block vision incorrectly
handle monsters inside the invocation area
give monsters who have had a worn item stolen or who have been life-saved
	(used up amulet) a chance to wear replacement gear on next move
	instead of having to wait until they pick something up
Unchanging hero in clay golem form will be killed when cancelled
poly'd shapechanger and hiding mimic will revert to normal when cancelled,
	like werecreature in beast form and non-Unchanging hero
cancelled shapeshifter is no longer able to change shape
cancelled shapeshifter hit by polymorph magic will become uncancelled
polymorph zap which created a new long worm (or retains an old one via wizard
	mode monpolycontrol) could hit that worm multiple times (tail segments)
wishing for "orange" could yield orange or orange colored gem/potion/spellbook
a sleeping or paralyzed mon would be frightened by its reflection when
	applying a mirror
prevent leash showing unseen monster as "attached to it"
gremlins seemed impervious to Sunsword's light yet a flash from a camera
	caused them to cry out in pain
when objects migrated (fell down stairs) and invisible hero (w/o see invisible,
	no-autopickup) descended, stairs got shown instead of object(s) on them
drum of earthquake was causing deafness but oddly enough only when used up
known bear trap was being forgotten about by a player polymorphed into a
	flying monster if the player unsuccessfully tried to #untrap it and
	moved onto the trap square as a result
no leash-related message is given when a leashed pet yellow light explodes
shop messages refer to shk by name even when shk is not visible but some
	used pronoun "it" or "its" in same sentence; ditto for vault guards
poly'd hero and monsters could eat through iron bars in areas where walls
	were flagged as non-diggable
Samurai seeing items at a distance could have them be described by their
	ordinary names rather than by their Japanese names
wizard mode ^T shouldn't have been diminishing player power but it was
	and hilite_status:power settings really drew attention to that
fix missing space in "would flyif you weren't levitating"
a wand of polymorph lost its magical ability for the turn just because the
	player using it to engrave happened to be blind, which didn't make
	much sense
floating eye is classified as a flyer but flying is blocked while levitating,
	so don't set intrinsic flying when hero is polymorphed into one
change default value for the 'autodescribe' option to 'on'
Elbereth hypocrisy penalty doesn't apply if attacking a monster which isn't
	frightened by Elbereth; normal scuffing of engravings still applies
Elbereth hypocrisy penalty reduced when alignment is already low
during character creation, don't unset alternate weapon when a shield gets
	worn (was preventing knight from having lance set up as uswapwep)
preformatted Guidebook.txt split line in middle of "' '" for #wait command
prevent simiulated screenshot in Guidebook.txt from spanning page boundary
overview information for former hero was not being set properly when bones
	file was saved, so current hero coming across a dead hero's grave
	didn't have #overview feedback augmented with "final resting place"
in Guidebook.mn and Guidebook.txt, the 'I' command mis-described `IX' as
	displaying inventory items whose bless/curse state is "known"
	(Guidebook.tex correctly had "unknown")
poison gas (stinking cloud) wasn't shown at drawbridge-up spot
prayer result which enhanced strength (fix weakness from hunger) didn't give
	a message if a change in encumbrance occurred; it came on next move
add current location within the dungeon to the Background section of ^X and
	final disclosure (it's not background but doesn't fit anywhere else)
death from something other than loss of hit points could leave hero with
	non-zero HP at end of game (during "really die?" prompt, disclosure)
added several special cases for genocide and/or wishing prompt: (cookie,
	pie, genie, watchmen)
lightning strike from Mjollnir did not make any noise
with menustyle:Full, picking 'A - autoselect all' when putting items into a
	container actually took everything out of that container
add missing 'A - autoselect all' choice for menustyle:Full when taking items
	out while looting a container
fix odd wording "The boulder triggers and fills a pit"
^X status feedback: don't report "not wearing any armor" when wearing a shield
attempting to #ride a long worm's tail could trigger impossible "worm_cross
	checking for non-adjacent location?"
avoid "The " in "The <known-artifact-but-not-The-artifact> falls down stairs."
avoid potential buffer overflow if object with very long name knocks other
	objects down stairs when dropped, thrown, or kicked there
#wizintrinsic for 'flying' didn't update status line when flying ended
#wizintrinsic for 'warn_of_mon' didn't set any type of monster (now grid bugs)
clairvoyance would show trap instead of a monster on/in that trap, which was
	intentional, but when clairvoyance finished the monster wasn't shown
clairvoyance revealing underwater or under-lava objects left object displayed
	instead of restoring the water or lava
nurse corpse/tin chance to convey poison resistance when eaten was not honored
make tame vampires be more aggressive when shifted to bat/fog/wolf form
a stale gold symbol could be displayed on the status line following a switch
	to a new symset, as observed and reported for Windows RogueEpyx symset
successfully paying for shop damage with shop credit would be followed by
	impossible "zero payment in money2mon"
if a migrating monster was killed off because there was no room on the
	destination level, it would leave a corpse even if it was a type
	which should never leave one (demon, golem, blob, &c)
monsters accompanying hero during level change (usually pets) who failed to
	arrive and tried to re-migrate were being removed from the map after
	already having been removed [impossible "no monster to remove" if
	compiled with EXTRA_SANITY_CHECKS enabled] during migration handling
monsters accompanying hero during level change (usually pets) who failed to
	arrive and tried to re-migrate (for hero's next visit to the level)
	ended up being killed because the migration attempt happened right
	away (same visit by hero, so level still full) and they weren't
	accompanying hero on the second attempt
fix for above (all failed arrivals will re-migrate) makes the earlier fix (for
	invalid corpse being left by monst killed upon migration failure) moot
end of game while carrying Schroedinger's Box would reveal cat-or-corpse
	for inventory disclosure or put that info into dumplog, but not both
attempting to untrap an adjacent trap while on the edge of--not in--a pit
	failed due to not being able to reach the floor
magic trap's deafening roar effect wasn't waking nearby monsters
scattering of objects might leave source location with wrong thing displayed
for configurations with 'long int' larger than 'int', lev_comp wrote some
	garbage into the *.lev files, but nethack seemed unaffected by that
	(at least on little-endian hardware) and loaded the levels successfully
stinking cloud placed near water could kill underwater creatures
applying--rather than wielding--a cursed polearm or weapon-tool didn't report
	that it had become welded to hero's hand(s)
the message when riding a steed into a pit was composed but not shown
dismount that killed steed because there was no room to put it on map blamed
	hero; change that to only blame hero if dismount is voluntary
to emphasize that it's not a light source, change description of wielded Sting
	from "(glowing light blue)" to "(light blue aura)" when sighted and
	from "(glowing)" to nothing (not warm enough to feel) when blind
	[subsequently changed in different manner; see 'exposed via git' below]
glowing Sting quivers if hero becomes blind and quivering Sting glows if
	blindness ends; it worked for timed blindness but not for blindfold
weapon (wielded pie, egg, potion, boomerang) might be destroyed when hitting a
	long worm, then freed memory was accessed to decide whether to cut it
level change after being interruped locking or unlocking a container might
	access freed memory
if a restore attempt failed and a new game was started instead, it would use
	stale context from old game if restoration got far enough to load that
if hero survives turning into slime (life-saving), survive as a green slime
hero hit by something that causes inventory items to be destroyed with loss of
	any of those causing other inventory items to be dropped or destroyed,
	inventory traversal became unreliable (known sequence: potions hit by
	fire then breathing vapor from boiled unholy water triggering 'were'
	transformation to beast form; possible sequence: ring of levitation
	blasted by lightning and dropping hero onto fire trap); [3.6.1 fixed a
	similar problem with more obvious symptom, an "object lost" panic when
	the unholy water was wielded; the fix for that wasn't general enough]
add MM_ASLEEP makemon() flag and honor it when creating group for fill_zoo
add MM_NOGRP makemon() flag as a means of suppressing groups of monsters in
	a couple places that warrant it when a specific monster type isn't
	specified on the call to makemon()
at start of session (new game or restore), HILITE_STATUS for gold was ignored
setting second or later named fruit to value beginning with two or more spaces
	followed by non-space gave "singular of null?" warning
when blocking/unblocking of levitation or flying was updated due to walking
	onto different terrain, the relevant status condition wasn't updated
	on the screen until some other status update happened
if levitating hero in pass-wall creature form jumped or teleported from
	terrain that allowed levitation to terrain that didn't or vice versa,
	blocking of levitation wasn't updated properly
digging down or level teleporting while stuck in solid rock which is blocking
	levitation or flight didn't notice when that should become unblocked
make it easier to clear 'pickup_types' (menustyles Traditional and Combination
	could do so by setting it to 'a'; now ' ' works too; Full and Partial
	allowed unselecting every object class; now 'all classes' is a choice)
distribution of monsters selected by mkclass() didn't match expected distrib
	(cited example was ndemon() creating twice as many incubi as succubi)
while inside a shop, dropping an unpaid item inside an engulfer would leave
	that item 'unpaid' and it would remain so on shop floor after the
	the engulfer was killed; treat dropping shop items inside an engulfer
	as stealing them and giving them to that engulfer--hero must pay for
	them and shop retains ownership of them
while levitating inside a shop, throwing an unpaid item and having recoil move
	hero out of shop (or to shopkeeper's spot in front of door) would
	leave the item unpaid on shop floor and also on the shop's bill but
	not visible via 'Iu' or 'Ix'; leaving the shop after that would anger
	the shopkeeper and summon kops
diluted potion of oil is less effective when filling lamps (adds less fuel)
	or burning (lasts less long) or exploding (inflicts less damage)
apply fix from grunthack to prevent panic "fakecorr overflow" when vault guard
	couldn't figure out how to lead the hero from vault to civilization;
	fixes longstanding bug C343-23
vibrating square is not really a trap so monsters don't need to avoid it
if hero kicks some embedded gold out of a wall while following vault gaurd
	away from vault, don't report "the guard _calms_down_and_ picks up
	the gold" unless he's on brink of going ballistic
for '/?' information lookup, "item named The Artifact" failed to find info
	about "Artifact" due to presence of "The"
identifying or forgetting gem types now adjusts prices for gems already on
	shopping bill
when fire converts an ice location into a water location, dunk any monster on
	that spot immediately instead of waiting until its next move
training riding skill had an off-by-one bug when counting turns riding
message sequencing when vampire shifts to fog cloud to pass under closed door:
	when in sight, give form change message before moving to door spot
limit carrying heavy loads from water to land
failing to carry a wished-for item behaved differenctly from dropping one
life-saving while weak/starving/fainting boosted nutrition without restoring
	lost point of strength, making temporary loss be permanent
unlike #chat in a shop, walking on an item in a shop failed to include price
	for hero-owned container holding shop-owned items
bag of holding explosion inside shop billed hero for unpaid contents if it
	happened when applied while carried but not when looted while on floor
looking into an applied container with ':' showed prices of unpaid items but
	looking into a looted one with ':' did not show prices for shop items
prevent achievement luckstone from merging with other luckstones if kicked or
	dropped by monster (not applicable for dropped by player; achievement
	would have been recorded and luckstone reverted to normal if picked up)
when splitting a stack where internal ID is used to make adjustment to
	shop prices, pick an ID for new stack that yields same prices as old
when merging a stack where internal ID is used to adjust shop prices, always
	keep the ID which induces the higher price (only matters when buying
	from shop, not when selling; doesn't affect items already on bill)
since knives became stackable in 3.6.0, fake player monsters could be given
	multi-quantity stacks for weapons (scalpel, athame) they never throw
using 'O' to attempt to set bouldersym to a monster letter or warning digit
	while it still had its default value would override the display value
	for it to be <NUL> ('\0') after 'badoption' feedback
when ^T resorted to the teleport-away spell if hero didn't have intrinsic
	telepotation, it used different hunger/strength/energy requirements
	than casting with 'Z'; ^T also required that the corresponding book
	be known even though knowing and casting a spell should be (and is
	with 'Z') possible after forgetting the spellbook due to amnesia
setting SEDUCE=0 made all succubus and incubus attacks be described as
	smiling engagingly or seductively rather than hitting or missing
entering Ft.Ludios with a lit candle lit up the entire entry room except for
	one corner spot; that corner is beyond candle radius but other spots
	even further away were being shown; in knox.des, force the walls to
	be unlit in order to prevent those wall spots from showing so soon
a couple of short wall segments in the "Gnome King's Wine Cellar" variant of
	Mines' End were diggable; one stone spot which should have been, wasn't
boulder dropped or launched by a monster onto a monster trapped in a pit and
	killing it credited/blamed the hero and might trigger a deltrap panic
the simulation of dual weapon combat when polymorphed into a form with more
	than one weapon attack allowed off-hand artifact to be used; it also
	used seconary weapon even when wearing a shield, or if it was silver
	even when current shape couldn't handle silver, or if it was cursed;
	cursed is allowed but weapon will be dropped, just like in two-weapon
demons gated in other demons without any message
if a vampire revives from from dead bat/cloud/wolf shape while held by hero
	poly'd into a grabber, release it from hero's grasp
various non-weapon attacks while polymorphed didn't inflict blessed or silver
	weapon damage when worn items contacted vulnerable target monsters
hero poly'd into rope golem form could choke headless or non-breathing monsts
hero poly'd into creature with hug attack could hug a long worm's tail which
	rendered the whole worm immobile
smudging of an engraving has been relocated to after a succesful move
	and both your former location and your resulting location are
	subject to the smudging
monster with multiple items in inventory could trigger 'dealloc_obj with nobj'
	panic when turned into a statue if separate mon->minvent items merged
lock picking context could end up with stale container pointer if container
	being forced/unlocked/locked got destroyed or sent to another level
teleporting out of a vault after guard appears could result in the guard being
	stranded in a one-square long temporary corridor adjacent to vault
	wall and periodically saying "Move along!"
if game ends while hero is in a vault wall breach or in guard's temporary
	corridor, a message "you are encased in the rock" could be given when
	guard repairs things (for possible bones); suppress it if hero is dead
DUMPLOG: output from '/' (#whatis) and ';' went into ^P message recall history
	but was missing from DUMPLOG's message history due to special handling
	for the first character which might be graphical rather than text
when donning armor, defer flagging its +/- value--which can be deduced from
	the status line--as known until finished in case it gets stolen before
	then (player might still deduce the +/- value but hero won't learn it)
a monster with resistances supplied by worn armor would lose them if that
	monster went through a shape change even if the armor stayed worn
when using 'f' to fire/throw--and possibly some ^A's to repeat--then running
	out of ammo (with either 'autoquiver' off or nothing suitable to put
	in quiver), using ^A would put whichever inventory item was assigned
	the same letter as the prior direction into quiver slot (unless item
	was already worn or wielded) and then ask for a direction to fire it
persistent inventory window would show "(being worn)" for armor that was in
	the midst of being put on or taken off; it is 'partly worn' in such
	circumstances so "being worn" could be misleading
toggling perm_invent on didn't immediately show persistent inventory window
some fish should lay their eggs in the water rather than on land
wand or spell of undead turning handled messages and wand-discovery in a
	non-intuitive manner biased toward healers
if steed ate a mimic corpse and began masquerading as something, hero could
	keep riding it; force dismount
kicking an object stack moves the topmost 1, but range calculation used the
	weight of the whole stack to decide how far it would move, possibly
	yielding "thump" result with no movement despite being a light item
status lines' dungeon location field in the elemental planes now shows Earth
	or Air or Fire or Water instead of generic End Game
avoid spurious status refresh when hero gains experience while 'showexp' and
	'showscore' options are off
using Cleaver to attack a worm tail segment but killing adjacent head first
	would result in an impossible warning from cutworm
Valkyrie quest was supposed to have a 50:50 chance that northern drawbridge
	would be raised, but both were always lowered; chances now are: both
	lowered: 3/8, S down+N up: 3/8, N down+S up: 1/8, both raised: 1/8
shorten the getpos prompt for teleport destination so that it won't yield a
	--More-- prompt for the help hint (--More-- still possible when riding)
once a status highlight for a temporary rule ('up', 'down', 'changed') timed
	out, further spurious status updates (evaluating all fields) would
	occur every 'statushilites' turns even if no fields had changed
if a migrating long worm couldn't be placed, or some other monster was given
	an existing long worm's place and it couldn't be put somewhere else,
	a "trying to place monster at <0,0>" warning would occur
if hero throws a pick-axe into a shop and shopkeeper catches it, shk would say
	"get out of my way, scum" even if there was no monster at pick-axe spot
a quantum mechanic hit that teleported the target could also kill it at the
	destination; make sure that the small amount of physical damage isn't
	fatal unless the teleport is negated by cancellation (magic or armor)
if a mimic concealed itself as a corpse, it could pick a monster type which
	never leaves a corpse
message given when shape-shifted vampire cheats death by reverting to its
	original form ignored hallucination when describing old and new forms
Vlad wasn't set up as a vampshifter properly
poly'd hero capable of spitting venom would leave intact venom object if it
	reached end of range at a 'soft' location such as water
avoid impossible if monster cannot be relocated from teleport region
fix cloned monster trapped and hiding states
split monster could be placed on trap without triggering it
turning into green slime would make wielded or carried crysknives revert to
	worm teeth in bones data even though they remained carried


Fixes to Post-3.6.1 Problems that Were Exposed Via git Repository
------------------------------------------------------------------
fix access violation when --debug:xxxx has no other args after it
setting the inverse attribute for gold had the space before "$:"
	getting highlighted along with the gold field
sortloot segfaulted when filtering a subset of items (seen with 'A' command)
orctown: prevent "Bad fruit #0" and some minor tuning
orctown: orcs beyond the mines were being given any left-over booty and named
	as part of the same marauding gang operating within the mines
make long extended commands list be more navigable
simplify #wizidentify; don't rely on having bold menu entries
add object class group accelerators to #wizidentify
ensure tmp_at() structures are initialized for all code paths when swallowed
trapped-vs-levitation/flying change broke Sting releasing hero from web
life-saving while poly'd and Unchanging wasn't restoring u.mh (HP as monster)
change in searching stopped finding unseen monsters except hiders and eels
buliding with EXTRA_SANITY_CHECKS enabled would issue "no monster to remove"
	warning if steed was killed out from under the hero
changing Sting's description to be "(weapon in hand) (light blue aura)" was
	too close to feedback when objects become blessed; change it again,
	to "(weapon in hand, flickering/glimmering/gleaming light blue)"
fix bit-use collision between WC2_TERM_SIZE and WC2_RESET_STATUS in
	include/winprocs.h following a recent merge
fix foxen pluralization again after underflow remedy reintroduced the problem
fix "placing monster over another?" warning for vault guards
status highlighting classifies gold, time, and experience-points as data type
	'long' but when selecting hilite rule to use treated them as 'int'
a config file line with OPTIONS=symset:default, roguesymset:RogueEpyx
	was disabling color on RogueEpyx even though the symset is
	meant to have color; that was due to an errant init_symbols() call
	during the processing of symset:default done after RogueEpyx had
	already been processed
avoid potential segfault when doing 'more information' lookup
when built with STATUS_HILITES enabled (the default), gold on status line
	was missing '$' prefix for symset:Blank
wizard mode ^G, creating a monster of class 'I' yielded impossible "mkclass
	found no class 35 monsters"
wizard mode ^G, creating a monster via class name using "lo" through "long wor"
	or "long worm t" through "long worm tail" yielded impossible "mkclass
	found no class 59 monsters" (class '~' creates a long worm as intended)
if bouldersym bug (via 'O', above) put a <NUL> ('\0') on the map, examining
	that spot matched placeholder monster class #0 and triggered impossible
	"Alphabet soup: 'an("")'."
wizard mode m^T, not selecting a teleport choice didn't teardown the menu
	properly and could eventually lead to "No window slots!" panic
when in a shop and using ':' to look inside a container in inventory, items
	owned by hero showed price they'd be charged if hero was buying them
when in a shop and using ':' to look inside a container on shop floor, items
	that shopkeeper didn't care about weren't shown as "no charge" unless
	the hero owned the container
when engulfed while in a shop, dropping an item into the engulfer and then
	using ':' to look at current location could cause a crash
when items were on the floor just inside a shop's door where the shopkeeper
	doesn't buy and sell stuff, those items showed a 'for sale' price
probing a monster inside a shop (including shopkeeper) showed 'for sale'
	price for items in monster's minvent
applying a container while inside a shop and initiating a put-in operation
	would show non-empty containers in inventory--including the one being
	applied--with "for sale" amounts for the prices of their contents
after 'when donning armor, enchanment becomes known even if interrupted' fix,
	wearing a jacket, fedora, or dented pot (no multi-turn delay
	worn in a slot which usually has one) didn't make +/- become known
when persistent inventory window is enabled, wearing armor didn't immediately
	update it with armor's newly observed +/- value
having an artifact wish be refused ("for a moment you feel <artifact> in
	your hands, but it disappears") would immediately segfault
using 'O' to set status hilites for any status condition (Blind, &c) and
	specifying more than one attribute (Bold, Inverse, &c) it would only
	retain one of the chosen attributes
when u.uhp==-1 became a flag to suppress status updating, if game ended when
	hero died with exactly -1 HP, status would be blank during disclosure
mimic mimicking a shop item didn't show any shop price for whatis and glance
the SEDUCE=0 fix broke #chat to succubi/incubi
early rolling boulder trap lacking any boulder might still have the corpse
	of a dead adventurer
tty: turn off an optimization that is the suspected cause of Windows reported
	partial status lines following level changes
tty: ensure that current status fields are always copied to prior status
	values so that comparisons are correct
tty: fix an out of bounds error in tty_status_update() for BL_HUNGER case
tty: fix leftover display artifact when the last field on the row got placed
	to the left of where it was previously due to it, or one of the fields
	to its left, getting shorter
tty: support hitpointbar even when statushilites is set to 0
tty: when status condition names were abbreviated due to lack of room, they
	were inconsistent about re-expanding when more room became available
tty: when encumbrance state was abbreviated due to lack of room, there was no
	separation from preceding status field and the value would not update
	when the state changed (except for removal on change to unencumbered)
tty: when clipping was used to show a subset of the map on a small display,
	panning into a new subset while using the cursor to pick a location
	would ask the core to generate a new view of the map rather than use
	whatever was currently shown, bringing back suppressed monsters/
	objects/traps for #terrain and new hallucinatory monsters for farlook
Qt5, perhaps others: avoid "status 'reassess' before init" panic near start
	of new game (triggered from set_uasmon() if core was built with
	STATUS_HILITES enabled but current interface doesn't support that)
X11: its use of genl_status_update exposed a negative index use that could
	lead to a segfault
X11: rollback disabling of keystroke input for PICK_NONE menus (for scrolling)
X11: make use of the 'extmenu' option:  On to choose among all commands, Off
	to choose among the traditional extended command subset
X11: support menu scrolling via (^ < > |) in the extended commands menu
curses: catch up with tty to not put dolook/whatis autodescribe feedback into
	^P message recall (multi-digit count feedback was already handled)
curses: if the interface code ran out of memory, it would crash rather than
	attempt a controlled panic (though that's fairly likely to crash anyway
	if done when there's no more memory available)
curses: when getting multi-character responses from player, support <delete>
	as well as <backspace> to remove last character entered; also, return
	<escape> to core if ESC is typed when there is no input entered
curses: extend preceding <delete> support to typing of extended command names
curses: support hilite_pet and hilite_pile even when color is disabled
curses: support color hilite_status rules even if 'guicolor' is off
curses: update status if 'O' is used to add/change/remove hilite_status rules
curses: was doing a full status update for every changed field even when more
	than one field was being changed at the same time
curses: 'hitpointbar' now works even when status highlighting is disabled
curses: add 'statuslines' option (value is 2 or 3)
curses: change 'windowborders' option's value (0=Off, 1=On, or 2=Auto instead
	of 1=On, 2=Off, 3=Auto; can now be changed via 'O' during play)
curses: free allocated memory prior to exit; previous attempt at this only
	handled game-over, not saving
curses: the memory deallocation was releasing previous messages when curses
	interface reinitialized its main windows after resize or 'O' was used
	to set align_message, align_status, statuslines, or windowborders;
	using ^P before next new message gave a warning about empty menu
curses: popup window to show ^P output was removed from screen but never
	deleted; further ^P's repeated that cycle; likewise for help which
	displays an external text file
curses: preserve ^P message history across save/restore
curses: highlighting of status conditions was broken by the fix for timing out
	of temporary highlights setting off unnecessary status updates
curses: if player pressed ESC at More>> prompt to suppress remaining messages
	for the current move and then hero got another move on the same turn,
	messages and most prompts would stay suppressed during that extra move
curses: don't let MSGTYPE=hide block prompts from being shown
curses: the --More-- prompt (">>") wasn't always placed in a visible location,
	especially when window borders were displayed


Platform- and/or Interface-Specific Fixes or Features
-----------------------------------------------------
move 'perm_invent' value from flags to iflags to keep it out of save files;
	affects X11, win32, and curses (save file compatibility is preserved)
always define shell and suspend commands so that key bindings copied from one
	platform to another work even if second one disables those commands
amiga: fix missing line continuation characters in Makefile
MacOSX: add curses window port
MacOSX: add Xcode project to sys/unixNetHack.xcodeproj
MacOSX: add Xcode supporting files README.xcode and XCode.xcconfig
	containing important build info
Qt: add Qt5 specific hints file for linux and Mac OS X (Ray Chason)
Qt: enable compiling Qt5 on Windows (Ray Chason)
Qt: entering extended commands, hide non-matching ones
Qt: remember tile and font size
tty: significant optimizations for performance and per field rendering
tty: use WC2_FLUSH_STATUS to buffer changes until BL_FLUSH is received
tty: support BL_RESET in status_update to force an update to all status fields
tty: stop hitpointbar from jumping to 100% health at zero hit points
tty: try harder to prevent a disconnected terminal (SIGHUP) from running amok
	and using up all available CPU time
tty: suppress intermediate 'Count: 123' prompt and getpos autodescribe
	feedback from being included in ^P message recall
tty: ^P feedback with msg_window:full/combination/reverse containing output
	from dolook/whatis could show strange characters for DECgraphics
tty: if eight_bit_tty option is set and current symbol set specifies
	DECgraphics handling, render line-drawing characters (in nethack's
	scheme, the 4th quarter of ASCII--mostly lower case letters--with
	8th-bit forced on) instead of treating that subset as 8-bit characters
tty: enable blink attribute for status highlights (TERMLIB + !NO_TERMS config)
unix: Makefile.src and Makefile.utl inadvertently relied on a 'gnu make'
	extension when using $(VERBOSEMAKE) to reduce build-time feedback;
	replace with $(QUIETCC) which operates the same but defaults to
	verbose so doesn't use '$<' for multi-prerequisite targets unless
	specifically requested; use 'make QUIETCC=1 <target>' to get the
	3.6.1 behavior back
unix: add curses window port
unix: in nethack.sh, use 'test -f' instead of 'test -e' when checking for
	fonts.dir while running under X11
vms: data file processing and playground setup were missing post-3.4.3 files
	engrave, epitaph, and bogusmon made from corresponding *.txt
vms: add compile of isaac64.c to Makefile.src and vmsbuild.com
vms+curses: add compile support but it is known to fail to build
windows: Added ntassert() mechanism for Windows based port use
windows: heed OPTIONS=symset:default in config file if it is present
windows: add curses window port which can co-exist with tty in exe and be
	selectable in user config file via OPTIONS=windowtype:curses
windows-gui: In nethackw, there could be conflicts between menu accelerators
	and an extra choice accelerator to fix H7132.
windows-gui: recognize new BL_RESET in status_update; no change in behavior yet
windows-gui: align hpbar behavior at zero hit points with tty behavior
windows-gui: add support for status_hilites for the player condition field
	such as stone, slime, strngl, blind, deaf, stun, conf, etc.
windows-gui: a shop or vault message could appear in a popup after the
	close-window button was used when game was ending
windows-tty: Specify both width and height when creating font for width testing
windows-tty: To counter lag problems that were occuring with the Win32 console
	port, implement a console back buffer to reduce the number of calls
	made to WriteConsoleOutputXXX
windows-tty: Additional changes to xputc_core() and early_raw_print() to
	manage the cursor position correctly as that is needed to handle
	raw printing correctly
windows-tty: Added check for when we might be running off the bottom of the
	screen when handling msmsg()
windows-tty: Added runtime checks to keep cursor always within bounds
windows-tty: Fix memory leaks as reported in H5779
windows-tty: Use nhraykey by default if the player's keyboard layout is
	non-english as reported in H4216
windows-tty: We now support changing altkeyhandler in game
windows-tty: augment codepage850-to-Unicode mappings that are not displayable
	with codepage437-to-Unicode mappings that are, to help ensure that
	rogue-level characters o status line match their appearance on map
windows-tty: add support for mouse_support:0 (disabled), mouse_support:1
	(fully-functional including disabling QuickEdit on Windows console
	because QuickEdit intercepts the mouse clicks so NetHack never sees
	them), or mouse_support:2 (NetHack support on but QuickEdit left as is)
X11: implement menucolors and allow menus to obey some attributes
X11: make key translations work with menus on Linux
X11: allow mouse wheel scrolling to work in menus by default
X11: handle menu scrolling via first-/previous-/next-/last-page keys (^ < > |)
X11: remember perm_invent window geometry
X11: handle X errors via panic
X11: don't reuse perm_invent window for picking an object
X11: obey mouse_support and allow toggling it in game
X11: obey menu movement keys
X11: enable menu [cancel] button for PICK_NONE menus
X11: text popups on OSX wouldn't accept keyboard input unless the 'autofocus'
	resource was enabled; most noticeable when trying to dismiss 'things
	that are here' while walking over object piles
X11: default to using XPM format tile file and rip screen
X11: when showing graphical tombstone, would crash if file rip.xpm is missing;
	revert to text tombstone instead


General New Features
--------------------
integrate aklys feature introduced in 3.6.1 into display
status_hilite options which use comparisons may now use <= and >= in
	addition to previous < and >; in 3.6.1 the latter operated as if
	they were <= and >= but now behave as conventional less than and
	greater than; old highlight rules using them should be updated
sortloot option has been enhanced to improve object ordering; primarily,
	items of undiscovered type come out before items of discovered type
	within each class or sub-class of objects
YAFM when stumbling on an undetected monster while hallucinating
make it clear when a leprechaun dodges your attack
wizard mode #wizidentify can now select individual items for permanent
	identification and don't display the selection to permanently
	identify everything if everything is already fully identified
make mine town "orctown" variation a multiple level feature of the mines
replace #monpolycontrol command with monpolycontrol boolean option
replace #wizdebug_traveldisplay command with travel_debug boolean option
rename #wizdebug_bury command to #wizbury
life-saving now makes swallower or grabber release hero
for ^X and enlightenment, display the information in a menu rather than a
	plain text popup, so that player can go back within the text via
	'<' (menu_previous_page) and '^' (menu_first_page) menu keys;
	needed for interfaces (tty) without text popup scrollbar support;
	end of game disclosure of attributes remains single-forward-pass
for ^X, include current state of 'autopickup'
being trapped (bear trap, web, molten or solidified lava, chained to buried
	iron ball) blocks both levitation and flight (note: being stuck in a
	pit ends when either of those starts so doesn't apply)
early level traps are sometimes covered by the remains of fake players
fake player characters resist Conflict
when inside a shop, far-look now includes shop prices for items marked as
	having been seen up close
when sortloot is enabled, gems are grouped in subsets (1) unseen gems and
	glass, (2) seen but unidentified gems and glass, (3) identified gems,
	(4) identified glass, (5) unseen stones (includes unseen rocks),
	(6) seen but unidentified gray stones, (7) identified gray stones,
	and (8) seen rocks (IDed/unIDed not applicable)
in wizard mode, ^T can be preceded by 'm' prefix in order to test teleporting
	without having wizard mode override various restrictions
include isaac64 for pseudo random number generation
core prng and display prng use different contexts
when healing magic other than unicorn horn cures blindness, cure deafness too
do less status updating when the 'time' option is on
slightly more thorough feedback when shop damage is repaired in hero's presence
curses: status display substantially revamped for both horizontal (via
	'align_status:bottom' or 'top') and vertical (via 'align_status:left'
	or 'right'); 3-line horizontal layout (via 'statuslines:3') added
curses: support msg_window:full; default is still msg_window:reversed
tty: support statuslines:3 and dynamically switching between 2 and 3 with 'O'
	(requires a display with at least 25 lines or that CLIPPING be enabled)


NetHack Community Patches (or Variation) Included
-------------------------------------------------
curses: the community patch for an optional curses window-port has been
	adopted.  The curses window-port evolved from work originally done
	by Karl Garrison, and has been in use in several NetHack variants
	and on nethack.alt.org and on www.hardfought.org/nethack/ for a
	while.  It is available and tested for 3.6.2 for Windows console
	with PDCurses layered underneath, and for Mac OSX and Unix (using
	ncurses as the layer underneath).  It may also work for MS-DOS with
	PDCurses, but that has not been tested.


Code Cleanup and Reorganization
-------------------------------
generated source file monstr.c is no longer used




$NHDT-Branch: NetHack-3.6 $:$NHDT-Revision: 1.197 $ $NHDT-Date: 1575173931 2019/12/01 04:18:51 $

This fixes36.3 file is here to capture information about updates in the 3.6.x
lineage following the release of 3.6.2 in May 2019. Please note, however,
that another 3.6.x release is not anticipated, and most developer
focus will shift to the next major release.

General Fixes and Modified Features
-----------------------------------
when place_object() puts a non-boulder on the map at a spot which contains
	other objects, put it under all boulders in the pile rather than just
	under the top one; previously, map wasn't showing a boulder there if
	the top one got moved by means other than pushing
when examining the map with '/' or ';', picking a symbol which is used for
	more than 4 things yielded a sentence lacking its terminating period
billing and payment issue as a result of glob coalescing
glob pricing did not consider weight properly
glob shop interaction improved to handle more of the expected scenarios
non-flying steed on Plane of Water would drown when air bubble moved hero
xans fly, but could not reach your feet if you flew
adjust vortex database entry to be consistent with fire and energy vortices
when co-located with a boulder you could sometimes swap places with pets of
	any size
on rare occasions, multiple mine's end luckstones were being marked as the
	prize and triggering an impossible() on a public server
make sure the correct luckstone is the prize in mine's end
free dungeon overview's bones information at end of game
free current level's bones information at end of game
free ball and chain if Punished hero dies while descending stairs or dies or
	quits while swallowed; put ball and chain in bones for the stairs case
if hero dies while a thrown or kicked object is in transit, put that object
	on the map in case bones data gets saved
fix a memory leak that occurred if player used wizard mode to leave and return
	to the Plane of Air or Plane of Water (not possible in normal play)
free sortloot data if object handling is short-circuited by cockatrice corpse
on the Plane of Water, make water go all the way to the edges of the level
on the Plane of Air, make clouds disrupt line of sight along the edges
have '&' (whatdoes) command describe movement keystrokes instead of reporting
	them as unknown or showing their number_pad action when that is Off
some improvement to the handling of endgame levels filling up with monsters
if you survive turning into green slime due to life-saving (surviving as a
	green slime) then die again due to green slimes having been genocided,
	the feedback was strange because it assumed that the prior message
	came from answering No to "Really die?" in explore or wizard mode
various cases where objects had their bless/curse state become known weren't
	updating persistent inventory window, when enabled, to reflect changes
	(cited case was trying to remove cursed armor and being told of the
	curse but there were lots of other situations with the same issue)
similar perm_invent issue when lock state known and/or contents known become
	set for carried container
blessed scroll of remove curse read while confused might be shown to operate
	on itself by perm_invent after player is told that it has disappeared
fix memory leak if corpse auto-revival attempt failed ("you feel less hassled")
allow a parent function to issue an an unplacebc() call that restricts
	subsequent placebc() calls to that parent only
flying monsters could enter water on the Plane of Water but then they'd drown
	unless they could also swim or else didn't need to breathe
when finding a place to put a monster on the Plane of Water, don't pick a
	water location for flyers or floaters (levitate) or clingers (ceiling)
#turn worked when unable to speak despite "you chant an arcane formula"
#turn implicitly required sight due to wrong check for avoiding spanning walls
thrown or kicked light source (lit lamp, candle, oil) should emit light as it
	traverses the map; dungeon features, objects, or monsters seen while
	it's in transit will become part of hero's memory of the level, and
	any messages delivered won't have stale light from it around the hero
unlike watching a monster trying to swap out a cursed weapon for some other
	weapon and failing, watching it wield a cursed weapon didn't report
	that weapon becoming welded to the monster's hand/claw/whatever
accept "hidden" as an attribute for wizard mode ^G monster creation; created
	monsters which can't be seen will have their locations highlighted
don't give feedback for monster zapping a wand if a monster plays a fire horn
	directed at self to burn away slime
if hero knows the number of charges in a wand or magical horn and a monster
	acquires it and zaps/plays it when not in view, remove the hero's
	memory of the number of charges
for wizard mode 'monpolycontrol', allow usually disallowed type 'chameleon',
	'doppelganger', or 'sandestin' as answer to "change <monster> @ <x,y>
	into what?" prompt when <monster> is really that type of creature
add Space, Return, and Escape to '? k' (help for menu control keys)
hero can no longer negotiate a bribe with a demon lord when deaf
wishing for "foo amulet" now yields an "amulet of foo" rather than random one
code in parse_conf_file() to trim trailing blanks/cr was skipping over them
partly eaten food with one bite left had message anomalies when eaten; the
	usual "you resume your meal" case lacked the "you're finished" message
	when done; eating something else in between to clobber meal context
	resulted in no messages at all when restarting and finishing last bite
wizard mode ^I menu could list "Not carrying anything" after inventory items
	if perm_invent option was On (even on tty where that's not supported)
wizard mode ^I with 'perm_invent' On would unintentionally filter the content
	of the persistent inventory window to unIDed items if any item got
	chosen to be identified (^R would fix it, as would any invent change)
change #adjust to treat carrying only gold as not having anything to adjust
saving bones with 'perm_invent' On could result in "Bad fruit #N" warnings
update persistent inventory window immediately if 'sortpack' option is toggled
grammar bit for wizard mode final disclosure; attribute section could show
	"You had N experience points, 1 more were needed to attain level X+1."
if an engulfer has any worn items, hero could pick them up from inside and
	they wouldn't be unworn properly, eventually triggering warnings or
	worse (Juiblex will wear an amulet if created with one; a shapechanger
	might wear one and then turn into an engulfer)
kicking an altar ignored god's wrath if hero injured himself during the kick
detect unseen/secret door detection/^E failed to find monsters hiding under
	objects and failed to find monsters hiding at trap locations
when farlook describes a monster at a visible spot as trapped, reveal the trap
fix theft when poly'd into nymph form; 3.6.2 change made that anger the victim
hero poly'd into nymph would steal gold along with other items
change wizard mode #panic to require "yes" if 'paranoid_confirm:quit' is set
add some additional validation checks when setting up a new timer (triggered
	by an ancient source comment rather than by any observed problems)
if a chaotic monk or wizard gets crowned and is given a spellbook rather than
	Stormbringer as the crowning gift, don't describe the hero as having
	been "chosen to steal souls for [Arioch's] glory"
for multi-shot shooting by monsters, a typo checked hero's weapon for
	compatibility with ammo when monster was wielding an elven bow
when a boulder was teleported, if it landed in a pit or trap door or hole its
	former location wasn't updated to show that it wasn't there anymore
	(noticed in Sokoban but not limited to there)
Terry Pratchett tribute, fix typo in passage #4 for Mort ("the" -> "they");
	also passage #7 for Soul Music ("genious" -> "genius");
	and passage #11 for The Light Fantastic ("to" -> "do");
	passage #3 for Eric ("short" -> "sort");
	passage #10 for Witches Abroad ("was" -> "what")
fix typo in end_of_input() present since 3.6.0 that would prevent compilation
	for NOSAVEONHANGUP+INSURANCE configuration
when a status condition becomes fatal, keep it listed as an active condition
	during disclosure and/or dumplog rather than having it already reset
when a shape-shifted sandestin was turned to stone, it died and reverted to
	sandestin form with 0 HP; that confused known_hitum() because
	sandestins are immune to stoning; net result was monster dying twice,
	triggering "dmonsfree: N removed doesn't match N+1 pending" warning;
	instead of dying, make it revert to sandestin form with full health
toggling perm_invent (where supported) while swallowed or underwater didn't
	necessarily update the persistent inventory window right away
have 'O' update persistent inventory window if 'implicit_uncursed',
	'menucolors', or 'guicolors' (curses) is toggled or if menucolors is
	On and any menu color patterns are added or removed
'O's "set <option> to what?" could be used to force a buffer overflow
'O's response to bad 'statuslines' value said "must be 2 and 3" (at one point
	it was "must be between 2 and 3", change it to "must be 2 or 3")
when spellcasting monster aimed at wrong spot due to not being able to see
	invisible hero, feedback could be erroneous if hero could see self
	[messages used 'if (Invisible)' test where 'if (Invis)' was meant]
prevent impossible when guard tries to relocate a monster on a full level
hallucination provides partial protection from passive gaze counterattack
	against hero's attack; check for that before checking for free action
feedback from blessed potion of restore ability never reported "you feel great"
	due to bad logic for not-unihorn case in unfixable_trouble_count()
when rubbing a ring on a touchstone, all types of rings were treated as if
	they were gems; an iron ring made a cyan streak instead of yielding
	"scritch, scritch" and a gold ring made a yellow streak rather than
	a golden scratch
zapping self with wand of opening or spell of knock to escape from a trap
	reported "you're released from <trap>" rather than "from the <trap>"
zapping self with wand of opening or spell of knock to escape from a pit trap
	didn't reset vision limits--only spots adjacent to pit were visible
wielded aklys that returned to hero when thrown while inside an engulfer left
	a stale 'thrownobj' pointer that triggered "add_to_minv: obj not free"
	panic if same weapon killed any engulfer via melee from inside
uarmh null pointer dereference if a helm of opposite alignment came off due
	to being polymorphed
verb tense was inappropriate in some messages when a mon/pet had a name
	ending in 's'
orctown booty items should have been initialized in mksobj()
query_category() and whatdoes_help() had early returns which could each leave
	a temporary window around, which in turn might eventually lead to a
	panic due to lack of window slots [probably moot for unmodified 3.6.x;
	the query one couldn't happen unless there is a coding error for
	object classes somewhere and the help one couldn't happen unless the
	installed data files left 'keyhelp' missing]
ball and chain could end up too far from punished hero (triggering b&c warning
	for wizard mode with sanity checking active) when crawling out of
	water failed because dropping stuff left hero overly encumbered and
	hero was life saved--or player declined to die--if the hero got
	teleported one step further from ball and chain's current location
avoid 'object lost' panic when polymorph causes loss of levitation boots or
	water walking boots which dumps hero into water where emergency
	disrobing/dropping in order to crawl out chooses to drop those boots
'sortloot's attempt to group musical instruments separately from other tools
	didn't work as intended due to missing 'break' in sortloot_classify()
<shift><letter> running told player about engravings as they were being moved
	over but buffered output didn't show it until hero stopped, so it
	wasn't possible to tell where they were, unlike all other forms of
	multiple movement; so stop running if/when an engraving is reached
fix exploding land mine moving ball or chain and causing a sanity error
fix firing attached iron ball when swallowed causing a sanity error
fix vault guard impossible when he could not relocate in certain situation
fix temple priests or shopkeepers moving over other monsters
fix hero still hiding under a statue shattered by a land mine
fix helping a monster out of a pit addressing a deleted trap
fix launched rolling boulder code accessing deleted trap
fix monster stepping on a land mine code accessing deleted trap
revise 'O' to show symbol sets in the same order they appear in the symbols
	file and order the sets in dat/symbols to yield a sensible symset menu
yellow dragons had green breath
partly eaten food in a bones level shop would show a non-zero sale price
	while on the floor but not be placed on shop bill if picked up;
	sale price should have been "no charge"
when non-empty container is dropped in shop and hero is asked whether to sell,
	counting the subset of contents owned by hero vs those owned by shk
	could obtain wrong answer because the container had been placed on
	the floor but the 'unpaid' and 'no_charge' flags of its contents
	hadn't been updated yet, they were still set for when it was carried
in a shop which doesn't care about tools:  You drop a <box> containing 1 item.
	<Shk> offers you <gold> for your items in your <box>.  Sell them?
	[plural 'items' and 'them' were including the box along with the one
	item in it even though shk was only offering to buy its contents]
grammar correction for "That walking shoes is really a small mimic" when
	applying a stethoscope
mimic immitating a slime mold would change fruit type when player assigned new
	named fruit
parsing for the argument to 'scores' option was sloppy; "3a/o" (slash) and
	"3a 1o" (space and digit one, not lowercase L) both worked but "3a o"
	(just space) was supposed to but didn't
wizmakemap could leave genocided monsters on map
when entering Astral level, initial rendering of guardian angel didn't show
	it as tame; noticeable if the level was entered with 'hilite_pet' On
fix a leashed pet polymorphed into a long worm staying leashed
prevent leashing unsolid monsters and monsters with no extremities
playing musical instruments gave feedback which ignored deafness
some other deafness-related message corrections
when dipping into holy/unholy water while blind (where the glow message is
	suppressed), clear dipped item's bknown flag unless water potion's
	bless/curse state is known
playing music while hallucinating:  message misspelled "butterflies"
putting on gloves while having slippery fingers transfered slipperiness to
	those gloves; taking off slippery gloves directly was disallowed but
	losing them in other ways transfered slipperiness to bare fingers
when a monster reads a scroll of fire to cure sliming, don't access that
	scroll's memory after it has been used up (bcsign)
monster vs monster attacks didn't handle shades or silver weapon feedback
successful alchemy would show new potion's description (color) even when blind
dipping some types of objects into oil would yield "<object> gleams with an
	oily sheen" even when blind
dipping into an undiscovered potion would offer chance to give a name to the
	potion even when its description wasn't known (picked up while blind)
dipping lichen corpse into acid when not blind and acid was undicovered would
	not offer a chance to give a name to the potion after lichen feedback
pluralization improvement for words ending in a k-sound like "biotech"
check for whether a monster was entering a region (gas cloud) erroneously
	depended upon whether or not the hero was inside the same region
all Is_*_level tests during early startup would test as true until
	dungeon_topology was initialized in a new game or restored from 
	a save file


Fixes to Post-3.6.2 Problems that Were Exposed Via git Repository
------------------------------------------------------------------
elemental_clog() loop needed to guard against obliteration of the monster
	that was trying to be placed
using ^G to create "hidden mimic" shouldn't have marked it as undetected since
	mimics 'hide' by appearing to be something else; honor "hidden" for
	'hides_under' creatures if/when created at location with object(s),
	also for eels and other fish if/when created at water location
for wizard mode 'wizweight' option, glob weight wasn't shown unless glob had
	shop price information attached
fix for feedback when a monster plays a fire horn at self to cure green slime
	ended up being used for zapping a wand of fire at self too
wizard mode ^I "not carrying anything" still claimed "not carrying anything"
	if "(all items are already identified)" was given
monster throwing from stack of missiles (darts, daggers, spears) would cause
	crash if it wasn't wielding a weapon (bug in multi-shot shooting fix)
surviving death while polymorphed would yield "You are a <foo>" without
	terminating period
'mksobj failure' commit resulted in wrong corpse types for dying monsters
a recent intended sanity check fix inadvertently bypassed placing a thrown
	chained ball back onto the floor
in symset:curses, symbol S_tree was accidentally set to horizontal line where
	plus-or-minus sign was meant; also, change S_bars to not-equals sign
percentage highlighting for Xp broke up/down/changed highlighting for it;
	it was flagged as having gone up every time the percentage changed
deaf change to zap_over_floor needed to be restricted to player actions only
monster vs shade attack inflicted damage despite "passes harmlessly through"
fix for feedback from musical instruments played while deaf ignored whistles
special map display symbol S_player_override renamed to S_hero_override
curses: sometimes the message window would show a blank line after a prompt
curses: the change to show map in columns 1..79 instead of 2..80 made the
	highlight for '@' show up in the wrong place if clipped map had been
	panned horizontally
curses+'perm_invent': menu coloring patterns which match ordinary inventory
	menu might fail to match persistent inventory window because leading
	article and space ("a ", "an ", "the ") is stripped off for brevity;
	perform the pattern matching tests before stripping doname() prefix
tty: revert the attempt to fix "message line anomaly: if autodecribe feedback
	wrapped to second line, the wrapped portion wasn't erased when a
	shorter line was shown or getpos was dismissed" because it disrupted
	prompts that spanned more than one line, a more significant issue


Fixes post-beta1
------------------------------------------------------------------
fix several tribute typos
pluralization correction for unlikely epoch and loch
ensure that --showpaths displays the personal configuration file last
don't strip leading slash from hallucinatory monster name "/b/tard"
quaffing unknown potion of see invisible resulted in asking what to call the
	potion while updated monster display was buffered so not yet shown,
	hence potentially noticeable effect was concealed from player
when Riders use their bargethrough capability, don't let them swap places with
	something located at a spot where corpses can't be created (their
	door opening ability was letting them exchange places with something
	co-located with a closed door without opening it; if killed there,
	there'd be no corpse so no auto-revive)
putting on levitation boots while on sink would crash when attempting to set
	the enchantment known flag on Null 'uarmf' pointer
look-at of mimics mimicking altars got an arbitary alignment from misuse of
	underlying terrain
polymorph_sink creating an altar passed a call to rn2() as an argument to a
	macro which evaluates its parameter more than once
if a monster (presumably sensed but not seen) was displayed at a location
	showing "remembered, unseen monster", remove that since hero now knows
	something else is there (3.6.1 had similar fix for warned-of monsters)
clairvoyance showed all monsters in range, then after player viewed the map,
	replaced them with "remembered, unseen monster" glyph and finally
	did a normal monster refresh; the 'I' glyph step clobbers remembered
	object at same spot, so skip it for locations where monster refresh
	is going to immediately redisplay a monster
take holes that you avoided into consideration when you're on the brink
update window port spec to include a color-availability table that the window
	port can set; merge all has_color() implementations into one central
	function in src/windows.c which uses a few data checks only and
	elminates multiple string function calls for each map cell update
	that were being done in some cases previously
taking off a fedora or dented pot (no-delay helmets) left the helmet stuck
	and took off hero's suit
unix: fix double DLB definition in linux hints file
windows: fix --showpaths output for the data file which relies on being
	constructed programmatically to incorporate the version suffix
windows+tty: add code to make keypad support for swap_yz behave (currently
	commented out in include/ntconf.h)
windows: fix self-recover user prompting (tty, curses, mswin)


Platform- and/or Interface-Specific Fixes or Features
-----------------------------------------------------
EDIT_GETLIN: wizard mode 'monpolycontrol' was using the getlin() answer buffer
	to format the coordinate portion of the "change <monster> @ <x,y> into
	what kind of monster?" prompt, resulting in "<x,y>" as default answer
EDIT_GETLIN: when naming an object or a monster use the existing name, if
	there is one, as the default answer
EDIT_GETLIN: using 'O' to set message types or menu colors was overloading the
	answer buffer with other stuff, resulting in bogus default response
	during repeat prompting
EDIT_GETLIN: for paranoid confirmation, if answer was neither "yes" nor "no",
	don't supply the rejected answer as the default when retrying
USE_FCNTL: nethack wasn't closing lock file 'perm'
curses: very tall menus tried to use selector characters a-z, A-Z, and 0-9,
	but 0-9 should be reserved for counts and if the display was tall
	enough for more than 62 entries, arbitrary ASCII punctuation got used
curses: when all available lines in the message window are in use,
	autodescribe feedback for 'pick a position with cursor' overwrote
	the last line (usually the 'pick a position' prompt/hint), sometimes
	leaving part of longer underlying line's text visible
curses: if message window is only one line, cancelling some prompts with ESC
	left the prompts visible on the message line instead of erasing them
curses: support EDIT_GETLIN (but like with tty, it's disabled by default) to
	pre-load an earlier response as the default answer for some prompts
	(however, it's skipped if the 'popup_dialog' option is On)
curses: when display windows get reconfigured (after setting align_status,
	align_message, statuslines, windowborders or due to external resize),
	the message window was being refreshed with most recent message and
	the oldest available N-1 messages rather than next to most recent N-1.
	[Still room for improvement when short lines are combined or long
	ones are wrapped, where it still shows a subset of N original lines.]
curses: plug memory leak when getting a line of input is cancelled by ESC
curses: after requesting a line of input from player, next line of message
	window could end up being skipped
curses: don't convert ^M (or <return> or <enter> key) into ^J; both ^J and ^M
	indicate end of input when typing a line of text but as nethack
	commands, ^J means run toward bottom of screen (when number_pad is
	off) and ^M is not bound to any command, so accidental <return> won't
	cause the hero to try to move
curses: draw map in screen columns 1..79 like tty, rather than in 2..80
curses: make text windows wider so that help feedback is more readable
curses: using ':' for toggling menu items which match a search string, in a
	multi-page menu it would highlight arbitrary items on the currently
	visible page in sync with lines that matched items have on other pages
curses: when map window was clipped, position bars shown to indicate which
	part of the map was in view didn't work as intended, always drawing
	"*--------------" for horizontal (and comparable '*' with multiple '|'
	underneath for vertical) when it meant to show "---******------" if
	the 2nd and 3rd fifths (for example) were currently within view
curses: support users's setting for erase char and kill char when getting a
	line of input with 'popup_dialog' Off (already supported for popup On)
curses: support erase char and kill char when choosing an extended command
curses: attempting to use ^H to rush left actually executed ^G (#wizgenesis)
curses: disable the attempt to support Ctrl+Left_click as an alternate way
	to generate Right_click for systems with one-button mouse or trackpad;
	the mouse data passed to nethack didn't match the curses (ncurses on
	OSX 10.11) documentation and things didn't work as intended
curses: menu coloring required that both 'menucolors' and 'guicolor' be On;
	for menus, ignore 'guicolor' and honor more-specific 'menucolors'
curses: support symset:curses and symset:DECgraphics for map display
curses: enable the 'use_inverse' boolean option (via wincap WC_INVERSE flag)
	for extended monster detection and black&white lava; forced to True
	to override default of False (for tty's benefit)
curses: force 'O' command's menus for 'symset' and 'roguesymset' options to
	be wider so that fewer entries with set descriptions will wrap
curses: stop restricting menu width to half the display width
curses+'perm_invent': entries were wrapping without any control; usually not
	noticeable because next entry overwrote, but visible for final entry
	when whole inventory fit within the available height; looked ok with
	borders Off but clearly wrong for borders On
curses+'perm_invent': if too many entries for window height, last one which
	fit had the next one appended (including hightlighted selector letter)
	when window borders were Off
curses+'perm_invent': top line was wasted (left blank) when borders Off
curses+'perm_invent': don't highlight inventory letters since nothing is
	selectable from the menu comprising the persistent inventory window
curses+'perm_invent': could crash during restore if game was saved while
	hero was swallowed (invalid u.ustuck pointer; suppressing attempts to
	update persistent inventory window during restore hides the problem)
curses+'popup_dialog': show the text cursor at the end of prompts for single
	character input
curses+DUMPLOG: pass along old messages from save file and quest message
	summaries to dumplog message history
curses+EDIT_GETLIN: when a prompt's answer was preloaded, using ESC to discard
	it deleted it from the answer buffer but didn't erase it from screen
curses+EDIT_GETLIN: the preceding fix handled an answer which spanned more
	than one line but didn't remove the answer properly if the prompt
	portion of prompt+answer spanned more than one line
msdos:  code fixes to allow a build with curses and PDCurses
msdos:  added Makefile1.cross (host portion) and Makefile2.cross (target 
	platform portion) to assist in moving this port toward a cross-compiled
	build hosted on linux/OSX/Windows with recent C dialect support; that
	will also pave the way for CI automation and testing of the msdos port
	build in future should the port remain on the radar; currently only
	useful for testing the msdos port compile as it cannot yet build a
	complete game
tty: re-do one optimization used when status conditions have all been removed
	and remove another that tried to check whether condition text to be
	displayed next was the same as the existing value; sometimes new
	status condition wouldn't be shown unless a screen redraw was forced
tty: take two, if/when autodecribe feedback wraps past top line, clear
	continuation lines and redraw map if needed when top line is cleared
	['exposed by git' section has an entry for reversal of 'take one']
tty: video attributes (bold, inverse, &c) for status highlighting sometimes
	were scrambled
unix: sysconf CHECK_PLNAME=1 wouldn't work if attempt to obtain unix username
	failed even though it didn't need that to check player character name
unix+curses: startup error only reset terminal for tty; one noticeable
	example was answering 'n' to "Destroy old game?"
vms: update install.com to include overlooked file bigrm-10.lev in nh-data.dlb
Windows: some startup error messages were not being delivered successfully
WindowsGUI: player selection dialog box layout was not being adjusted for DPI
Windows: significant changes to default directory choices; see documentation
	for details


General New Features
--------------------
classify sources as released, beta, or work-in-progress via NH_DEVEL_STATUS
	rather than just released vs beta via BETA
if you reach the edge of a level (relatively uncommon) and try to move off,
	report that you can't go farther if the 'mention_walls' option is set
'attributes' disclosure at end of game includes number of experience points
	that were needed to reach the next experience level (new for normal
	play and explore mode; previously only shown for wizard mode)
report Friday-13th/phase-of-moon/time-of-day for ^X and final disclosure when
	their values matter to game play (date and moon are from the start of
	current session and are not dynamically updated as real time elapses;
	night is a fixed range of hours using the computer's conception of
	local time which could differ from player's if there are time zone or
	system clock issues or simply seasonal variation based on latitude;
	not new but needs to be documented somewhere other than spoilers...)
status highlighting using percentage rules now supported for experience level
	and experience points; for both, percent is based on Exp progress from
	the start of the current Xp level to the start of the next Xp level;
	100% isn't possible so used as special case for next_Xp_lvl - 1 Exp_pt
wizard-mode: display effect to show where an unseen wished-for monster landed
for 'O's symset and roguesymset menus, mark current symbol set as preselected
curses: enable latent mouse support
curses: give menus and text windows a minimum size of 5x25 since tiny ones can
	sometimes be overlooked when shown over old messages rather than map
curses+'perm_invent': since persistent inventory is narrow, strip off "a",
	"an", or "the" prefix on inventory entries shown there so that a tiny
	bit more of the interesting portion is visible
curses+'curses': change the curses map display to use new symbol set 'curses'
	instead of hard-coded values; it attempts to show IBMgraphics-style
	map using DECgraphics characters; DECgraphics can also be used as-is
fulfill a request from a blind player to have a unique overriding SYMBOL for
	pets and for the player
ROGUESYMBOLS can be overridden in config files like SYMBOLS can
in symset:DECgraphics, set S_altar to 'pi' (was default '_'), S_bars to
	not-equals sign (was 'pi')


NetHack Community Patches (or Variation) Included
-------------------------------------------------
add a couple of engraving suggestions in pull request #79
chasonr's faster method to write characters to msdos VGA in pull request #220
chasonr's msdos Makefile.gcc pdcurses build changes in pull request #243
autopickup exception priority change in pull request #226
FIQ's curses (PDCurses) number pad changes in pull request #247


Code Cleanup and Reorganization
-------------------------------
began to add some function caller BREADCRUMBS to aid debugging
flag existing occurrences of "You hear" as "Deaf-aware" to aid in
	future maintenance






$NHDT-Branch: Nethack-3.6 $:$NHDT-Revision: 1.14 $ $NHDT-Date: 1576976556 2019/12/22 01:02:36 $

fixes36.4 contains a terse summary of changes made to 3.6.3 in order to
produce 3.6.4 as well as any post-release fixes in binaries.
 

General Fixes and Modified Features
-----------------------------------
GDBPATH and GREPPATH from sysconf or -D... on compilation command line were
	being processed even if PANICTRACE was disabled but only being freed
	at end of game when that was enabled
fix the article used in the message when your steed encounters a polymorph trap
allow teleporting onto the vibrating square
message "your knapsack can't accommodate any more items" when picking stuff up
	or removing such from container was inaccurate if there was some gold
	pending; vary the message rather than add more convoluted pickup code
dozen-ish assorted spelling/typo fixes in messages and source comments
fix potential buffer overflow when parsing run-time configuration file
wizard mode wishing for terrain would leave it unmapped if done while blind
wizard mode terrain wish could leave hero in water (severe vision limits) or
	in lava (trapped, sinking) which wasn't there any more
flying hero can go down (via '>') holes or trap doors instead of escaping trap
polymorphed hero hiding on the ceiling can now use '>' to unhide instead of
	being told "you can't go down here"


Platform- and/or Interface-Specific Fixes or Features
-----------------------------------------------------
fix compilation on platforms that split the ncurses and tinfo libraries
Windows: allow all game files to be on a portable device via the sysconf
	option 'portable_device_paths'


General New Features
--------------------
none




$NHDT-Branch: NetHack-3.6 $:$NHDT-Revision: 1.3 $ $NHDT-Date: 1578996303 2020/01/14 10:05:03 $

fixes36.5 contains a terse summary of changes made to 3.6.4 in order to
produce 3.6.5 as well as any post-release fixes in binaries.


General Fixes and Modified Features
-----------------------------------
fix accessing mons[-1] when trying to gate in a non-valid demon
fix accessing mons[-1] when monster figures out if a tin cures stoning
have string_for_opt() return empty_optstr on failure
ensure existing callers of string_for_opt() check return value before using it
fix potential buffer overflow in add_menu_coloring()
fix potential buffer overflow in sym_val()
fix potential buffer overflow in pline(), raw_printf(), and config_error_add()
	via bad config file values or command line arguments
fix potential buffer overflow in choose_windows()
use vsnprintf instead of vsprintf in pline.c where possible


Fixes to 3.6.5 Post-release Problems
------------------------------------


Platform- and/or Interface-Specific Fixes or Features
-----------------------------------------------------
Windows OPTIONS=map_mode:fit_to_screen could cause a game start failure
Windows users with C-locale unmappable names could get game start failure

General New Features
--------------------
none




$NHDT-Branch: NetHack-3.6-Mar2020 $:$NHDT-Revision: 1.2 $ $NHDT-Date: 1583606861 2020/03/07 18:47:41 $

fixes36.6 contains a terse summary of changes made to 3.6.5 in order to
produce 3.6.6 as well as any post-release fixes in binaries.


General Fixes and Modified Features
-----------------------------------
invalid status highlight color could be maliciously used to corrupt memory
formatting corpse names used internal buffers differently from formatting
	other objects and could potentially clobber memory
avoid divide by 0 crash if 'bogusmon' (file of bogus monster types) is empty
avoid #wizrumorcheck crash if either 'rumors.tru' or 'rumors.fal' or both
	were empty when makedefs built 'rumors'
avoid "<mon>'s glorkum pass harmlessly through the shade" for weaponless mon
  

Platform- and/or Interface-Specific Fixes or Features
-----------------------------------------------------


General New Features
--------------------
none




NHDT-Branch: NetHack-3.7 $:$NHDT-Revision: 1.540 $ $NHDT-Date: 1621387861 2021/05/19 01:31:01 $

General Fixes and Modified Features
-----------------------------------
hero polymorphed into a vampire can use #monster to shape-shift rather than
	just do a one-shot polymorph into bat/cloud/wolf and shifted vampire
	hero can use #monster again to take on another form (randomly chosen
	among the shiftable shapes and true vampire form)
adjust bones filename buffer sizes to accommodate suffix
fix internal self-recover to work with recent fields added to checkpoint file
improvements to pronoun usage when hallucinating
function calls made from map_glyphinfo() based on dungeon level are now called
	once per level
fast hero could have random clairvoyance happen more than once on same turn
using 'Q' on wielded weapon would offer to split stack; make using 'w' on a
	quivered stack behave similarly
weight for giant spider was too low for creature of size 'large';
	weight for giant beetle was much too low for 'large'
leave some menu items out of "invert all" via '@' when their inclusion would
	degrade the usefulness of that interface feature
change crysknife from mineral to bone and worm tooth from unspecified to bone
worn meat ring shouldn't cause increased hunger; neither should fake Amulet
worn +0 ring of protection should cause increased hunger if it is the only
	source of extrinsic Protection
monster wielding Stormbringer or healer's Staff against another monster would
	heal the hero instead of the wielding monster when draining life
change twoweapon feedback from "not a weapon" to "not a suitable weapon"
don't allow twoweapon combat if either weapon is a bow, crossbow, or sling
	[later: or arrows, bolts, and missiles (darts, shuriken, boomerangs)]
drum of earthquake feedback reported various things (fountains, thrones, &c)
	falling into a chasm but they remained intact because trap creation
	had been changed to not clobber such things (so couldn't make pits)
make earthquake which hits a secret door or a secret corridor reveal it
wizard mode wishing for "Amulet of Yendor" had 50:50 chance for true Amulet
	or a cheap plastic imitation; recognize "real Amulet of Yendor" and
	"fake Amulet of Yendor" to precisely specify either of them but also
	take away the 50% chance of yielding a fake one when neither real nor
	fake is specified
unpaid globs showed weight info unconditionally outside of wizmode
walking out of tethered-to-buried-object trap condition was supposed to
	reinstate punishment but wasn't finding the buried iron ball because
	the trap condition was cleared first to indicate escape; result was
	attached chain that got dragged around but had no ball attached
when poly'd into a giant and moving onto a boulder's spot, message given was
	confused about whether autopickup would occur so could be misleading
random role selection wasn't honoring unwanted alignment(s) properly
if at the edge of the map window, trying to move farther fails but used a turn
hero can no longer wear blindfold/towel/lenses when poly'd into headless form
revamp achievement tracking for exploring Mine's End and Sokoban (by acquiring
	luckstone and bag of holding or amulet of reflection, respectively)
throttle long worm growth rate and HP accumulation
poly'd hero was able to zap wands, apply tools, and #rub objects without
	having any hands
spellcasting monster got an extra move after casting
allow defining #wizgenesis quantity in the prompt
digging through iron bars from an adjacent pit made a pit on top of the bars
give feedback if controlled level teleport attempt fails because hero is
	already on the bottom level and player tries to go even deeper
unseen pet that drowned didn't give "you have a sad feeling" message
prevent ravens from blinding other ravens: /corvus oculum corvi non eruit/
have ^X provide more information when held or swallowed
display wasn't updating immediately after toggling hilite_pet option
randomly choosing role could lead to crash via segfault
if eel bite attack caused hero to move (killed + rehumanized + crawled out
	of water), its grab attack could succeed even if no longer adjacent
specifying a count when picking [part of] a stack of scrolls of scare monster
	ignored that count and the whole stack was affected
wizmakemap didn't account for unique monsters and didn't correct monster
	birth counts
generate objects (eg. statues) with genocided or extinct monster classes
	in special levels, if requested
if the orc-town version of mine town has been loaded, creation of orc zombies
	or orc mummies would name them as part of the town raiding orc clan
when punished, involuntarily teleporting and landing within chain range of
	attached ball while encumbered worse than burdened could trigger
	"remove_object: obj not on floor" panic on hero's next move
update persistent inventory when 'menu_headings' or 'sortloot' options change
update persistent inventory when putting on a helmet causes it to auto-curse
inventory cursing caused by "this water's no good" effect when drinking from
	a fountain didn't update persistent inventory window
leashing or unleashing pets wasn't updating persistent inventory window
when the wetness of a towel in inventory changed, persistent inventory wasn't
	updated to show that
using wizard mode identify to ID 'all' updated perm_invent window but IDing
	specific items--even every one of them--did not
hold_another_object added item to inventory first, then maybe removed and
	dropped it, resulting in spurious add and remove perm_invent updates
when hold_another_object fails while hero is swallowed, drop the item into
	swallower's inventory instead of onto the floor
hold_another_object (for wishing, horn of plenty, theft while poly'd, other
	non-pickup actions giving hero another inventory item) wasn't
	reporting change in encumbrance; that would catch up on next turn but
	could be off during additional move(s) for current turn
hold_another_object used hardcoded Stressed to limit carrying instead of
	using the 'pickup_burden' option for that
transforming a potion by dipping a unicorn horn into it could result in the
	potion being dropped due to 'pickup_burden' if encumbrance was already
	over threshold before dipping but within it after removal from invent
fix priest created inside temple wall
fix vault guard occasionally encasing monsters in stone
tone down scare monster by excluding humans and uniques
lock the castle chest
revamp amnesia to forget skills instead of objects or maps
when Punished and carrying the iron ball and levitating, hurtling in the
	opposite direction of a thrown object didn't bring along the chain
recognize "kirin" as alias for "ki-rin" when asked to create a monster
make unique swallowing monsters (Juiblex) resist magical digging from inside
correctly account for fuel remaining when lit candles are attached
	to candelabrum (the previous code would make the game unwinnable if
	there were 15 or fewer turns remaining)
praying on an unaligned altar outside of Gehennom behaved like an ordinary
	prayer; make that always fail
tribute (Discworld snippets) typos, in book order rather than fix order:
	Sourcery passage #4 "the moment the words were out of your mouth" ->
	 "the moment and the words out of your mouth" where "were" didn't
	 belong and awkward phrasing because of it caused "and" to be removed
	 (would be much clearer if optional comma after "moment" was included)
	Moving Pictures passage #10 initial single quote should be double,
	 #12 "or" -> "of", #14 second instance of "megalomaniac" misspelled
	Lords and Ladies passage #5, near end add missing opening double
	 quote, passage #7 last paragraph, "to" -> "be"
	Men at Arms passage #1, italicize /for/, passage #2, insert omitted
	 word "had": 'it was /fate/ that _had_ let Edward'
	Interesting Times passage #1, italicize several words
	Hogfather passage #7 missing initial double quote for "Oh, just ...",
	 also #7 insert missing "you" into "Why are you feeling [...]"
	Soul Music passage #1, italicize /feel/, #8, "fossile" -> "fossil"
	Jingo passage #2 "Vines" -> "Vimes", "profferred" -> "proffered",
	 missing opening single quote on second sentence of Lord Downey's
	 line, passage #11 both in footnote:  "genious" -> "genius",
	 "was, oddly enough, was one [...]" -> "was, oddly enough, one [...]"
	A Hat Full of Sky passage #9 "though" -> "thought"
	various, including Death quotes:  separate sentences by two spaces
unicorn corpses and wraith corpses could be sacrificed even if "too old"
hero polymorphed into a hider and hiding was not unhidden when teleporting
impose tighter restraints on 'summon nasties', both for spellcasting monsters
	and post-Wizard harassment
prevent swallowing monster ending up in a solid wall if it killed vault guard
fix attached ball getting deallocated if swallowed, going down into a pit,
	and saving
level compiler creates correct novel with supplied name
for farlook, describe water in the castle moat and in Juiblex's swamp as moat
	and as swamp, respectively, rather than just as "water"
make hezrous emit poison clouds when they move
stepping from one type of terrain to another was triggering an unnecessary
	status update
make shriekers summon baby purple worms if purple worms would be too tough
make non-tame (baby) purple worms eat corpses off the ground
make baby purple worms attack shriekers
make hero polymorphed into baby purple worm warned against shriekers
confused scroll of light summons tame cancelled lights
potions of hallucination can give enlightenment
add a small chance of surviving food poisoning
deliberate level teleporter activation ignores magic resistance
auto-id scroll of remove curse when a known buc-state was changed
demon lords hate Demonbane
pets avoid eating shapeshifter corpses unless starving or nearly feral
blessed scroll of teleportation gives a single controlled teleport
allow opening a tin without interruption if slimed
tell player when wielding a different weapon toggles off dual-wielding
object taking erosion damage might give feedback message when out of view
	or not give such when in view, depending on stale value of 'bhitpos'
	[cited case assumed message came from drowned monster's dropped
	inventory when out-of-view ice melted]
it's possible to wish for tins of the Riders in wizard mode; eating one is
	fatal but if you're life-saved or decline to die, the game crashed
revival via undead turning of corpse carried by hero said "your <mon> corpse
	comes alive" even when revived monster was undead
prevent searching or waiting next to a hostile monster if boolean option
	safe_wait is on - override with 'm'
allow random mimics to show up mimicing more furniture than just stairs
scatter exploding bag of holding contents instead of outright deleting them
male hero poly'd into nymph chooses charm vs seduce message based on being
	male rather than on all nymphs being female but charm message was
	using hardcoded pronouns She,her for target monster--wrong for male
	target and noticable if "<mon> finishes taking off his suit" is given
hostile monsters with a ranged attack try to stay away from melee range
allow displacing peaceful creatures
unicorn horns don't restore attribute loss anymore
when a shop is changed from food to health food, change room type to match
wish parsing of things containing monster names would accept all supported
	alternate spellings if they occurred at the end ("corpse of mumakil")
	but only some when they occurred elsewhere ("gray-elf corpse" worked,
	"mumakil corpse" yielded "does not exist") depending upon name length
couldn't wish for werecreature corpse or tin because monster name lookup
	always matched the beast form which is flagged no-corpse; switch to
	human form for "were<creature>"
wishing for werecreature figurine always made one that created the monster in
	beast form if activated; allow "human were<creature>" to explicitly
	specify werecreature's human form (for corpses and tins as well as
	figurines); override the restriction against human figurines for that
wishing for "royal jelly" yielded "lump of royal jelly" as a special case, but
	other 'of' items such as "clove of garlic", "sprig of wolfsbane", or
	"piece of cloth" didn't allow using their post-of words as shorthand
monster or object detection found semi-dead vault guard at <0,0> while
	traversing fmon list; monster detection gave misleading feedback
	(blank map instead of 'strange feeling') if there were no other
	monsters on level; likewise object detection and guard's minvent
squadprob[] in mkroom.c was defined with 5 elements but initialized only 4
	resulting in giant ants sometimes
allow nurses heal attack when wielding a non-weapon/weaptool
if riding or levitating, hero could apply bullwhip downward to pull up things
	from underwater or lava; feedback implied the item was on the surface
some monster code was checking whether pets or engulfers were eating green
	slime by checking for green slime corpse instead of glob
change light radius of stack of candles to square root
could get redundate "mon hits other-mon" messages when mon wields an artifact
failed untrap while mounted that moved hero onto the trap would leave steed
	with stale coordinates, triggering warnings if 'sanity_check' is On
when digging a pit results in it being filled by adjacent pool or lava, any
	objects at the spot weren't subjected to water or fire damage;
	also, riding hero's steed wasn't subjected to immersion either
after "double trouble", cloned Wizard would wait until he had suffered some
	damage or hero moved into direct view; keep STRAT_WAIT for original
	Wizard but avoid that for clones
beyond turn 100000, prayer timeout is longer (scaling with game length)
falling while going down stairs and dropping items due to encumbrance or
	punishment wasn't subjecting fragile ones to breakage
objects scattered by an explosion which land on water or lava weren't affected
	by the water or lava
change mkclass() to usually honor (always honor for L class) the hell-only and
	never-in-hell monster creation flags; no more achi-lich in the Castle
	(nor master lich there unless demilich gets a potion of gain level)
thieving monster could be killed while hero was removing armor, triggering
	warning "stealarm(): dead monster stealing" when taking-off finished
petrifying a long worm and then reanimating it handled tail incorrectly;
	with sanity_check On, X coordinate of head segment was reported as 0
attempting to read a novel while blind reported "you can't read the mystic
	runes" like for a spellbook; use "you can't read the words" for novel
don't let life draining reduce a monster's max HP below its level + 1
report "<Mon> expires" rather than "<Mon> dies" if polymorphed hero kills a
	non-living monster (golem, vortex) with life drain (vampire bite)
allow hero in silver-hating form to ring the silver bell but only if on/over
	the vibrating square
reading the Book of the Dead while blind is allowed; doing so gives
	"you turn the pages of the Book of the Dead" and the type of item
	becomes discovered, but the object wasn't being flagged as 'dknown'
	so if not seen yet it remained "a spellbook" in hero's inventory
reading cursed Book of the Dead while blind gave feedback for sighted hero
reading non-cursed Book of the Dead after prepping with the other tools gave
	a message referring to those as "artifacts" if either of them were
	cursed; those unique items aren't artifacts so use "relics" instead
zapping a line of boulders with striking or force bolt was updating 'couldsee'
	but deferring 'cansee', resulting in seeing the first boulder fracture
	and only hearing that happen for the others despite coming into view
the default engraving, epitaph, and bogus monster inserted by 'makedefs -s'
	(3.6.6 fix for empty source data file) lacked terminating newline, so
	when the corresponding file wasn't actually empty its first line ended
	up concatenated; default portion of the bad combined entry would be
	decrypted properly but the portion from the file's first line wouldn't
if the Wizard of Yendor fled up the stairs on level 1, the game would behave
	as if he was still in play, but he wouldn't be on migrating monsters
	list so couldn't be brought back and wouldn't appear on Plane of Earth
	(stale non-zero value for context.no_of_wizards)
if a mind flayer's psychic blast targetted a hidden monster, feedback named
	the monster but it wasn't brought out of hiding
hero poly'd into a mind flayer who used #monster to emit a psychic blast was
	able to harm mindless monsters with it
some hero attacks that should have gotten a skill bonus or penalty didn't
change internal name of "<foo> venom" to "splash of <foo> venom"
some operations that made sense to handle venom ('D', scroll of identify, no
	doubt others) ignored it because venom is suppressed from packorder;
	matters for wizard mode or for normal play that loads wizard bones
singularize "splashes" to "splash" instead of "splashe"
treat slinging gems and tossing or slinging stones at unicorns as attacks
give rot-away timer instead of revive timer to corpses of cancelled trolls
switch revive timer to rot-away timer if a troll corpse gets cancelled
uncancel an ice troll if its corpse is put into an ice box; give corpse a
	revive timer if later taken out
splitting a stack of candy bars gave new wrapper text depending upon the
	obj->o_id value assigned; keep existing text for both halves of stack
	(side-effect: separate candy bars usually won't merge anymore)
describing tin variety (deep fried, pureed, &c) relied on the 'contents known'
	flag but object identification wasn't setting obj->cknown for tins
wizard mode #wizintrinsic: setting Levitation wouldn't block Flying as
	intended because the check for that was being made too soon
chatting to the quest leader in wizard mode with sufficient experience level
	and insufficient piety, player is asked whether alignment should be
	boosted; answering 'n' resulted in being prompted a second time
end of game inventory disclosure passed an inappropriate argument to the
	inventory display routine; not noticeable for tty and curses,
	noticeable but not harmful for X11, and slightly harmful for Qt
turning into slime rendered hero as slime one turn too soon
avoid potential infinite loop if hangup occurs at ring "right or left?" prompt
randomize the turns where accessories and extrinsics affect nutrition
handle being interrupted by approaching monsters more consistently
if hero attacked a peaceful monster, some other peaceful monsters with humanoid
	shape (minotaur, zruty, perhaps others) that witnessed it but which
	shouldn't be capable of normal speech expressed their surprise audibly
make gasp/exclamation message from peaceful monsters be more verbose to
	indicate which monster is doing the gasping or exclaiming
when make was invoked with -j makedefs instances could end up running in
	parallel and could trample on each other's temp files; default to
	using mkstemp(); allow a port runtime library implementation that lacks
	mkstemp() to define HAS_NO_MKSTEMP to revert to the old behaviour;
	provide a work-alike mkstemp() implementation for windows visual studio
	in mdlib.c so there is no requirement to define HAS_NO_MKSTEMP there
make piranhas faster and give them extra bite attack
fire sources can ignite candles, lamps, and potions of oil
for multiple drop ('D') with menustyle traditional or combination, if the only
	object class player picked was '$' then it operated on all classes
small monsters could seep through their shirt
don't snuff lantern when it's hit by water unless it is submerged
when reporting that hero can't repair a chest's broken lock with key/pick/card
	just describe the base item without BUC, user assigned name, &c since
	"You can't repair a chest's lock with an uncursed key." implicitly
	suggests that you might be able to do so with a blessed or cursed one
pre-populate teleport destination prompt with travel destination
ghosts cannot be renamed
tossed upwards objects got two times half physical damage reduction
monster xorns could pass through iron bars but not eat them; monster rock
	moles could no neither; now they can eat bars when adjacent and will
	do so if the bars are blocking their path
hero poly'd into rust monster could implicitly eat bars when adjacent by
	trying to move there, now when in rock mole form too; in xorn form
	can explicitly eat them via 'e' after moving onto their spot
monster hiding under an egg that hatched was kept hidden
restful sleep regenerates hit points
attacking non-adjacent concealed mimic by applying a polearm would make the
	hero be stuck to that mimic
hero could break a wand ("raising the wand high over your head, you break it
	in two") even if hands were welded to a two-handed weapon or to a
	one-handed weapon and also to a shield
if a monster threw a cocktrice egg at the hero but hit and petrified another
	monster, the hero would get credit/blame for killing it
since ki-rin look quite a bit like unicorns, make them be more like one:
	allow them to use their own horn to cure themselves; remove M1_ANIMAL,
	change MS_NEIGH to MS_SPELL, add MR_POISON, use horse body parts;
	they're still 'A' rather than 'u' and don't care about gems
wand/scroll of create monster or bag of tricks that makes a new monster which
	can be seen or sensed becomes discovered, but was doing so even for a
	concealed mimic seen as furniture or an object
'showscore' could be used to determine how much gold was inside a container
	whose contents were unknown
wizard mode (only way to get timed flying): if levitation and flying time out
	on same turn, player was told "You have stopped levitating and are
	now flying."; status line wasn't updated to remove stale Fly condition
throwing or kicking a shop container (that's light enough to move) made the
	hero pay for any gold inside, then didn't refund that amount if the
	container landed inside the shop
try to fix message sequencing for tame golems that "roast/rot/rust in peace"
autodescribe when moving the cursor was erroneously honoring MSGTYPE=stop
	and potentially delivering sounds
reduce the number of "seeXYZ" commands by renaming some: #seenv -> #wizseenv,
	#seegold -> #showgold, #seespells -> #showspells, #seetrap -> #showtrap
when saving while punished or game ends while punished, handling for ball and
	chain might access freed memory with unpredictable consequences
brown pudding monster hitting another monster with decay attack corroded armor
	instead of rotting it
<?> -> <full key bindings> omitted 'n' prefix and M-digit for number_pad mode,
	and ^A/re-do was suppressed due lack of obsolete '#define REDO'
add missing key binding support for rush.numpad; default is M-5 for numpad==1
	or plain 5 for numpad==2 where behavior of 5 and M-5 are swapped
allow monsters to use wand of undead turning to revive corpses on floor
	in some situations
selling a container to a shop for gold leaves any contents that the shop
	doesn't ordinarily buy and sell owned by the hero, but selling the
	container for credit resulted in the shop taking poesession of such
	contents without giving any additional credit; mark out of place
	contents 'no_charge' so that hero can reclaim them without buying
add some new demonic and angelic maledictions
when fire damage dried a wet towel, it would never reduce the wetness to 0
when water damage wet a towel, the new wetness might randomly become less
make Death revive earlier, and all the Riders after 67 turns at latest
when protection from shape changers begins, force mimic out of concealment
	even if hero can't see its location; for locations that can be seen,
	don't make double-trouble Wizard concealed as another monster--or pet
	temporarily mimicking something while eating mimic corpse--fall asleep
best possible armor class reduced from -127 to -99; worst from +127 to +99;
	charged or enchanted individual items also capped at +/- 99 (affects
	wizard mode wishing, negligible effect on normal play)
fix several inconsistencies for objects at hole locations
make repeat (^A) work when bound to some other keystroke
if a prefix key was bound to some character which ordinarily ran a regular
	command and that command wasn't bound to another key, typing the
	prefix followed by a non-movement key behaved strangely:  instead
	of reporting "invalid direction" it would run the other command
	(actually depended upon relative order of prefix's new and old key)
reqmenu (the request-a-menu prefix supported by a handful of non-movement
	commands) could be bound to some key other than 'm' but it only
	worked if the new key was also a movement prefix
when telepathically sensed pet ate a mimic corpse and temporarily took on
	a different shape, you were told that you sensed it changing into
	something but the map continued to show its true shape (telepathy
	overrides mimic hiding); give a different message in that case
when a pet ate a mimic corpse and tried to temporarily look like a sink it
	ended up looking like a throne (terrain type SINK == symbol S_throne)
have dowhatdoes ('&') catch up with '?i' to describe ^A, ESC, and movement
	prefix keystrokes correctly instead of reporting "no such command"
give barrow wights a cold touch
for configuration using external compression on save files that applied a name
	suffix, 'selectsaved' (restore via menu) couldn't handle any which had
	been manually uncompressed, mangling file name trying to remove suffix
an empty lamp hit by fire reported "the oil lamp catches fire" (but at least
	didn't light)
spells that require a target spot rather than a direction (like skilled
	fireball) would not let a blinded hero target his/her own spot, with
	feedback stating hero failed to hold location sufficiently in mind;
	when not blind, such spells left autodescribe feedback for target spot
	in the message window while the spell was being performed
prevent wish request "death wand" from matching Death monster and producing a
	random wand instead of a wand of death
grammar bit: "you hear a [AEF] note squeak in the distance" (should be "an")
curses interface failed to honor menu_xxx option settings for menu interaction
during engraving, spaces were counted instead of non-spaces [later: affected
	code is gone, removed when engraving was converted into an occupation]
when an explosion scatters objects, make any that fly over sinks stop there
output message when changing fastmove mode while cursor targetting
messages when Minetown watchmen become angry could report "you see an angry
	guard approaching" even if he was invisible and hero can't see invis
when autopickup is on but disabled due to being inside a shop, have ^X say so
don't force fake player monks to always be male
it was theoretically possible to overflow an internal buffer containing
	inventory letters by carrying more than 52 separate lit candles and
	using the '(' or '*' commands
hero would be blinded and stunned by an Archon's radiance (gaze attack) even
	if the Archon was blind, but monsters would not
applying a polearm to attempt to attack a hidden monster would report "wait!
	there's a monster hidden there" and display the "remembered, unseen
	monster" glyph but only use a turn if polearm wasn't already wielded
key parsing during options processing was inconsistent between OPTIONS=foo:k
	BINDINGS=k:foo where k represents a key designation; the OPTIONS form
	recognized backslash escape sequences but not M-x meta characters,
	vice versa for BINDINGS (most noticeable for menu interaction keys
	such as menu_next_page because those can be set via either directive)
when creating a rolling boulder trap, don't place boulder on a path that
	starts on or passes over a pit/spiked pit, hole/trap door,
	teleport trap/level teleporter/magic portal
remove superfluous "All" from "All foos are already nonexistent." when blessed
	genocide tries to remove something which has already been genocided
"#dip <item> into -" produced a scrambled message:
	You mime dip <item> intoing something.
similarly, "#rub the royal jelly on -" produced
	You mime rub the royal jellying on something.
mounted hero falling out of saddle shouldn't hit ground and take damage when
	levitating or flying (if done without steed's help)
avoid "obj not free" panic if monster kills itself by reading scroll of earth
attempting to throw a partial stack of gold at self was prevented but left
	the partial stack in an extra $ inventory slot
quivering a partial stack of gold succeeded and put the partial stack in an
	extra $ inventory slot
if player managed to get multiple $ items, all but the last could be moved to
	normal letter slots via #adjust and then subsequent #adjust with a
	count could split them into even more slots
when a monster on the far side of a closed door opens it, sometimes the hero
	was told about the monster without it being displayed on the map
also show extended command name when showing what a key does in help
poly'd hero who exploded when attacking a monster didn't wake up other
	monsters in the vicinity; when attacking thin air, hero's explosion
	woke other monsters within different radius than same monster's would
troll corpse revival was inhibited by hero wielding Trollsbane; change that
	to being killed by Trollsbane instead (wielded by hero or by monster)
statues representing petrified creatures on Medusa's level might be from
	monsters who change form (golems) when hit with stoning damage
attempt to make corpse or statue of a named player character would yield that
	of a random monster instead when 'record' was empty; could result in
	statues of non-stonable creatures in cockatrice nests
homemade tin of very low nutrition corpse gave more nutrition than the corpse
magic mapping performed while engulfed or underwater would display whole map
	but then not switch back to the engulfed or underwater restricted view
#overview used hardcoded bold and inverse for highlighting; switch to the
	'menu_headings' option value so player has some control
for menustyle:full, the 'A' menu choice to auto-select everything now only
	does so if no other choices have been picked; when any have (object
	class or BUCX state or both), it auto-selects every item that matches
	those choices (so still skips the second menu) rather than every item
using travel to move one step diagonally where that step was blocked by being
	too narrow to squeeze through stopped travel instead of considering
	alternate routes to the destination
turn off input autocompletion for '#twoweapon' since simple 'X' invokes it;
	likewise for #wizdetect (^E), #wizgenesis (^G), #wizidentify (^I),
	#wizlevelport (^V), #wizmap (^F), and #wizwish (^W); probably ought
	to do so for #overview (^O) too but that one still autocompletes
if a branch has only one level (Fort Ludios), prevent creation of any level
	teleporters there (level definition doesn't have any but wizard mode
	wishing could attempt to place one)
opening/unlocking magic zapped at monster holding the hero will release hold
	(zap at engulfer already expels hero); zapping at self has same effect
when riding, allow scroll of remove curse read by hero to affect steed's saddle
the 'scores' option for final top ten display left default values in place if
	only some of the three settings were set; 'scores:own' should have
	produced '0 top/0 around/own' but ended up as '3 top/2 around/own'
allow 'scores:none' as shorthand for 'scores:0 t/0 a/!o' (player will be told
	whether new score made the list but no scores will be shown)
contents of chests, large boxes, and ice boxes are now immune to water damage
	unless the container is cursed, same as for oilskin sacks (previously,
	chests+large boxes were always immune and ice boxes always vulnerable)
applying an empty lantern in an attempt to light it reported "your lamp
	has run out of power"; change to "your lantern is out of power"
when swallowed or underwater, player could be told about events (such as a
	shapechanger taking on a new form) that the hero sensed but which
	were not shown on the screen; treat being swallowed or underwater as
	situations which block telepathy, extended monster detection, warning
some rolling boulder trap feedback was inconsistent
change "killed by <a foo>, while {paralyzed|frozen} by <a foo>" into
	"killed by <a foo>, while {paralyzed|frozen}" if the killer caused
	hero's helplessness
"It looks very angry" would be given if a hero wielding Excalibur or Demonbane
	offended an unseen demon lord
Entering a special room, only wake up the monsters in that room instead of
	doing a level-wide wake-up
any blessed key was behaving as if was the rogue's Master Key when unlocking
	a trapped chest or box
when an unseen non-pet picks up or uses an item, hero loses known/dknown/
	bknown/cknown/lknown memory of that item (so becomes unidentified; in
	particular, player won't be asked what to call unseen thrown potion)
wishing for a partly eaten wraith corpse yielded "partly eaten food (1) more
	nutritious than untouched food (0)"
if PREFIXES_IN_USE was defined (and VAR_PLAYGROUND forces it to be) when
	COMPRESS was also defined (external save and bones file compression
	via fork()+exec()), the file name buffer in docompress_file() wasn't
	big enough so could overflow and trigger a crash
suppress "This <foo> corpse takes {delicious|okay|terrible}" if preceded by
	"You have a bad case of stomach acid" or "Ecch - that must have been
	poisonous"
innocuous items like scrolls or eucalyptus leaves did harm when falling on
	hero's head after being thrown upward
fighter types who start out knowing all non-magic armor should not know
	cornuthaum and dunce cap
prediscovered weapons adjustmens:  only knights and samurai know polearms;
	rangers know launchers (bows), ammo (arrows), and spears regardless
	of their race/species; likewise, rogues know all daggers
if the move counter ever reaches 1000000000, end the game
knights get no metal armor penalty for clerical spells
change touch of death from instadeath to maxhp reduction and damage
dying from being level-drained below level 1 killed hero without saying so
	and jumped straight to "do you want your possessions identified?"
conflict will now consider your charisma and requires line of sight
boost hit points of some golems
make anti-magic fields drain more energy and prevent them from showing up
	too early in the dungeon
eating magical monsters such as wizards or shamans may give a mild buzz
make exploding spheres create an actual explosion
pets are more careful about attacking monsters at low health
allow killing your quest leader to open the quest
give King Arthur Excalibur


Fixes to 3.7.0-x Problems that Were Exposed Via git Repository
------------------------------------------------------------------
fix compile when DLB isn't defined
urealtime.realtime was being incorrectly calculated
revised "mysterious force" when climbing out of gehennom could generate
	warnings about "rn2(0) attempted" or "rn2(-n) attempted"
after 'w' on split stack patch, wielding '-' would cause an object_lost panic
same patch allowed partial stack from getobj to replace cursed wielded weapon
autounlock of door or chest took no time; chest case depended on whether
	anything got looted along with the unlocking
autounlock with artifact unlocking tool didn't do touch check on that tool
autounlock picked Rogue's artifact key over lock-pick or credit card (or
	ordinary key depending upon invent order) even for non-rogues who
	would be blasted when touching it
wielded aklys had its "(tethered weapon...)" description scrambled
randomized trap name could pick trap #0 which isn't a trap and yielded "water"
if running and Blind or Stunned or Fumbling or Dex < 10, encountering a closed
	door orthogonally would keep reporting "ouch! you bump into a door"
	repeatedly until eventually interrupted by approaching monster or
	hunger or ^C
data.base lookup of an entry with any blank lines would falsely claim that
	"'data' file in wrong fromat or corrupted" after some extra checks
	were added while investigating tab handling anomalies
using nhl_error() to report a Lua processing problem would clobber the stack
level teleporation's "You materialize on a different level!" could be given
	out of sequence with other arrival messages
more sequencing: if wielding Sting or similar and level teleporting to a
	level with different warning effect, the start-glowing or stop-glowing
	message came before the materialize message on the destination level
prevent "you materialize on a different level" after "a mysterious force
	prevents you from descending" if you try to level teleport past the
	stairs down from the quest home level before being granted access
creating Mine Town variant 1 (Orcish Town) sometimes complained about being
	unable to place lregion type 1 and failed to have any staircase up
set g.context.botl for glove and wielding actions that could start or end
	bare-handedness in support of condtests[bl_bareh]
reinstate ranked ordering of the status condition fields
grammar for messages about a monster removing items from a container was bad
some new status conditions didn't always update when they should
fix flipping non-existent stairs and ladders (github #311)
fix door created into random wall or position opening into solid wall
handle gone portal when going back in quest
'use_inverse' option was accidentally made Windows-only; change it back to
	being more general; change its default to True
change inconsistent achievement spelling of "Mine Town" to "Minetown"
fix crash in water_damage_chain
teleport feedback "you materialize at another location" was given too soon
'mention_decore' was repeatedly reporting "you are back on bottom" when
	moving around underwater
revised 'mention_decor' was describing furniture or ice right before look-here
	described the same thing when stepping onto object(s)
poison gas clouds located over known but unlit pools were visible as known
	clouds but steam clouds in that situation were not
after the wish parsing change, wishing for "<something of monster>" or for
	"<monster something>" worked as intended but wishing for "<monster>"
	(where <monster> used the canonical spelling) triggered a crash
fix new "objects[0] class #1 not in order!" panic if plain 'char' is unsigned
only generate shop items on solid floor squares
avoid gcc 10 warning by removing duplicate definition of 'head_engr'
if a monster removed a corpse from an ice box, the corpse would never rot away
monster creation on quest levels could make genocided creatures
enabling wizard mode 'sanity_check' option would complain about invalid mhpmax
	value for level N monsters created with a d8 value of 1 for all N d8's
disable that extra check because gremlim HP split after cloning triggers it
some versions of tiles processing (not X11's) complained about the rename of
	"{acid,blinding} venom" to "splash of {acid,blinding} venom"
wizard mode #timeout changed to show timed Displacement in 'can be timed in
	normal play' section instead of 'timed via #wizintrinsic only' section
the fix to make worm visibility checks work as intended forced the coordinates
	of the extra tail segment co-located with the worm monster to match
	the worm instead of leaving it off the map; place_worm_tail_randomly()
	reverses the segments and can throw some away if there isn't room,
	but throwing away the extra segment removed the worm from the map
using 'O' to try to change 'symset' was a no-op; 'roguesymset' worked
change default for lit attribute in special level des.terrain directives to
	'unchanged' instead of 'unlit'
replace worm tail placement code that reportedly led to a sanity_check warning
	[no actual code problem found; might be compiler bug for 'xchar']
learn scroll of teleportation after reading even when random destination is
	right by starting spot
fix off-by-one bug in dimensions of theme rooms
fire/frost horn feedback when zapped by monster was inaccurate (falsely
	claimed that it was "directed at self" when attacking hero)
tins of spinach and 'dead' eggs could cause out of array bounds access
	attempting to index into mons[] by polyfodder() macro
options help ('? g') listed all boolean options, then repeated them among
	the compound options; on OSX they showed a description of "(null)"
	but for other sprintf implementations they might cause a crash
change name of #wizlevelflip to #wizfliplevel
dwarves could sometimes pass through walls without digging their way
fix genetic engineers dropping Schroedinger's cat box
the checks and handling for fountains, sinks, and drawbridges were being
	missed during liquid_flow
monster movement flags unification allowed displacer beasts to displace Riders
a long worm with no visible segments (but one internal segment) might trigger
	warning: tail 'segement' at <0,some_y>, worm at <mx,my> if teleported
adding displacer beast inadvertently introduced a regression in swapping with
	pets, allowing them to be pulled into water by hero on/over water
splitting #if MAIL into #if MAIL_STRUCTURES and #if MAIL made it possible to
	wish for and write scrolls of mail with MAIL disabled, but attempting
	to read such a scroll issued impossible "What weird effect is this?"
remove M2_MALE flag that was unintentionally left on dwarf lord/lady/leader
	entry and was preventing female incarnations
tilemap.c wasn't building if STATUES_LOOK_LIKE_MONSTERS wasn't defined; also,
	to match the code that should be defined so change the preprocessor
	test to 'ifndef STATUES_DONT_LOOK_LIKE_MONSTERS'
ensure that monster female name variation ends up as a female during ^G
arbitrate when there is a conflict between gender term (male or female) and
	a gender-tied monster name (cavewoman) during ^G; gender term wins
wizard mode sanity check complained about Wizard's clone mimicking a monster
new ^G gender-naming handling code required a guard against null permonst
	pointer which could occur under some circumstances
replace "aligned priest" entries in Pri-loca.lua, astral.lua, minetn-1.lua,
	and sanctum.lua, with "aligned cleric"
attempting to swap places with a peaceful monster might cause it to flee
gender-specific monster names can be used in .lua files with the gender upheld
remove unused vision tables
changes accompanying sorting of discoveries resulted in omitting very last
	item for '`'/#knownclass on a class where every item was discoverable
	and had no extra labels (so potions and rings, possibly others, but
	not scrolls or wands) and every item was actually discovered
change to can_reach_floor() resulted in hero being unable to reach the floor
	when held by a lichen
panic if lua init fails
change wizard mode command #wizmgender to wizard mode option 'wizmgender'
engraving with non-blade dulled the weapon anyway (pr #464)
'sortdiscoveries:s' had a spurious generic header shown at the start of the
	last class if there were any artifacts or unique items discovered
loss of saddle by opening magic left hero mounted on unsaddled steed
avoid segfault during error reporting for bad 'O' value(s) after theme rooms
	have been initialized, leaving iflags.in_lua set
avoid complaints of "nothing to foo" for 'force_invmenu' if there are no
	likely candidates to foo with but there are hidden acceptable choices
avoid "Not carrying anything.  Never mind." for 'force_invmenu'
'altmeta' option could be toggled On but once On could not be toggled back Off
wearing a ring of protection and any amulet behaved as if wearing an amulet of
	guarding when determining MC value
messaging for genetic engineer attacks had several problems
give genetic engineers teleport capability (as they had in slash'em); 'port
	away after polymorphing someone so that they don't just repeat that
if an invisible hero managed to convert an unaligned altar to an aligned one
	with color enabled, altar wasn't immediately redrawn with new color
repair some regressions to (a)pply introduced by "getobj refactor" patch
fix ^X feedback when held typo: "unseen createure" -> "unseen creature"
if a <foo> corpse was set to revive as a <foo> zombie and corpse was partly
	eaten at revival time and monster <foo> is defined as providing more
	nutrition that <foo> zombie, oeaten_stat() could give the warning
	"partly eaten food more nutritious than untouched food" when used to
	calculate zombie's hit points (depended upon how much had been eaten)
undead turning magic revived corpses flagged as no-revive if they were being
	carried but not if they were zapped while on the floor
forgetting an item's known/dknown/bknown/&c settings when picked up by unseen
	monster made it possible to trigger a latent shop bug with globs;
	avoid clearing dknown flag for globs
fix globby_bill_fixup to use shopkeeper instead of Null for glob pricing
applying a book to check readability treated novels as if they were spellbooks
#version was leaving the 'in_lua' flag set and if subsequent 'O' issued an
	error (example was an attempt to interactively set bouldersym to an
	invalid value), the error reporting routine crashed via segfault

curses: 'msg_window' option wasn't functional for curses unless the binary
	also included tty support
curses: line input that doesn't take place on the bottom line of the message
	window uses a canned curses routine and doesn't support ESC to kill
	partial input or to cancel; "Who are you?" prompt was willing to name
	a character "^["; have the popup version of getlin() fake the usual
	ESC handling, but player has to type <escape><return> for that to work
curses: menu headings didn't use default text color
curses: #perminv changes disabled menu_headings attribute for persistent
	inventory window headings; reinstate that
Qt: at Xp levels above 20 with 'showexp' On, the combined status field
	"Level:NN/nnnnnnnn" was too big and truncated by a char at each end
Qt: searching a text window for something that wasn't found and then searching
	for some other target could crash
tty: redraw unexplored locations as S_unexplored rather than <space> after
	map has been partially overwritten by popup menu or text display
tty: previous change resulted in remnants of previous level being shown on
	new level after level change when S_unexplored is <space>
Unix: after lua changes to Makefiles, 'make spotless' for dat subdirectory
	left some generated data files which should have been deleted
X11: was still initializing map to 'stone' instead of 'unexplored' after they
	became separate glyphs
X11: for text map without color, add support for black&white ice; draw it in
	inverse video to distinguish from ordinary floor
X11: if perm_invent is set in NETHACKOPTIONS or config file, start with the
	persistent inventory window displayed
X11: use visctrl(response) when X11_yn_function() echoes prompt+response in
	message window
X11: when trying to lookup scrollbars in order to handle scrolling via keys,
	menu handling always ended up finding the top window
X11: enable horizontal scrollbar for persistent inventory window
X11+OSX: after the "bad Atom" fix (below), the persistent inventory window
	crept downward every time it got updated


Platform- and/or Interface-Specific Fixes
-----------------------------------------
SYSCF: treat most sysconf directives that have invalid values as warnings
	rather than errors; use a conservative default value and continue
curses: for vertical status, line up conditions in columns; usually two but
	condense to three per line if the status window isn't tall enough
	[at present, highlighting with inverse video includes trailing spaces
	used to align entries in their columns--that's a feature...]
curses: indent items in perm_invent window by one space
macOS: Xcode project was failing to build if the path to the NetHack source
	tree contained a space; the issue was within some shell script code
	contained within the project
msdos: add -DSTATUES_LOOK_LIKE_MONSTERS to Makefile1.cross so the VESA mode
	can display statue glyphs
Qt: quit if can't load tiles file instead of continuing and then segfaulting
Qt: [later] tiles load failure at startup now continues using an ascii map
Qt: use more columns for extended command selection dialog so that the number
	of rows needed doesn't result in some commands being unaccessible
Qt: suppress wizard mode commands from '#' handling when not in wizard mode
Qt: organize extended command selection grid by columns instead of by rows
	(first N entries down left column, next N entries down 2nd column, &c)
Qt: when selecting an extended command by typing its name, support <delete>
	(aka <rubout>) in addition to <backspace> to go back a character
Qt: switch to fixed-width font for menus
Qt: don't disable [cancel] button when viewing inventory or other pick-none
	menus; ESC works to dismiss those and [cancel] should be the same
Qt: clicking on the window's Close button brought up a dialog offering
	choices of "Save" and "Cancel"; picking Cancel sent nethack into an
	infinite loop with complaints about Qt's event loop already being
	active; change dialog: offer "Save and exit" or "Quit without saving"
	with no opportunity to try to back out of the Close operation
Qt: add 3.6 status fields Stone, Slime, Strngl, Deaf, Lev, Fly, Ride
Qt: add Attributes, Overview, and Annotate to the "Info" pull down menu
Qt: rename menu entries game->Save to game->Save-and-exit and game->Quit
	to game->Quit-without-saving
Qt: menu commands are now working; commands invoked via M-c were having that
	keystroke changed to '?', bringing up nethack's help menu; now those
	send #abc with just enough letters to disambiguate from other commands
	("Compilation" is one remaining problem; it yields "#version" which
	brings up '#' menu subset with choices of "version" and "versionshort")
Qt: "paper doll" subset of persistent inventory has undergone several changes:
	show previously missing quiver below weapon instead of duplicating
	gloves there; show secondary weapon in shield slot and blank out
	alternate weapon slot when two-weapon combat is active; show wielded
	two-handed weapon in both the shield and primary weapon slots; show
	first active light source in a previously unused slot on lower right;
	show first leash-in-use in a previously unused slot on lower left
Qt: paper doll inventory view was inconsistently updated during Hallucination
Qt: when hero died, gold on tombstone only included gold in inventory, not
	any additional gold inside carried containers; also, inventory gold
	will be zero if bones get created for all 3.6.x and for 3.4.x+GOLDOBJ
Qt: tombstone showed newly constructed date instead of the value set up at
	time of death; it only shows year but that could be wrong if player
	stared at or ignored prior --More-- for long enough on 31 December
Qt: menu choices All, None, Invert were setting, unsetting, or toggling menu
	entry checkboxes internally but didn't redraw the menu to show that
Qt: fix the F1/F2/Tab macro keys to not require that number_pad be On
Qt: unhighlight highlighted message (last one issued) after player has seen it
Qt: update message window's last message with player's response if it's a
	prompt string for a single-character of input (ynaq or invent letter)
Qt: for line input, display the prompt+response in the message window
Qt: enable the popup_dialog WC option (result is a bit flakey but usable)
Qt: 3.6 catchup - show unexplored locations as unexplored rather than as stone
Qt: tried to honor 'showexp' but the value was unintentionally suppressed by
	[lack of definition for] obsolete conditional EXP_ON_BOTL
Qt: implement --More-- prompt to support MSGTYPE=stop
Qt: for menu search, don't require clicking on the search target popup before
	typing target string (was using typed letters to make menu selections
	if player didn't click on the popup first)
Qt: rest ("Zz") button on the toolbar only worked when 'rest_on_space' was On
	(core issue, not Qt's fault)
Qt: rename toolbar button "Get" and action menu choice "Get" to "Pick up"
Qt: status icons for alignment|hunger|encumbrance which started out centered
	relative to the label text below them would shift to being left
	justified when status got updated
Qt: handle '&' properly if it occurs as part of yn_function popup dialog
Qt: fix the display side of saved game selection; character names for
	available save files are shown in a column of push buttons instead
	of each button overwriting all the ones before it
Qt: don't clobber an existing save file after choosing "new game" in the
	saved game selection widget
Qt: don't get stuck in a loop after choosing "play" while the character name
	field is empty in the character selection widget
Qt: when a new message is issued, pan the message window to its left edge if
	player panned it horizontally then didn't manually scroll it back
Qt: there was no way to enter extended command "#version" by typing; command
	name matching was waiting to disambiguate it from "#versionshort"
	and the only way to that was to type #version<return> but <return>
	explicitly triggered rejection, cancelling '#' processing; #drop vs
	"droptype, "known vs "knownclass, and #takeoff vs #takeoffall are in
	similar ambiguous situation but usually invoked via keystroke
Qt: render all text windows in fixed-width font instead of just ones which
	have one or more lines with four consecutive spaces; some data.base
	entries do have those (usually final attribution) and some don't,
	so display from one entry to another was inconsistent if default
	proportional font was ever used
Qt: while a text window was shown (such as the "things that are here" popup
	when stepping on items), typing commands had the input passed on to
	the map and then executed; sometimes that caused the not-yet-dismissed
	text window to hang
Qt: {maybe just Qt+OSX:} when viewing a text window ('V' to look at 'history'
	for instance), clicking on [Search], entering a search target in the
	resulting popup and clicking on [Okay] or typing <return>, the text
	window got pushed underneath the main window so seemed to go away
Qt+OSX: fix control key (fixed all except for ^V); handle ^V as a shortcut key
Qt+OSX: rename menu entry "nethack->Preferences..." for invoking nethack's
	'O' command to "Game->Run-time options" and entry "Game->Qt settings"
	for making persistent Qt customizations to "nethack->Preferences..."
Qt+OSX: prevent game->Quit-without-saving from being hijacked for the nethack
	menu by renaming it game->_Quit-without-saving (OSX only)
Qt+OSX: add a separate nethack->Quit menu entry with different functionality;
	Command+Q invokes it
Qt+OSX: since menu entry help->"About Qt NetHack" gets hijacked and becomes
	"nethack->About nethack", add a separate help->_About_Qt_NetHack_
	which stays where intended and brings up the same information
Qt+OSX: suppress unwanted "Search [______]" action from being inserted as the
	first entry in the menubar's "Help" dropdown menu
tiles: add indicator of thonged portion to aklys tile
tty: role and race selection menus weren't filtering out potential choices
	which got excluded by OPTIONS=align:!lawful or !neutral or !chaotic
tty: '$' can now select gold in a menu even when it isn't on current page
Unix: when user name is used as default character name, keep hyphenated value
	intact instead stripping off dash and whatever follows as if that
	specified role/race/&c (worked once upon a time; broken since 3.3.0)
Unix: add "ec2-user" to the list of user names 'sysconf' classifies as generic
user_sounds: move the message hook from inside individual window display ports
	to the core where it allows MSGTYP_NOSHOW msgtyp's to still trigger
	sounds to correct a reported github issue; also fixes a past reported
	issue that the curses port on Windows not working with user_sounds
Windows: update for new status condition fields
Windows: include commented-out 'PORTABLE_DEVICE_PATHS' in sysconf.template
X11: substantial overhaul of status display, both 'fancy' and 'tty-style'
X11: extend fancy status one-turn inverse video status-change highlighting to
	hunger, encumbrance, and conditions
X11: stop including unused column 0 in the map
X11: avoid 'bad Atom X Error' when perm_invent is enabled (seemingly window
	manager dependent)
X11: toggling 'perm_invent' off via 'O' didn't dismiss persistent inventory
	window
X11: with 'slow' resource set to False, the pop up yn_function didn't always
	resize properly when re-used
X11: (possibly X11+OSX): if persistent inventory was displayed at time of
	end-of-game prompting, prompting would stall until that window was
	manually dismissed


General New Features
--------------------
if a killer bee encounters a lump of royal jelly and there is no queen bee on
	the level, the bee will eat the jelly and become a new queen
automatic annotation "gateway to Moloch's Sanctum" for vibrating square level
	once that square's location becomes known (found or magic mapped);
	goes away once sanctum temple is found (entered or high altar mapped)
savefile: add support to deconstruct internal data structures down into their
	individual fields and save those fields instead of the entire struct
savefile: use little-endian format for fields where that makes a difference
replace build-time level compiler and dungeon compiler with run-time loading of
	the dungeon and level descriptions and interpreting them via Lua
split off some of the functionality that was in makedefs (compiled-in options
	build date/time, etc) so that it can be built by a cross-compiler
	and accessed on the target platform
replace quest.txt and associated conversion to quest.dat via makedefs with
	Lua quest texts loaded at runtime
callback lua functions from core at certain game actions
some altars are displayed in different colors (for tty and curses at least)
add 'quick_farsight' option to provide some control over random clairvoyance
	where pausing to be able to browse temporarily visible aspects of the
	revealed map can seem intrusive; doesn't affect clairvoyance spell
replace "money" in in-game texts with "gold"
when hallucinating, see hallucinated currencies instead of bits for an ale
when hallucinating, see hallucinated liquids when looking at water or lava
	on the map
applying a spellbook hints about read charges left
wizard mode wishing for level topology can now create hidden doors (ask for
	"secret door" when at a door or wall location), hidden corridor
	spots ("secret corridor" at a corridor location), and clouds
tiny chance for randomly created spellbooks to be Discworld novels instead
	of having only one in the first book or scroll shop created (won't
	occur in hero's initial inventory or NPC priest inventory or be
	bestowed as a prayer boon or be found in statues)
'goldX', 'implicit_uncursed', and 'mention_walls' options changed to be
	persistent across save/restore
wearing a wet towel confers "half damage from poison gas" attribute
for end of game disclosure and dumplog, show 'achievements' (previously only
	available as an encoded value in xlogfile) along with 'conduct'
more grades of self-appearance than beautiful or handsome vs ugly
when 'color' if Off and 'use_inverse' is On, draw ice on the map in inverse
	video if it uses the same character as room floor or as dark floor
new 'mention_decor' option; when On, describe dungeon features being stepped
	on or floated/flown over even when they're not covered by objects
applying royal jelly on an egg kills, revives, or changes the egg
intelligent monsters pick up and rummage through containers
toggling 'travel' option Off now only inhibits travel by mouse click, not by
	'_' command where choosing the destination provides a chance to cancel
different glyphs and symbols for stone and unexplored areas
new glyph GLYPH_NOTHING was added so !dark_room has something to be set to
	now that stone could be mapped to an entirely different symbol
added several new status conditions all of which are opt-in except
	the new cond_grab and cond_lava which are opt-out
tipping your cap might get a response
special levels can be flipped horizontally and/or vertically
new special level initialization routine, "swamp"
demon lords and princes suppress teleporting in Gehennom
for !fixinv option where inventory letters normally don't stick, try to put
	a throw-and-return weapon back into the same inventory slot it gets
	thrown from; only works if it does return and is successfully caught
wizard mode #wizborn command
include more skill information in ^X output when dual-wielding
include monk's to-hit penalty for worn suit in the status section of ^X output
item-using monsters will zap wand of undead turning at corpse-wielding hero
	when the corpse is harmful
boiling a pool or fountain now creates a temporary cloud of steam
random themed rooms in the dungeons of doom
extended achievement and conduct fields for xlogfile
record amount of gold in hero's possession in xlogfile
new objects:  amulets of flying and guarding
new monsters:  displacer beast ('f') and genetic engineer ('Q')
make camera flash which reveals previously unseen map features or objects or
	monsters record those on the hero's map; monsters revert to 'unseen'
boolean options can optionally have the form "name:value" with value taken
	from among "true", "yes", "on", or 1 and "false", "no", "off", or 0
record number of wishes and artifact wishes in xlogfile
give feedback for '#chat' directed at walls
add 'Sokoban' conduct, tracking the number of times the special Sokoban rules
	which incur luck penalties have been violated; don't report it
	unless/until Sokoban branch has been entered
reduce verbosity when a mind flayer attacks a headless monster; when a
	tentacle-to-head attack hits but fails to accomplish anything skip
	remaining attacks (mind flayer has 3, master mind flayer has 5)
add section marker [] support to run-time config file; CHOOSE section1,section2
	followed by [section1] ... [section2] ... forced all the rest of the
	file to be part of the last section; that still works the same, but []
	can be used to terminate the last section and revert to common options
	for the remainder of the file
render the color names in the corresponding color when using the pick-a-color
	menu for adding status highlights or menu colors via 'O'
reading blessed scroll of teleportation confers one-shot teleport control
mild zombie apocalypse
list lamps and lanterns in charging prompt
let tourists read conical hats
when "?i" (show key bindings) displays commands and their keys, also show
	commands without any key (so ones useable via '#', or possibly menu,
	only; the majority are debugging commands)
assign default key binding for <del> or <delete> to execute #terrain
assign M-X to #exploremode
make #herecmdmenu and #therecmdmenu autocomplete
add 'sortdiscoveries' option to control output of '\' and '`' commands
include an indication of monsters' health during farlook feedback (including
	/M and autodescribe); also include it in death reason when killed by
	a monster: "killed by {an uninjured newt,a heavily injured mumak}"
[later: suppress the indication of monsters' health]
make DOAGAIN (^A) become unconditional; commenting it out in config.h makes
	it be bound to NUL, a no-op, but allows BIND=k:repeat to set it to k
add support for a single monster species to have distinct male, female,
	and gender-neutral naming terms
add support for a single monster species to have distinct male and female
	tiles
consolidate several monsters that differed only by their gender into their
	single species
added wizmgender debugging command to display female monsters in red inverse;
	helpful for debugging gender-related matters on tty; currently ignored
	on other window ports [later: changed from command to boolean option]
record number of encountered bones levels in xlogfile
add bonesless to extended conducts field in xlogfile
show bones levels information in enlightenment at end of game or in explore
	and wizmode
for #wizintrinsic, use any counts entered during menu selection
give feedback when boolean options are toggled interactively ('O' command)
'|' command (#perminv) for interacting with persistent inventory display
	(curses and X11 only)
menu_shift_left, menu_shift_right menu command keys; default '{' and '}'
	(curses for perm_invent only; implemented for X11 too but menus for
	it lack horizontal scroll bars so the shifts don't work there)
using 'f' while quiver is empty and 'autoquiver' is Off when wielding a
	thrown-and-return weapon will throw that weapon instead of filling
	the quiver (inspired by xNetHack)
3.6's tribute: add one new passage to Sourcery, three to Small Gods, one to
	Lords and Ladies, two to Soul Music, three to Interesting Times
monsters can see and remember hero resistances
monsters can gain resistances by eating corpses


Platform- and/or Interface-Specific New Features
------------------------------------------------
user_sounds: provide an experimental mechanism for terminal-side sounds similar
	to the method used for vt_tiledata; new option vt_sounddata that also
	requires compile-time definition of TTY_SOUND_ESCCODES (also requires
	terminal-side code external to NetHack to recognize the sequence and
	act on it)
curses: implement 'selectsaved', restore via menu of saved games
curses: implement selecting menu items via mouse
curses: 'windowborders' can be set to 3 or 4 to suppress perm_invent borders
	to provide slightly more room for actual inventory info
curses: if panictrace is triggered, reset the terminal before giving backtrace
Qt: the "paper doll" inventory subset can be controlled via the "Qt Settings"
	dialog box ("Preferences..." on OSX)
Qt: draw a border around each tile in the paper doll inventory; when BUC is
	known for a doll item, change the border's color and thicken it
Qt: letting the mouse hover over the paper doll shows a tool tip describing
	the object--or lack of same--in the slot under the pointer
Qt: clicking on the paper doll runs the #seeall command (inventory of wielded
	and worn items plus tools [lamps, leashes] actively in use; in other
	words, same set of things whose tiles are used to populate the doll)
Qt: clicking on the status window runs the #attributes command (^X)
Qt: add a Search button to the toolbar
Qt: support the 'hitpointbar' option
Qt: add Filter, Layout, and Reset buttons to the extended command selector;
	Filter is only useful in wizard mode, allowing changing the set of
	extended commands between "all", "normal mode only", "extra wizard
	mode only"; Layout redisplays the grid of command buttons, toggling
	from down columns to across rows or vice versa; Reset puts both back
	to their default settings and clears any pending typed input
Qt: [later] augment extended command selection dialog's Filter to add a
	fourth subset, those commands which autocomplete when typed for tty,
	typically commands with no keystroke or only meta character keystroke;
	that makes Filter useful in normal mode (much shorter list of choices)
tiles: male and female variations in monsters.txt; tested only with tile2bmp
	conversion utility so far; also supported by tilemap utility to
	generate tile.c
Unix: can define NOSUSPEND in config.h or src/Makefile's CFLAGS to prevent
	unixconf.h from enabling SUSPEND without need to modify unixconf.h
X11: implement 'selectsaved', restore via menu of saved games
X11: echo getline prompt and response (wishes, applying names) to message
	window and dumplog message history


NetHack Community Patches (or Variation) Included
-------------------------------------------------
hallucinatory trap names from github pull request #174
autounlock feature originally from unnethack in github pull request #228
replace "You feel cold" message for freezing unseen door (github #265)
applying a candelabrum with no candles gives a tip (github #265)
candelabrum now reads "(n of 7 candles attached)" (github #265)
show appropriate message on throne when crowned (github #265)
choir chanting, bathing in darkness for death by Moloch (github #265)
remove "iron hook" unidentified description (github #265)
suppress "Unknown command" messages in the dumplog. (github #265)
give player message informing them they can use #enhance (github #265)
neutral sacrifices disappear in a cloud of smoke (github #265)
call potion bottles by nonsensical names if hallucinating (github #265)
add a default message for chatting to gnomes (github #265)
better reporting directions for impossible() (github #265)
underwater fire scroll causes vaporization (github #265)
default shk sell prompt to N (github #265)
teach non-mindless monsters about the Castle trapdoors (github #265)
always print a message when the hero teleports (github #265)
always print a message when the hero level teleports (github #265)
remove Sokoban luck penalties for actions you can't cheat with (github #260)
sounds for minotaurs (github #298)
correct the Guidebook descriptions for msdos video_width and video_height to
	state that they work with video:vesa; the video:vga setting that was
	described there forces the 640x480x16 mode where video_width and
	video_height don't operate (github #294)
redo rndmonst() to operate in a single pass (github pull request #286)
fix the "stuck pets" issue (github #329)
allow themed room subrooms to be filled (github #347)
allow rereading spellbooks to refresh memory at any time (github #261)
allow themed rooms constrained by level difficulty (github #344)
add a varied form of LIBNH nethack library contribution (github #385, #403)
add cross-compile to WASM (github #385, #403, #412)
differentiating gendered monster tiles from NullCGT (#430)
check bones data directly for deja vu messages (#374)
unify code for extracting an object from a monster's inventory (#455)
make engraving an occupation (#460)


Code Cleanup and Reorganization
-------------------------------
new core file insight.c - move enlightenment and conduct from cmd.c to it,
	also move vanquished, genocided, and extinct monsters from end.c,
	and move one-line stethoscope/probing feedback from priest.c
move majority of global variables into instance_globals struct g
move zeroobj, zeromonst, zeroany into const_globals struct cg
remove STATIC_DCL, STATIC_OVL, STATIC_VAR, STATIC_PTR
old Qt moved from win/Qt to win/Qt3 and files renamed to use qt3_ prefix
more current Qt for Qt version 4 and 5 moved from win/Qt4 to win/Qt; qt4
	moniker changed to qt_
window-port-interface: add_menu() modified to take a more general itemflags
	parameter to support uses beyond just 'preselected'
window-port-interface: start_menu() modified to take a new mbehavior parameter
add some bounds checking to tabexpand (doesn't prevent the apparent compiler
	optimization bug that put homebrew OSX executable into endless loop)
unified breamm and breamu
added some stair helper functions
unified the code for finding a queen bee
unified the code for multishot class bonus code
unified the code for obtaining the inventory letter value for sortloot
unified the code for (un)locking boxes in inventory
unified the code for finding room pos for some features
unified the code for revealing hiding monsters for mvm attacks
options overhaul: moved the option definitions into include/optlist.h;
	combined the boolean and compound options into one allopt[] array;
	each option has its own individual function for setting the option,
	for retrieving the option value, and for processing the option
	following its selection in the 'O' menu, added doc/options.doc file.
function reglyph_darkroom() relocated from options.c to display.c
resurrect 'makedefs -m' to be able to derive default mons[].diffculty values
	suitable for assigning to new or changed monsters
convert obj->oextra->omid from pointer to scalar
get rid of unused obj->oextra->olong
relocated unmaintained code to outdated folder, specifically sys/amiga,
	sys/atari, sys/be, sys/mac, sys/os2, sys/wince, win/Qt3, win/gem,
	win/gnome, include/amiconf.h, include/beconf.h, include/def_os2.h,
	include/os2conf.h, include/macconf.h, include/tosconf.h,
	include/wceconf.h
removed SYSFLAGS conditional code
removed MFLOPPY conditional code
get rid of 3.6.1 workaround needed to retain compatibility with 3.6.0 bones
	files after fix for 3.3.0 through 3.6.0 bug for invalid 'bonesid'
	designation in bones of quest levels
add an additional note to mextra.h and obj.h comments that reminds people to
	appropriately init new fields if they need to initialize to something
	other than zero
rework stairs structure into a linked list
move 'restoring' to the program_state struct; add corresponding 'saving';
	both used to enforce no updating of status lines or of persistent
	inventory when the relevant activity is in progress
unify special attack damages from separate you-hit-monster, monster-hits-you,
	and monster-hits-monster into functions by damage type
unify trap effects for hero and monster stepping on the trap by trap type
replace the single permonst mname field with male, female, and gender-neutral
	names pmnames[NUM_MGENDERS] fields
adjust window port interface to pass a pointer to a glyph_info struct which
	contains the glyph itself, the ttychar, the color, the glyphflags,
	and the symset index; this affects two window port calls that get
	passed glyphs: print_glyph() and add_menu().
switch from k&r C to C99